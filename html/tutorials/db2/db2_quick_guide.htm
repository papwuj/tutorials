<!DOCTYPE html>
<html lang="en-US">
<head>
<title>DB2 Quick Guide - Tutorialspoint</title>
<meta charset="utf-8">
<meta name="description" content="DB2 Quick Guide - This chapter describes history of DB2, its versions, editions and their respective features."/>
<meta name="keywords" content="C, C++, Python, Java, HTML, CSS, JavaScript, SQL, PHP, jQuery, XML, DOM, Bootstrap, Tutorials, Articles, Programming, training, learning, quiz, preferences, examples, code"/>
<link rel="canonical" href="https://www.tutorialspoint.com/db2/db2_quick_guide.htm" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
<script src="/theme/js/script-min-v2.js?v=3"></script>
<link rel="stylesheet" href="/theme/css/style-min-v2.css?v=6">
<script src="//services.bilsyndication.com/adv1/?d=901" defer="" async=""></script>
<script> var vitag = vitag || {};</script>
<script> vitag.outStreamConfig = { enablePC: false, enableMobile: false };</script>  
<style>
.right-menu .mui-btn {
    background-color:#16a017;
}
a.demo {
    background:#16a017;
}
li.heading {
    background:#16a017;
}
.course-box{background:#16a017}
.home-intro-sub p{color:#16a017}
</style>
</head>
<body>
<header id="header">
<!-- Top sub-menu Starts Here -->
<div class="mui-appbar mui-container-fulid top-menu">
<div class="mui-container">
<div class="top-menu-item home">
<a href="https://www.tutorialspoint.com/index.htm" target="_blank" title="TutorialsPoint - Home"><i class="fal fa-home"></i> <span>Home</span></a>
</div>
<div class="top-menu-item qa">
<a href="https://www.tutorialspoint.com/about/about_careers.htm" target="_blank" title="Job @ Tutorials Point"><i class="fa fa-suitcase"></i> <span>Jobs</span></a>
</div>
<div class="top-menu-item tools">
<a href="https://www.tutorialspoint.com/online_dev_tools.htm" target="_blank" title="Tools - Online Development and Testing Tools"><i class="fal fa-cogs"></i> <span>Tools</span></a>
</div>
<div class="top-menu-item coding-ground">
<a href="https://www.tutorialspoint.com/codingground.htm" target="_blank" title="Coding Ground - Free Online IDE and Terminal"><i class="fal fa-code"></i> <span>Coding Ground </span></a> 
</div>
<div class="top-menu-item current-affairs">
<a href="https://www.tutorialspoint.com/current_affairs.htm" target="_blank" title="Daily Current Affairs"><i class="fal fa-layer-plus"></i> <span>Current Affairs</span></a>
</div>
<div class="top-menu-item upsc-notes">
<a href="https://www.tutorialspoint.com/upsc_ias_exams.htm" target="_blank" title="UPSC IAS Exams Notes - TutorialsPoint"><i class="fal fa-user-tie"></i> <span>UPSC Notes</span></a>
</div>      
<div class="top-menu-item online-tutoris">
<a href="https://www.tutorialspoint.com/tutor_connect/index.php" target="_blank" title="Top Online Tutors - Tutor Connect"><i class="fal fa-user"></i> <span>Online Tutors</span></a>
</div>
<div class="top-menu-item whiteboard">
<a href="https://www.tutorialspoint.com/whiteboard.htm" target="_blank" title="Free Online Whiteboard"><i class="fal fa-chalkboard"></i> <span>Whiteboard</span></a>
</div>
<div class="top-menu-item net-meeting">
<a href="https://www.tutorialspoint.com/netmeeting.php" target="_blank" title="A free tool for online video conferencing"><i class="fal fa-chalkboard-teacher"></i> <span>Net Meeting</span></a> 
</div>
<div class="top-menu-item articles">
<a href="https://www.tutorix.com" target="_blank" title="Tutorx - The Best Learning App" rel="nofollow"><i class="fal fa-video"></i> <span>Tutorix</span></a> 
</div>        
<div class="social-menu-item">
<a href="https://www.facebook.com/tutorialspointindia" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Facebook"><i class="fab fa-facebook-f"></i></a> 
<a href="https://www.twitter.com/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Twitter"><i class="fab fa-twitter"></i></a>
<a href="https://www.linkedin.com/company/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Linkedin"><i class="fab fa-linkedin-in"></i></a>
<a href="https://www.youtube.com/channel/UCVLbzhxVTiTLiVKeGV7WEBg" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint YouTube"><i class="fab fa-youtube"></i></a>
</div>        
</div>
</div>
<!-- Top sub-menu Ends Here -->
<!-- Top main-menu Starts Here -->
<div class="mui-appbar mui-container-fulid mui--appbar-line-height mui--z1" id="logo-menu">
<div class="mui-container">
<div class="left-menu">
<a href="https://www.tutorialspoint.com/index.htm" title="Tutorialspoint">
<img class="tp-logo" alt="tutorialspoint" src="/db2/images/logo.png">
</a>
<div class="mui-dropdown">
<a class="mui-btn mui-btn--primary categories" data-mui-toggle="dropdown"><i class="fa fa-th-large"></i> 
<span>Categories <span class="mui-caret"></span></span></a>            
<ul class="mui-dropdown__menu cat-menu">
<li>
<ul>
<li><a href="/academic_tutorials.htm"><i class="fa fa-caret-right"></i> Academic Tutorials</a></li>
<li><a href="/big_data_tutorials.htm"><i class="fa fa-caret-right"></i> Big Data &amp; Analytics </a></li>
<li><a href="/computer_programming_tutorials.htm"><i class="fa fa-caret-right"></i> Computer Programming </a></li>
<li><a href="/computer_science_tutorials.htm"><i class="fa fa-caret-right"></i> Computer Science </a></li>
<li><a href="/database_tutorials.htm"><i class="fa fa-caret-right"></i> Databases </a></li>
<li><a href="/devops_tutorials.htm"><i class="fa fa-caret-right"></i> DevOps </a></li>
<li><a href="/digital_marketing_tutorials.htm"><i class="fa fa-caret-right"></i> Digital Marketing </a></li>
<li><a href="/engineering_tutorials.htm"><i class="fa fa-caret-right"></i> Engineering Tutorials </a></li>
<li><a href="/upsc_ias_exams.htm"><i class="fa fa-caret-right"></i> Exams Syllabus </a></li>
<li><a href="/famous_monuments.htm"><i class="fa fa-caret-right"></i> Famous Monuments </a></li>
<li><a href="/gate_exams_tutorials.htm"><i class="fa fa-caret-right"></i> GATE Exams Tutorials</a></li>
<li><a href="/latest_technologies.htm"><i class="fa fa-caret-right"></i> Latest Technologies </a></li>
<li><a href="/machine_learning_tutorials.htm"><i class="fa fa-caret-right"></i> Machine Learning </a></li>
<li><a href="/mainframe_tutorials.htm"><i class="fa fa-caret-right"></i> Mainframe Development </a></li>
<li><a href="/management_tutorials.htm"><i class="fa fa-caret-right"></i> Management Tutorials </a></li>
<li><a href="/maths_tutorials.htm"><i class="fa fa-caret-right"></i> Mathematics Tutorials</a></li>
<li><a href="/microsoft_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> Microsoft Technologies </a></li>
<li><a href="/misc_tutorials.htm"><i class="fa fa-caret-right"></i> Misc tutorials </a></li>
<li><a href="/mobile_development_tutorials.htm"><i class="fa fa-caret-right"></i> Mobile Development </a></li>
<li><a href="/java_technology_tutorials.htm"><i class="fa fa-caret-right"></i> Java Technologies </a></li>
<li><a href="/python_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> Python Technologies </a></li>
<li><a href="/sap_tutorials.htm"><i class="fa fa-caret-right"></i> SAP Tutorials </a></li>
<li><a href="/scripting_lnaguage_tutorials.htm"><i class="fa fa-caret-right"></i>Programming Scripts </a></li>
<li><a href="/selected_reading.htm"><i class="fa fa-caret-right"></i> Selected Reading </a></li>
<li><a href="/software_quality_tutorials.htm"><i class="fa fa-caret-right"></i> Software Quality </a></li>
<li><a href="/soft_skill_tutorials.htm"><i class="fa fa-caret-right"></i> Soft Skills </a></li>
<li><a href="/telecom_tutorials.htm"><i class="fa fa-caret-right"></i> Telecom Tutorials </a></li>
<li><a href="/upsc_ias_exams.htm"><i class="fa fa-caret-right"></i> UPSC IAS Exams </a></li>
<li><a href="/web_development_tutorials.htm"><i class="fa fa-caret-right"></i> Web Development </a></li>
<li><a href="/sports_tutorials.htm"><i class="fa fa-caret-right"></i> Sports Tutorials </a></li>
<li><a href="/xml_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> XML Technologies </a></li>
<li><a href="/multi_language_tutorials.htm"><i class="fa fa-caret-right"></i> Multi-Language Tutorials</a></li>
<li><a href="/questions_and_answers.htm"><i class="fa fa-caret-right"></i> Interview Questions</a></li>
</ul>
</li>
</ul>
<div class="clear"></div>
</div> 
</div>
<div class="right-menu">
<div class="toc-toggle">
<a href="javascript:void(0);"><i class="fa fa-bars"></i></a>
</div>
<div class="mobile-search-btn">
<a href="https://www.tutorialspoint.com/search.htm"><i class="fal fa-search"></i></a>
</div>
<div class="search-box">
<form method="get" class="" name="searchform" action="https://www.google.com/search" target="_blank" novalidate="">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com" class="user-valid valid">
<input class="header-search-box" type="text" id="search-string" name="q" placeholder="Search your favorite tutorials..." onfocus="if (this.value == 'Search your favorite tutorials...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search your favorite tutorials...';}" autocomplete="off">
<button><i class="fal fa-search"></i></button>
</form>
</div>
<div class="menu-btn library-btn">
<a href="https://www.tutorialspoint.com/tutorialslibrary.htm"><i class="fal fa-cubes"></i> <span>Library</span></a>
</div>
<div class="menu-btn videos-btn">
<a href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fal fa-video"></i> <span>Videos</span></a> 
</div>
<div class="menu-btn videos-btn">
<a href="https://www.tutorialspoint.com/questions/index.php"><i class="fa fa-location-arrow"></i> <span>Q/A</span></a>
</div>
<div class="menu-btn ebooks-btn">
<a href="https://store.tutorialspoint.com"><i class="fal fa-book"></i> <span>eBooks</span></a>
</div>
<div class="mui-dropdown">
<button class="mui-btn mui-btn--primary" data-mui-toggle="dropdown">
<span class="mui-caret"></span>
</button>
<ul class="mui-dropdown__menu">
<li><a href="https://www.tutorialspoint.com/tutorialslibrary.htm"><i class="fal fa-cubes"></i> <span>Library</span></a></li>
<li><a href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fal fa-video"></i> <span>Videos</span></a></li>
<li><a href="https://store.tutorialspoint.com"><i class="fal fa-book"></i> <span>eBooks</span></a></li>
</ul>
</div>
</div>
</div>
</div>
<!-- Top main-menu Ends Here -->
</header>
<div class="mui-container-fluid content">
<div class="mui-container">
<!-- Tutorial ToC Starts Here -->
<div class="mui-col-md-3 tutorial-toc">
<div class="mini-logo">
<img src="/db2/images/db2-mini-logo.jpg" alt="DB2 Tutorial" />
</div>
<ul class="toc chapters">
<li><a class="videolink" href="/db2_online_training/index.asp" target="_blank"><img src="/db2/images/db2-video-tutorials.jpg" alt="DB2 Video Tutorials" /></a></li>
</ul>
<ul class="toc chapters">
<li class="heading">DB2 Tutorial</li>
<li><a  href="/db2/index.htm">Home</a></li>
<li><a  href="/db2/db2_introduction.htm">DB2 - Introduction</a></li>
<li><a  href="/db2/db2_server_installation.htm">DB2 - Server Installation</a></li>
<li><a  href="/db2/db2_instance.htm">DB2 - Instance</a></li>
<li><a  href="/db2/db2_databases.htm">DB2 - Databases</a></li>
<li><a  href="/db2/db2_bufferpools.htm">DB2 - Bufferpools</a></li>
<li><a  href="/db2/db2_tablespaces.htm">DB2 - Tablespaces</a></li>
<li><a  href="/db2/db2_storagegroups.htm">DB2 - Storagegroups</a></li>
<li><a  href="/db2/db2_schemas.htm">DB2 - Schemas</a></li>
<li><a  href="/db2/db2_data_type.htm">DB2 - Data Types</a></li>
<li><a  href="/db2/db2_tables.htm">DB2 - Tables</a></li>
<li><a  href="/db2/db2_alias.htm">DB2 - Alias</a></li>
<li><a  href="/db2/db2_constraints.htm">DB2 - Constraints</a></li>
<li><a  href="/db2/db2_indexes.htm">DB2 - Indexes</a></li>
<li><a  href="/db2/db2_triggers.htm">DB2 - Triggers</a></li>
<li><a  href="/db2/db2_sequences.htm">DB2 - Sequences</a></li>
<li><a  href="/db2/db2_views.htm">DB2 - Views</a></li>
<li><a  href="/db2/db2_with_xml.htm">DB2 with XML</a></li>
<li><a  href="/db2/db2_backup_and_recovery.htm">DB2 - Backup and Recovery</a></li>
<li><a  href="/db2/db2_database_security.htm">DB2 - Database Security</a></li>
<li><a  href="/db2/db2_roles.htm">DB2 - Roles</a></li>
<li><a  href="/db2/db2_ldap.htm">DB2 - LDAP</a></li>
</ul>
<ul class="toc chapters">
<li class="heading">DB2 Useful Resources</li>
<li><a href="/db2/db2_questions_answers.htm">DB2 - Questions and Answers</a></li>
<li><a href="/db2/db2_quick_guide.htm">DB2 - Quick Guide</a></li>
<li><a href="/db2/db2_useful_resources.htm">DB2 - Useful Resources</a></li>
<li><a href="/db2/db2_discussion.htm">DB2 - Discussion</a></li>
</ul>
<ul class="toc reading">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="/upsc_ias_exams.htm">UPSC IAS Exams Notes</a></li>
<li><a target="_top" href="/developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="/questions_and_answers.htm">Questions and Answers</a></li>
<li><a target="_top" href="/effective_resume_writing.htm">Effective Resume Writing</a></li>
<li><a target="_top" href="/hr_interview_questions/index.htm">HR Interview Questions</a></li>
<li><a target="_top" href="/computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="/computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div>
<!-- Tutorial ToC Ends Here -->
<!-- Tutorial Content Starts Here -->
<div class="mui-col-md-6 tutorial-content">
<h1>DB2 Quick Guide</h1>
<hr />
<div class="top-ad-heading">Advertisements</div>
<div style="text-align: center;">
<script><!--
google_ad_client = "pub-7133395778201029";
var width = document.getElementsByClassName("tutorial-content")[0].clientWidth - 40;
google_ad_width = width;
google_ad_height = 150;
google_ad_format = width + "x150_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="mui-container-fluid button-borders">
<div class="pre-btn">
<a href="/db2/db2_questions_answers.htm"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="/db2/db2_useful_resources.htm">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>
<div class="clearer"></div>
<h1>DB2 Introduction</h1>
<p>This chapter describes history of DB2, its versions, editions and their respective features.</p>
<h2>Overview</h2>
<p>DB2 is a database product from IBM. It is a Relational Database Management System (RDBMS). DB2 is designed to store, analyze and retrieve the data efficiently. DB2 product is extended with the support of Object-Oriented features and non-relational structures with XML.</p>
<h2>History</h2>
<p>Initially, IBM had developed DB2 product for their specific platform.  Since year 1990, it decided to develop a Universal Database (UDB) DB2 Server, which can run on any authoritative operating systems such as Linux, UNIX, and Windows.</p>
<h2>Versions</h2>
<p>For IBM DB2, the UDB current version is 10.5 with the features of BLU Acceleration and its code name as 'Kepler'.  All the versions of DB2 till today are listed below:</p>
<table class="table table-bordered">
<tr>
<th>Version</th>
<th>Code Name</th>
</tr>
<tr>
<td>3.4</td>
<td>Cobweb</td>
</tr>
<tr>
<td>8.1, 8.2</td>
<td>Stinger</td>
</tr>
<tr>
<td>9.1</td>
<td>Viper</td>
</tr>
<tr>
<td>9.5</td>
<td>Viper 2</td>
</tr>
<tr>
<td>9.7</td>
<td>Cobra</td>
</tr>
<tr>
<td>9.8</td>
<td>It added features with Only PureScale</td>
</tr>
<tr>
<td>10.1</td>
<td>Galileo</td>
</tr>
<tr>
<td>10.5</td>
<td>Kepler</td>
</tr>
</table>
<h2>Data server editions and features</h2>
<p>Depending upon the requirement of needful features of DB2, the organizations select appropriate DB2 version. The following table shows DB2 server editions and their features:</p>
<table class="table table-bordered">
<tr>
<th>Editions</th>
<th>Features</th>
</tr>
<tr>
<td>Advanced Enterprise Server Edition  and  Enterprise Server Edition (AESE / ESE)</td>
<td>It is designed for mid-size to large-size business organizations. Platform - Linux, UNIX, and Windows. Table partitioning High Availability Disaster Recovery (HARD) Materialized Query Table (MQTs) Multidimensional Clustering (MDC) Connection concentrator Pure XML  Backup compression Homogeneous Federations</td>
</tr>
<tr>
<td>Workgroup Server Edition (WSE)</td>
<td>It is designed for Workgroup or mid-size business organizations. Using this WSE you can work with - High Availability Disaster Recovery (HARD) Online Reorganization Pure XML Web Service Federation support DB2 Homogeneous Federations Homogeneous SQL replication Backup compression</td>
</tr>
<tr>
<td>Express -C</td>
<td>It provides all the capabilities of DB2 at zero charge. It can run on any physical or virtual systems with any size of configuration.</td>
</tr>
<tr>
<td>Express Edition</td>
<td>It is designed for entry level and mid-size business organizations. It is full featured DB2 data server. It offers only limited services. This Edition comes with - Web Service Federations DB2 homogeneous federations Homogeneous SQL Replications Backup compression</td>
</tr>
<tr>
<td>Enterprise Developer Edition</td>
<td>It offers only single application developer. It is useful to design, build and prototype the applications for deployment on any of the IBM server. The software cannot be used for developing applications.</td>
</tr>
</table>
<h1>DB2 Server Installation</h1>
<p>This chapter describes installation steps of DB2 server.</p>
<h2>Introduction</h2>
<p>You can download the DB2 Server trial version or purchase the product license from <a rel="nofollow" target="_blank" href="http://www-01.ibm.com/software/data/db2/express-c/download.html">www.ibm.com</a>. There are two separate DB2 servers available for downloading, depending upon the size of operating system, on which it is intended to execute. For example, if you want to download a DB2 server for 32bit Linux or UNIX operating system, then you need to download a 32 bit DB2 server. The same applies for 64bit DB2 server.</p>
<h2>Hardware requirements</h2>
<p>Processor :  Minimum Core 2Duo</p>
<p>Ram  : 1GB minimum</p>
<p>Hard disk : 30GB minimum</p>
<h2>Software requirements</h2>
<p>Before installing the DB2 server, your system needs to get ready with the required software on it. For Linux, you need to install “libstdc++6.0”.</p>
<h2>Checking system compatibility</h2>
<p>Before installing DB2 Server, you need to verify if your system is compatible with the DB2 server. For confirming the compatibility, you need to call 'db2prereqcheck' command on command console.</p>
<h2>Installing DB2 on Linux operating system</h2>
<p>Open the Terminal and set the db2 installation image folder path on console using “CD &lt;DB2 installation folder&gt;” command. Then type “./db2prereqcheck” command, which confirms the compatibility of your system with DB2 server.</p>
<pre class="prettyprint notranslate">
./db2prereqcheck
</pre>
<p>Figure-1 shows the compatibility requirements of Linux operating system and hardware system.</p>
<p>Follow the given steps for installing DB2 on your Linux system:</p>
<ul class="list">
<li>Open the terminal.</li>
<li>Login as root user.</li>
<li>Open DB2 Installation folder.</li>
<li>Type “./db2setup” and press Enter.</li>
</ul>
<p>This process will start execution of DB2 server setup.</p>
<img src="/db2/images/db2_setup.png" alt="DB2 Server Setup" />
<p>Type “./db2setup” and press Enter on root terminal to start setup process of DB2 Server.</p>
<p>On doing so, the “Set up Launch Pad” screen appears. [Figure-2]</p>
<img src="/db2/images/install.jpeg" alt="Set up Launch Pad" />
<p>On Setup Launch pad page, select “Install a Product” option from left side menu. Select option “DB2 Advanced Enterprise Server Edition”. Select “Install New” Button.</p>
<p>A new frame appears with name “DB2 setup wizard”. Click “Next”. [Figure-3]</p>
<img src="/db2/images/db2setupwizard.png" alt="DB2 setup wizard" />
<p>The next screen appears with DB2 license agreement. Select “I accept the terms…” Click “Next”. [Figure-4]</p>
<img src="/db2/images/db2_ase.png" alt="DB2 license agreement" />
<p>Next screen comes up with offer of Installation type, which is set to “Typical” by default.</p>
<p>Keep the same selection. Click “Next”. [Figure-5]</p>
<img src="/db2/images/installation_action.png" alt="Installation Action" />
<p>The next screen appears with installation action.</p>
<p>Select “Install DB2 Advanced Enterprise Server Edition…”</p>
<p>Click “Next”. [Figure-6]</p>
<img src="/db2/images/installation_dir.png" alt="Installation Directory" />
<p>On the next screen, the setup program asks for selection of installation directory.</p>
<p>Keep the default and click “Next”.</p>
<img src="/db2/images/server_info.png" alt="Server Info" />
<p>The next screen comes up with the user authentication. Enter your password for “dasusr1” user.</p>
<p>(Your password can be identical to username so that it is convenient to remember.)</p>
<img src="/db2/images/db2_instance.png" alt="DB2 Instance" />
<p>On the following screen, the setup asks you for creation of DB2 Server Instance.</p>
<p>Here, it is creating a DB2 instance with name “db2inst1”.</p>
<img src="/db2/images/db2ins1.png" alt="DB2 Instance Name" />
<p>The next screen asks you the number of partitions you require for your default instance.</p>
<p>You have a choice of “single or Multiple” partitions.</p>
<p>Select “single partition instance”. Click “next”.</p>
<img src="/db2/images/multi_ins.png" alt="DB2 Partition" />
<p>On the next screen, the setup asks you for authentication for DB2 instance being created.</p>
<p>Here, by default username is created as “db2inst1”. You can enter password same as username.</p>
<p>Click “Next”.</p>
<img src="/db2/images/db2ins2.png" alt="Authentication" />
<p>On the next screen, the setup asks to enter authentication information for “db2fenc” user.</p>
<p>Here, you can enter password same as username.</p>
<p>Click “Next”.</p>
<img src="/db2/images/db2fanc.png" alt="Authentication Information" />
<p>On the next screen, you can select “Do not setup your db2 server to send notifications at this time” option.</p>
<p>Click ”Next”.</p>
<img src="/db2/images/notification.png" alt="Notification" />
<p>The next screen shows you the information about db2 setup.</p>
<p>Click “Finish”.</p>
<p>The DB2 Installation procedure is complete at this stage.</p>
<h2>Verifying DB2 installation</h2>
<p>You need to verify the installation of DB2 server for its usefulness. On completing the DB2 Server installation, logout from current user mode and login to “db2inst1” user. In “db2inst1” user environment, you can open terminal and execute the following commands to verify if your db2 product is installed properly or not.</p>
<h3>db2level</h3>
<p>This command shows the current version and service level of the installed DB2 product for current instance.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2level 
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2level 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB21085I Instance "db2inst2" uses "64" bits       
And DB2 code release "SQL10010" with level     
identifier "0201010E". Informational tokens     
are "DB2 v10.1.0.0", "s120403",     
"LINUXAMD64101", and Fix Pack "0".  
Product is installed at "/home/db2inst2/sqllib".  
</pre>
<h3>db2licm</h3>
<p>This command shows all the license related information of our DB2 Product.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2licm &lt;parameter&gt; 
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2licm -l 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
Product name:                     "DB2 Advanced Enterprise Server Edition" 
License type:                     "Trial" 
Expiry date:                      "10/02/2014" 
Product identifier:               "db2aese" 
Version information:              "10.1"  
Product name:                     "DB2 Connect Server" 
License type:                     "Trial" 
Expiry date:                      "10/02/2014" 
Product identifier:               "db2consv" 
Version information:              "10.1" 
</pre>
<h2>Command Line Processor (CLP)</h2>
<p>The CLP can be started in one of the three modes:</p>
<ul class="list">
<li><p><b>Command mode</b>: In this mode, each command and SQL statement must be prefixed by “db2”. For example, query “db2 activate database sample”.</p></li> 
<li><p><b>Interactive input mode</b>: you can launch this mode by using the “db2” command. Here, you can pass SQL statements without prefix. For example, “activate database sample”.</p></li>
<li><p><b>Batch mode</b>: Here, you need to create a script file, which contains all SQL queries of requirements and save the file with “.db2” extension. You can call this in command line using syntax “db2 –tf &lt;filename.db2&gt;”.</p></li>
</ul>
<img src="/db2/images/accessing_db2.png" alt="Accessing DB22" />
<h1>DB2 Instance</h1>
<h2>Introduction</h2>
<p>An Instance is a logical environment for DB2 Database Manager. Using instance, you can manage databases.  Depending on our requirements, you can create multiple instances on one physical machine. The contents of Instance directory are:</p>
<ul class="list">
<li>Database Manager Configuration file</li>
<li>System Database Directory</li>
<li>Node Directory</li>
<li>Node Configuration File [db2nodes.cfg]</li>
<li>Debugging files, dump files</li>
</ul>
<p>For DB2 Database Server, the default instance is “DB2”. It is not possible to change the location of Instance directory after its creation.  An instance can manage multiple databases. In an instance, each database has a unique name, its own set of catalog tables, configurations files, authorities and privileges.</p>
<h2>Architecture of instance in DB2 product</h2>
<img src="/db2/images/db2_product.jpeg" alt="db2_product" />
<h2>Multiple instances</h2>
<p>You can create multiple instances in one DB2Server on Linux, UNIX and Windows. It is possible to install multiple DB2Servers on a physical machine.</p>
<h2>Creating instance on Linux</h2>
<p>You can create multiple instances on Linux and UNIX if DB2 Server is installed as root user. An instance can run simultaneously on Linux and UNIX independently. You can work within a single instance of the database manager at a time.</p>
<p>An Instance folder contains database configuration files and folders. The Instance directory is stored at different locations on Windows depending on the operating system versions.</p>
<h2>Listing instances</h2>
<p>The following command is used to list instances:</p>
<h3>db2ilist</h3>
<p>This command lists all the instances that are available on a system.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2ilist 
</pre>
<p><b>Example:</b>[To see how many instances are created in DB2 copy]</p>
<pre class="prettyprint notranslate">
db2ilist 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
db2inst1 
db2inst2 
db2inst3  
</pre>
<h2>Instance environment commands</h2>
<p>These commands are useful to work with arrangement of instance in the DB2 CLI.</p>
<h3>Get instance</h3>
<p>This command shows details of the currently running instance.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 get instance 
</pre>
<p><b>Example:</b>[To see the current instance which activated the current user]</p>
<pre class="prettyprint notranslate">
db2 get instance 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
The current database manager instance is : db2inst1 
</pre>
<h3>Set instance</h3>
<p>To start or stop the database manager of an instance on DB2 UDB, the following command is executed for the current instance.<p> 
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
set db2instance=&lt;instance_name&gt; 
</pre>
<p><b>Example:</b>[ To arrange the “db2inst1” environment to current user]</p>
<pre class="prettyprint notranslate">
set db2instance=db2inst1
</pre>
<h3>db2start</h3>
<p>Using this command, you can start an instance. Before this, you need to run “set instance”.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2start 
</pre>
<p><b>Example:</b>[To start an instance]</p>
<pre class="prettyprint notranslate">
db2start
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
SQL1063N DB2START processing was successful
</pre>
<h3>db2stop</h3>
<p>Using this command you can stop a running instance.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2stop 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
SQL1064N DB2STOP processing was successful.
</pre>
<h2>Creating an instance</h2>
<p>Let us see how to create a new instance.</p>
<h3>db2icrt</h3>
<p>If you want to create a new instance, you need to log in with root. Instance id is not a root id or a root name.</p>
<p>Here are the steps to create a new instance:</p>
<p><b>Step1</b>: Create an operating system user for instance.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
useradd -u &lt;ID&gt; -g &lt;group name&gt; -m -d &lt;user location&gt; &lt;user name&gt; 
-p &lt;password&gt;  
</pre>
<p><b>Example</b>: [To create a user for instance with name ‘db2inst2’ in group ‘db2iadm1’ and password ‘db2inst2’]</p>
<pre class="prettyprint notranslate">
useradd -u 1000 -g db2iadm1 -m -d /home/db2inst2 db2inst2 -p db2inst2  
</pre>
<p><b>Step2</b>: Go to the DB2 instance directory in root user for create new instance.</p>
<p><b>Location:</b></p>
<pre class="prettyprint notranslate">
cd /opt/ibm/db2/v10.1/instance  
</pre>
<p><b>Step3</b>: Create instance using the syntax below:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
./db2icrt -s ese -u &lt;inst id&gt; &lt;instance name&gt;
</pre>
<p><b>Example</b>: [To create a new instance ‘db2inst2’ in user ‘db2inst2’ with the features of ‘ESE’ (Enterprise Server Edition)]</p>
<pre class="prettyprint notranslate">
./db2icrt -s ese -u db2inst2 db2inst2
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DBI1446I The db2icrt command is running, please wait.
 ….
 ….. 
DBI1070I Program db2icrt completed successfully.
</pre>
<h2>Arranging communication port and host for an instance</h2>
<p>Edit the /etc/services file and add the port number. In the syntax given below, ‘inst_name’ indicates the Instance name and ‘inst_port’ indicates port number of instance.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2c_&lt;inst name&gt; &lt;inst_port&gt;/tcp
</pre>
<p><b>Example</b>: [Adding ‘50001/tcp’ port number for instance ‘db2inst2’ with variable ‘db2c_db2inst2’ in ‘services’ file]</p>
<pre class="prettyprint notranslate">
db2c_db2inst2 50001/tcp
</pre>
<p><b>Syntax 1</b>: [Update Database Manager Configuration with service name. The following syntax ‘svcename’ indicates the instance service name and ‘inst_name’ indicates the instance name]</p>
<pre class="prettyprint notranslate">
db2 update database manager configuration using svcename db2c_&&lt;inst_name&gt;
</pre>
<p><b>Example 1</b>: [Updating DBM Configuration with variable svcename with value ‘db2c_db2inst2’ for instance ‘db2inst2’ </p>
<pre class="prettyprint notranslate">
db2 update database manager configuration using svcename db2c_db2inst2 
</pre>
<p><b>Output</b></p>
<pre class="prettyprint notranslate">
DB20000I The UPDATE DATABASE MANAGER CONFIGURATION command completed successfully.
</pre>
<p><b>Syntax 2</b>: set the “tcpip” communication protocol for the current instance</p>
<pre class="prettyprint notranslate">
db2set DB2COMM=tcpip 
</pre>
<p><b>Syntax 3</b>: [Stopping and starting current instance to get updated values from database manager configuration]</p>
<pre class="prettyprint notranslate">
db2stop 
db2start 
</pre>
<h2>Updating an instance</h2>
<p>You can update an instance using following command:</p>
<h3>db2iupdt</h3>
<p>This command is used to update the instance within the same version release. Before executing this command, you need to stop the instance database manager using “db2stop” command. The syntax below “inst_name” indicates the previous released or installed db2 server instance name, which you want to update to newer release or installed db2 server version.</p>
<p><b>Syntax 1</b>: To update an instance in normal mode</p>
<pre class="prettyprint notranslate">
db2iupdt &lt;inst_name&gt; 
</pre>
<p><b>Example1:</b></p>
<pre class="prettyprint notranslate">
./db2iupdt db2inst2 
</pre>
<p><b>Syntax 2</b>: To update an instance in debugging mode</p>
<pre class="prettyprint notranslate">
db2iupdt -D &lt;inst_name&gt; 
</pre>
<p><b>Example</b></p>
<pre class="prettyprint notranslate">
db2iupdt -D db2inst2  
</pre>
<h2>Upgrading an instance</h2>
<p>You can upgrade an instance from previous version of DB2 copy to current newly installed version of DB2 copy.</p>
<h3>db2iupgrade</h3>
<p>On Linux or UNIX system, this command is located in DB2DIR/instance directory. In the following syntaxes, “inst_name” indicates the previous version DB2 instance and “inst_username” indicates the current installed version DB2 copy instance user.</p>
<p><b>Syntax 2</b>:</p>
<pre class="prettyprint notranslate">
db2iupgrade -d -k -u &lt;inst_username&gt; &lt;inst_name&gt;  
</pre>
<p><b>Example</b>:</p>
<pre class="prettyprint notranslate">
db2iupgrade -d -k -u db2inst2 db2inst2 
</pre>
<p><b>Command Parameters:</b></p>
<p><b>-d</b> : Turns debugging mode on.</p>
<p><b>-k</b> : Keeps the pre-upgrade instance type if it is supported in the DB2 copy, from where you are running this command.</p>
<p>If you are using the Super User (su) on Linux for db2iupgrade command, you must issue the “su” command with the “-” option.</p>
<h2>Dropping an instance</h2>
<p>You can drop or delete the instance, which was created by “db2icrt” command.</p>
<h3>db2idrop</h3>
<p>On Linux and UNIX operating system, this command is located in the DB2_installation_folder/instance directory.</p>
<p><b>Syntax</b>: [in the following syntax, ‘inst_username’ indicates username of instance and ‘inst_name’ indicates instance name]</p>
<pre class="prettyprint notranslate">
db2idrop -u &lt;inst_username&gt; &lt;inst_name&gt; 
</pre>
<p><b>Example</b>: [To drop db2inst2]</p>
<pre class="prettyprint notranslate">
./db2idrop -u db2inst2 db2inst2  
</pre>
<h2>Using other commands with instance</h2>
<p>Command to find out which DB2 instance we are working on now.</p>
<p><b>Syntax 1</b>:  [to check the current instance activated by database manager]</p>
<pre class="prettyprint notranslate">
db2 get instance  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
The current database manager instance is:  db2inst1  
</pre>
<p><b>Syntax 2</b>: [To see the current instance with operating bits and release version]</p>
<pre class="prettyprint notranslate">
db2pd -inst | head -2  
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2pd -inst | head -2  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
Instance db2inst1 uses 64 bits and DB2 code release SQL10010   
</pre>
<p><b>Syntax 3</b>: [To check the name of currently working instance]</p>
<pre class="prettyprint notranslate">
db2 select inst_name from sysibmadm.env_inst_info    
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 select inst_name from sysibmadm.env_inst_info    
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
INST_NAME  --------------------------------------  
db2inst1              
1 record(s) selected.  
</pre>
<p><b>Syntax</b>: [To set a new instance as default]</p>
<pre class="prettyprint notranslate">
db2set db2instdef=&lt;inst_name&gt; -g   
</pre>
<p><b>Example</b>: [To array newly created instance as a default instance]</p>
<pre class="prettyprint notranslate">
db2set db2instdef=db2inst2 -g   
</pre>
<h1>DB2 Databases</h1>
<p>This chapter describes creating, activating and deactivating the databases with the associated syntax.</p>
<h2>Database architecture</h2>
<img src="/db2/images/database_archi.png" alt="Database Architecture" />
<p>A database is a collection of Tables, Schemas, Bufferpools, Logs, Storage groups and Tablespaces working together to handle database operations efficiently.</p>
<h2>Database directory</h2>
<p>Database directory is an organized repository of databases. When you create a database, all the details about database are stored in a database directory, such as details of default storage devices, configuration files, and temporary tables list etc.</p>
<p>Partition global directory is created in the instance folder. This directory contains all global information related to the database. This partition global directory is named as NODExxxx/SQLyyy, where xxxx is the data partition number and yyy is the database token.</p>
<p>In the partition-global directory, a member-specific directory is created. This directory contains local database information. The member-specific directory is named as MEMBERxxxx where xxxx is a member number. DB2 Enterprise Server Edition environment runs on a single member and has only one member specific directory. This member specific directory is uniquely named as MEMBER0000.</p>
<h2>Partitioned global directory</h2>
<p>Directory Location : &lt;instance&gt;/NODExxx/SQLxxx</p>
<p>The partition-global directory contains database related files as listed below.</p>
<ul class="list">
<li>Global deadlock write-to-file event monitoring files</li>
<li>Table space information files [SQLSPCS.1, SQLSPCS.2]</li>
<li>Storage group control files [SQLSGF.1, SQLSGF.2]</li>
<li>Temporary table space container files. [/storage path/<database>/T0000011/C000000.TMP/SQL00002.MEMBER0001.TDA]</li>
<li>Global Configuration file [SQLDBCONF]</li>
<li>History files [DB2RHIST.ASC, DB2RHIST.BAK, DB2TSCHG.HIS, DB2TSCHG.HIS]</li>
<li>Logging-related files [SQLOGCTL.GLFH.1, SQLOGCTL.GLFH.2]</li>
<li>Locking files [SQLINSLK, SQLTMPLK]</li>
<li>Automatic Storage containers</li>
</ul>
<h2>Member specific directory</h2>
<p>Directory location : /NODExxxx/SQLxxxx/MEMBER0000</p>
<p>This directory contains:</p>
<ul class="list">
<li>Objects associated with databases</li>
<li>Buffer pool information files [SQLBP.1, SQLBP.2]</li>
<li>Local event monitoring files</li>
<li>Logging-related files [SQLOGCTL.LFH.1, SQLOGCTL.LFH.2, SQLOGMIR.LFH].</li>
<li>Local configuration files</li>
<li>Deadlocks event monitor file. The detailed deadlock events monitor files are stored in the database directory of the catalog node in case of ESE and partitioned database environment.</li>
</ul>
<h2>Creating database</h2>
<p>You can create a database in instance using the “CREATE DATABASE” command. All databases are created with the default storage group “IBMSTOGROUP”, which is created at the time of creating an instance. In DB2, all the database tables are stored in “tablespace”, which use their respective storage groups.</p>
<p>The privileges for database are automatically set as PUBLIC [CREATETAB, BINDADD, CONNECT, IMPLICIT_SCHEMA, and SELECT], however, if the RESTRICTIVE option is present, the privileges are not granted as PUBLIC.</p>
<h2>Creating non-restrictive database</h2>
<p>This command is used to create a non-restrictive database.</p>
<p><b>Syntax</b>: [To create a new Database. ‘database_name’ indicates a new database name, which you want to create.]</p>
<pre class="prettyprint notranslate">
db2 create database &lt;database name&gt;
</pre>
<p><b>Example</b>: [To create a new non-restrictive database with name ‘one’]</p>
<pre class="prettyprint notranslate">
db2 create database one
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB20000I The CREATE DATABASE command completed successfully.
</pre>
<h2>Creating restrictive database</h2>
<p>Restrictive database is created on invoking this command.</p>
<p><b>Syntax</b>: [In the syntax below, “db_name” indicates the database name.]</p>
<pre class="prettyprint notranslate">
db2 create database &lt;db_name&gt; restrictive 
</pre>
<p><b>Example</b>: [To create a new restrictive database with the name ‘two’]</p>
<pre class="prettyprint notranslate">
db2 create database two restrictive 
</pre>
<h2>Creating database with different user defined location</h2>
<p>Create a database with default storage group “IBMSTOGROUP” on different path.  Earlier, you invoked the command “create database” without any user-defined location to store or create database at a particular location. To create the database using user- defined database location, the following procedure is followed:</p>
<p><b>Syntax</b>: [In the syntax below, ‘db_name’ indicates the ‘database name’ and  ‘data_location’ indicates where have to store data in folders and ‘db_path_location’ indicates driver location of ‘data_location’.]</p>
<pre class="prettyprint notranslate">
db2 create database '&lt;db_name&gt;' on '&lt;data location&gt;' dbpath on '&lt;db_path_location&gt;'  
</pre>
<p><b>Example</b>: [To create database named ‘four’, where data is stored in ‘data1’ and  this folder is stored in ‘dbpath1’]</p>
<pre class="prettyprint notranslate">
db2 create database four on '/data1' dbpath on '/dbpath1'
</pre>
<h2>Viewing local or system database directory files</h2>
<p>You execute this command to see the list of directories available in the current instance.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 list database directory 
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 list database directory 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
 System Database Directory  
 Number of entries in the directory = 6  
 Database 1 entry:  
 Database alias                       = FOUR  
 Database name                        = FOUR  
 Local database directory             = 
 /home/db2inst4/Desktop/dbpath  
 Database release level               = f.00  
 Comment                              =  
 Directory entry type                 = Indirect  
 Catalog database partition number    = 0  
 Alternate server hostname            =  
 Alternate server port number         =  
Database 2 entry: 
Database alias                       = SIX  
Database name                        = SIX  
Local database directory             = /home/db2inst4  
Database release level               = f.00  
Comment                              =  
Directory entry type                 = Indirect  
Catalog database partition number    = 0  
Alternate server hostname            =  
Alternate server port number         = 
</pre>
<h2>Activating database</h2>
<p>This command starts up all necessary services for a particular database so that the database is available for application.</p>
<p><b>Syntax</b>:[‘db_name’ indicates database name]</p>
<pre class="prettyprint notranslate">
db2 activate db &lt;db_name&gt; 
</pre>
<p><b>Example</b>: [Activating the database ‘one’]</p>
<pre class="prettyprint notranslate">
db2 activate db one  
</pre>
<h2>Deactivating database</h2>
<p>Using this command, you can stop the database services.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 deactivate db &lt;db_name&gt;
</pre>
<p><b>Example</b>: [To Deactivate database ‘one’]</p>
<pre class="prettyprint notranslate">
db2 deactivate db one
</pre>
<h2>Connecting to database</h2>
<p>After creating a database, to put it into use, you need to connect or start database.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 connect to &lt;database name&gt; 
</pre>
<p><b>Example</b>: [To Connect Database one to current CLI]</p>
<pre class="prettyprint notranslate">
db2 connect to one 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
 Database Connection Information  
 Database server        = DB2/LINUXX8664 10.1.0  
 SQL authorization ID   = DB2INST4  
 Local database alias   = ONE  
</pre>
<h2>Verifying if database is restrictive</h2>
<p>To check if this database is restrictive or not, here is the syntax:</p>
<p><b>Syntax</b>: [In the following syntax, ‘db’ indicates Database, ‘cfg’ indicates configuration, ‘db_name’ indicates database name]</p>
<pre class="prettyprint notranslate">
db2 get db cfg for &lt;db_name&gt; | grep -i restrict 
</pre>
<p><b>Example</b>: [To check if ‘one’ database is restricted or not]</p>
<pre class="prettyprint notranslate">
db2 get db cfg for one | grep -i restrict  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
Restrict access                       = NO   
</pre>
<h2>Configuring the database manager and the database</h2>
<p>Instance configuration (Database manager configuration) is stored in a file named 'db2system' and the database related configuration is stored in a file named 'SQLDBCON'.  These files cannot be edited directly.  You can edit these files using tools which call API. Using the command line processor, you can use these commands.</p>
<h3>Database Manager Configuration Parameters</h3>
<p><b>Syntax</b>: [To get the information of Instance Database manager]</p>
<pre class="prettyprint notranslate">
db2 get database manager configuration   
</pre>
OR
<pre class="prettyprint notranslate">
db2 get dbm cfg   
</pre>
<p><b>Syntax</b>: [To update instance database manager]</p>
<pre class="prettyprint notranslate">
db2 update database manager configuration   
</pre>
OR
<pre class="prettyprint notranslate">
db2 update dbm cfg  
</pre>
<p><b>Syntax</b>: [To reset previous configurations]</p>
<pre class="prettyprint notranslate">
db2 reset database manager configuration  
</pre>
OR
<pre class="prettyprint notranslate">
db2 reset dbm cfg  
</pre>
<h3>Database Configuration Parameters</h3>
<p><b>Syntax</b>: [To get the information of Database]</p>
<pre class="prettyprint notranslate">
db2 get database configuration   
</pre>
OR
<pre class="prettyprint notranslate">
db2 get db cfg  
</pre>
<p><b>Syntax</b>: [To update the database configuration]</p>
<pre class="prettyprint notranslate">
db2 update database configuration    
</pre>
OR
<pre class="prettyprint notranslate">
db2 update db cfg  
</pre>
<p><b>Syntax</b>: [To reset the previously configured values in database configuration</p>
<pre class="prettyprint notranslate">
db2 reset database configuration     
</pre>
OR
<pre class="prettyprint notranslate">
db2 reset db cfg   
</pre>
<p><b>Syntax</b>: [To check the size of Current Active Database]</p>
<pre class="prettyprint notranslate">
db2 "call get_dbsize_info(?,?,?,-1)"      
</pre>
<p><b>Example</b>: [To verify the size of Currently Activate Database]</p>
<pre class="prettyprint notranslate">
db2 "call get_dbsize_info(?,?,?,-1)"      
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
Value of output parameters   
--------------------------   
Parameter Name  : SNAPSHOTTIMESTAMP   
Parameter Value : 2014-07-02-10.27.15.556775  
Parameter Name  : DATABASESIZE   
Parameter Value : 105795584  
Parameter Name  : DATABASECAPACITY   
Parameter Value : 396784705536  
Return Status = 0    
</pre>
<h2>Estimating space required for database</h2>
<p>To estimate the size of a database, the contribution of the following factors must be considered:</p>
<ul class="list">
<li>System Catalog Tables</li>
<li>User Table Data</li>
<li>Long Field Data</li>
<li>Large Object (LOB) Data</li>
<li>Index Space</li>
<li>Temporary Work Space</li>
<li>XML data</li>
<li>Log file space</li>
<li>Local database directory</li>
<li>System files</li>
</ul>
<h2>Checking database authorities</h2>
<p>You can use the following syntax to check which database authorities are granted to PUBLIC on the non-restrictive database.</p>
<p><b>Step 1</b>: connect to database with authentication user-id and password of instance.</p>
<p><b>Syntax</b>: [To connect to database with username and password]</p>
<pre class="prettyprint notranslate">
db2 connect to &lt;db_name&gt; user &lt;userid&gt; using &lt;password&gt;      
</pre>
<p><b>Example</b>: [To Connect “one” Database with the user id ‘db2inst4’ and password ‘db2inst4’]</p>
<pre class="prettyprint notranslate">
db2 connect to one user db2inst4 using db2inst4       
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
 Database Connection Information  
 Database server        = DB2/LINUXX8664 10.1.0  
 SQL authorization ID   = DB2INST4  
 Local database alias   = ONE        
</pre>
<p><b>Step2</b>: To verify the authorities of database.</p>
<p><b>Syntax</b>: [The syntax below shows the result of authority services for current database]</p>
<pre class="prettyprint notranslate">
db2 "select substr(authority,1,25) as authority, d_user, d_group, 
d_public, role_user, role_group, role_public,d_role from table( 
sysproc.auth_list_authorities_for_authid ('public','g'))as t 
order by authority"      
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 "select substr(authority,1,25) as authority, d_user, d_group, 
d_public, role_user, role_group, role_public,d_role from table( 
sysproc.auth_list_authorities_for_authid ('PUBLIC','G'))as t 
order by authority"       
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
AUTHORITY                 D_USER D_GROUP D_PUBLIC ROLE_USER ROLE_GROUP ROLE_PUBLIC D_ROLE  
------------------------- ------ ------- -------- --------- ---------- ----------- ------  
ACCESSCTRL                *      *       N        *         *          N           *       
BINDADD                   *      *       Y        *         *          N           *       
CONNECT                   *      *       Y        *         *          N           *       
CREATETAB                 *      *       Y        *         *          N           *       
CREATE_EXTERNAL_ROUTINE   *      *       N        *         *          N           *       
CREATE_NOT_FENCED_ROUTINE *      *       N        *         *          N           *       
CREATE_SECURE_OBJECT      *      *       N        *         *          N           *       
DATAACCESS                *      *       N        *         *          N           *       
DBADM                     *      *       N        *         *          N           *       
EXPLAIN                   *      *       N        *         *          N           *       
IMPLICIT_SCHEMA           *      *       Y        *         *          N           *       
LOAD                      *      *       N        *         *          N           *       
QUIESCE_CONNECT           *      *       N        *         *          N           *       
SECADM                    *      *       N        *         *          N           *       
SQLADM                    *      *       N        *         *          N           *       
SYSADM                    *      *       *        *         *          *           *       
SYSCTRL                   *      *       *        *         *          *           *       
SYSMAINT                  *      *       *        *         *          *           *       
SYSMON                    *      *       *        *         *          *           *       
WLMADM                    *      *       N        *         *          N           *         
20 record(s) selected. 
</pre>
<h2>Dropping Database</h2>
<p>Using the Drop command, you can remove our database from instance database directory. This command can delete all its objects, table, spaces, containers and associated files.</p>
<p><b>Syntax</b>: [To drop any database from an instance]</p>
<pre class="prettyprint notranslate">
db2 drop database &lt;db_name&gt;
</pre>
<p><b>Example</b>: [To drop ‘six’ database from instance]</p>
<pre class="prettyprint notranslate">
db2  drop database six 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB20000I The DROP DATABASE command completed successfully 
</pre>
<h1>DB2 Bufferpools</h1>
<p>This chapter introduces you to Bufferpools in the database.</p>
<img src="/db2/images/bufferpool.png" alt="bufferpool" />
<h2>Introduction</h2>
<p>The bufferpool is portion of a main memory space which is allocated by the database manager. The purpose of bufferpools is to cache table and index data from disk. All databases have their own bufferpools. A default bufferpool is created at the time of creation of new database. It called as “IBMDEFAULTBP”. Depending on the user requirements, it is possible to create a number of bufferpools. In the bufferpool, the database manager places the table row data as a page. This page stays in the bufferpool until the database is shutdown or until the space is written with new data. The pages in the bufferpool, which are updated with data but are not written onto the disk, are called “Dirty” pages. After the updated data pages in the bufferpool are written on the disk, the bufferpool is ready to take another data.</p>
<h2>Relationship between tablespaces and bufferpools</h2>
<p>Each table space is associated with a specific buffer pool in a database. One tablespace is associated with one bufferpool. The size of bufferpool and tablespace must be same. Multiple bufferpools allow you to configure the memory used by the database to increase its overall performance.</p>
<h2>Bufferpool sizes</h2>
<p>The size of the bufferpool page is set when you use the “CREATE DATABASE” command. If you do not specify the page size, it will take default page size, which is 4KB. Once the bufferpool is created, it is not possible to modify the page size later</p>
<h2>Listing the available bufferpools in the current database directory</h2>
<p><b>Syntax</b>: [The syntax below shows all available bufferpools in database]</p>
<pre class="prettyprint notranslate">
db2 select * from syscat.bufferpools   
</pre>
<p><b>Example</b>: [To see available bufferpools in current database]</p>
<pre class="prettyprint notranslate">
db2 select * from syscat.bufferpools  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
BPNAME      BUFFERPOOLID DBPGNAME   NPAGES      PAGESIZE    ESTORE 
NUMBLOCKPAGES BLOCKSIZE   NGNAME
------------------------------------------------------------ 
IBMDEFAULTBP                                                                                                                
 1 -                                                                                                  
 -2        4096 N                  0           0 -     
 
 1 record(s) selected.   
</pre>
<h2>Creating the bufferpool</h2>
<p>To create a new bufferpool for database server, you need two parameters namely, “bufferpool name” and “size of page”.  The following query is executed to create a new bufferpool.</p>
<p>Syntax: [In the syntax below,‘bp_name’ indicates bufferpool name and ‘size’ indicates size for page you need to declare for bufferpools (4K,8K,16K,32K)]</p>
<pre class="prettyprint notranslate">
db2 create bufferpool &lt;bp_name&gt; pagesize &lt;size&gt; 
</pre>
<p><b>Example</b>: [To create a new bufferpool with name “bpnew” and size “8192”(8Kb).]</p>
<pre class="prettyprint notranslate">
db2 create bufferpool bpnew pagesize 8192  
</pre>
<p><b>Output</b></p>
<pre class="prettyprint notranslate">
DB20000I The SQL command completed successfully.  
</pre>
<h2>Dropping the bufferpool</h2>
<p>Before dropping the bufferpool, it is required to check if any tablespace is assigned to it.</p>
<p><b>Syntax</b>: [To drop the bufferpool]</p>
<pre class="prettyprint notranslate">
drop bufferpool &lt;bp_name&gt;  
</pre>
<p><b>Example</b>: [To drop ‘bpnew’ named bufferpool]</p>
<pre class="prettyprint notranslate">
db2 drop bufferpool bpnew  
</pre>
<p><b>Output</b></p>
<pre class="prettyprint notranslate">
DB20000I The SQL command completed successfully.  
</pre>
<h1>DB2 Tablespaces</h1>
<p>This chapter describes the tablespaces in detail</p>
<img src="/db2/images/tablespace.png" alt="Tablespaces" />
<h2>Introduction</h2>
<p>A table space is a storage structure, it contains tables, indexes, large objects, and long data. It can be used to organize data in a database into logical storage group which is related with where data stored on a system. This tablespaces are stored in database partition groups</p>
<h2>Benefits of tablespaces in database</h2>
<p>The table spaces are beneficial in database in various ways given as follows:</p>
<p><b>Recoverability</b>: Tablespaces make backup and restore operations more convenient. Using a single command, you can make backup or restore all the database objects in tablespaces.</p>
<p><b>Automatic storage Management</b>: Database manager creates and extends containers depending on the needs.</p>
<p><b>Memory utilization</b>: A single bufferpool can manage multiple tablespaces. You can assign temporary tablespaces to their own bufferpool to increase the performance of activities such as sorts or joins.</p>
<h2>Container</h2>
<p>Tablespaces contains one or more containers. A container can be a directory name, a device name, or a filename. In a database, a single tablespace can have several containers on the same physical storage device. If the tablespace is created with automatic storage tablespace option, the creation and management of containers is handled automatically by the database manager. If it is not created with automatic storage tablespace option, you need to define and manage the containers yourself.</p>
<h2>Default tablespaces</h2>
<p>When you create a new database, the database manager creates some default tablespaces for database. These tablespace is used as a storage for user and temporary data. Each database must contain at least three tablespaces as given here:</p>
<ol class="list">
<li>Catalog tablespace</li>
<li>User tablespace</li>
<li>Temporary tablespace</li>
</ol>
<p><b>Catalog tablespace</b>: It contains system catalog tables for the database. It is named as SYSCATSPACE and it cannot be dropped.</p>
<p><b>User tablespace</b>: This tablespace contains user-defined tables. In a database, we have one default user tablespace, named as USERSPACE1. If you do not specify user-defined tablespace for a table at the time you create it, then the database manager chooses default user tablespace for you.</p>
<p><b>Temporary tablespace</b>: A temporary tablespace contains temporary table data. This tablespace contains system temporary tablespaces or user temporary tablespace.</p>
<p>System temporary tablespace holds temporary data required by the database manager while performing operation such as sorts or joins. A database must have at least one system temporary tablespace and it is named as TEMPSPACE1. It is created at the time of creating the database. User temporary tablespace holds temporary data from tables. It is created with DECLARE GLOBAL TEMPORARY TABLE or CREATE GLOBAL TEMPORARY TABLE statement. This temporary tablespace is not created by default at the time of database creation.</p>
<p><b>Tablespaces and storage management:</b></p>
<p>Tablespaces can be setup in different ways, depending on how you want to use them. You can setup the operating system to manage tablespace allocation, you can let the database manager allocate space or you can choose automatic allocation of tablespace for your data.</p>
<p>The following three types of managed spaces are available:</p>
<p><b>System Managed Space (SMS)</b>: The operating system’s file system manager allocates and manages the space where the table is stored. Storage space is allocated on demand. This model consists of files representing database objects. This tablespace type has been deprecated in Version 10.1 for user-defined tablespaces, and it is not deprecated for catalog and temporary tablespaces.</p>
<p><b>Database Managed Space (DMS)</b>: The Database Server controls the storage space. Storage space is pre- allocated on the file system based on container definition that you specify when you create the DMS table space. It is deprecated from version 10.1 fix pack 1 for user-defined tablespaces, but it is not deprecated for system tablespace and temporary tablespace.</p>
<p><b>Automatic Storage Tablespace</b>: Database server can be managed automatically. Database server creates and extends containers depend on data on database. With automatic storage management, it is not required to provide container definitions. The database server looks after creating and extending containers to make use of the storage allocated to the database. If you add storage space to a storage group, new containers are automatically created when the existing container reach their maximum capacity. If you want to use the newly-added storage immediately, you can rebalance the tablespace.</p>
<p><b>Page, table and tablespace size:</b></p>
<p>Temporary DMS and automatic storage tablespaces, the page size you choose for your database determines the maximum limit for the tablespace size. For table SMS and temporary automatic storage tablespaces, the page size constrains the size of table itself. The page sizes can be 4kb, 8kb, 16kb or 32kb.</p>
<table class="table table-bordered">
<tr>
<th>Tablespace type</th>
<th>4K page size limit</th>
<th>8K page size limit</th>
<th>16K page size limit</th>
<th>32K page size limit</th>
</tr>
<tr>
<td>DMS, non-temporary automatic storage tablespace regular</td>
<td>64G</td>
<td>128G</td>
<td>256G</td>
<td>512G</td>
</tr>
<tr>
<td>DMS, temporary DMS and non- temporary automatic storage table space large</td>
<td>1892G</td>
<td>16384G</td>
<td>32768G</td>
<td>65536G</td>
</tr>
</table>
<h1>DB2 Storagegroups</h1>
<p>This chapter describes the Database Storagegroups.</p>
<img src="/db2/images/storage.png" alt="Storage" />
<h2>Introduction</h2>
<p>A set of Storage paths to store database table or objects, is a storage group.  You can assign the tablespaces to the storage group. When you create a database, all the tablespaces take default storagegorup. The default storage group for a database is ‘IBMSTOGROUP’. When you create a new database, the default storage group is active, if you pass the “AUTOMATIC STOGROUP NO” parameter at the end of “CREATE DATABASE” command. The database does not have any default storage groups.</p>
<h2>Listing storagegroups</h2>
<p>You can list all the storagegroups in the database.</p>
<p><b>Syntax</b>: [To see the list of available storagegroups in current database]</p>
<pre class="prettyprint notranslate">
db2 select * from syscat.stogroups
</pre>
<p><b>Example</b>: [To see the list of available storagegorups in current database]</p>
<pre class="prettyprint notranslate">
db2 select * from syscat.stogroups
</pre>
<h2>Creating a storagegroup</h2>
<p>Here is a syntax to create a storagegroup in the database:</p>
<p><b>Syntax</b>: [To create a new stogroup. The ‘stogropu_name’ indicates name of new storage group and ‘path’ indicates the location where data (tables) are stored]</p>
<pre class="prettyprint notranslate">
db2 create stogroup <stogroup_name> on ‘path’
</pre>
<p><b>Example</b>: [To create a new stogroup ‘stg1’ on the path ‘data1’ folder]</p>
<pre class="prettyprint notranslate">
db2 create stogroup stg1 on ‘/data1’
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB20000I The SQL command completed succesfully 
</pre>
<h2>Creating tablespace with stogroup</h2>
<p>Here is how you can create a tablespace with storegroup:</p>
<p><b>Syntax</b>: [To create a new tablespace using existed storage group]</p>
<pre class="prettyprint notranslate">
db2 create tablespace &lt;tablespace_name&gt;  using stogroup &lt;stogroup_name&gt; 
</pre>
<p><b>Example</b>: [To create a new tablespace named ‘ts1’ using existed storage group ‘stg1’]</p>
<pre class="prettyprint notranslate">
db2 create tablespace ts1 using stogroup stg1 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB20000I The SQL command completed succesfully 
</pre>
<h2>Altering a storagegroup</h2>
<p>You can alter the location of a storegroup by using following syntax:</p>
<p><b>Syntax</b>: [To shift a storage group from old location to new location]</p>
<pre class="prettyprint notranslate">
db2 alter stogroup <sg_name> add ‘location’, ‘location’ 
</pre>
<p><b>Example</b>: [To modify location path from old location to new location for storage group named ‘sg1’]</p>
<pre class="prettyprint notranslate">
db2 alter stogroup sg1 add ‘/path/data3’, ‘/path/data4’ 
</pre>
<h2>Dropping folder path of storagegroup</h2>
<p>Before dropping folder path of storagegroup, you can add new location for the storagegroup by using alter command.</p>
<p><b>Syntax</b>: [To drop old path from storage group location]</p>
<pre class="prettyprint notranslate">
db2 alter stogroup <sg_name> drop ‘/path’ 
</pre>
<p><b>Example</b>: [To drop storage group location from ‘stg1’]</p>
<pre class="prettyprint notranslate">
db2 alter stogroup stg1 drop ‘/path/data1’  
</pre>
<h2>Rebalancing a tablespace</h2>
<p>Rebalancing the tablespace is required when we create a new folder for storagegroup or tablespaces while the transactions are conducted on the database and the tablespace becomes full. Rebalancing updates database configuration files with new storagegroup.</p>
<p><b>Syntax</b>: [To rebalance the tablespace from old storage group path to new storage group]</p>
<pre class="prettyprint notranslate">
db2 alter tablspace &lt;ts_name&gt; rebalance   
</pre>
<p><b>Example</b>: [To rebalance]</p>
<pre class="prettyprint notranslate">
db2 alter tablespace ts1 rebalance   
</pre>
<h2>Renaming a storagegroup</h2>
<p><b>Syntax</b>: [To modify the name of existing storage name]</p>
<pre class="prettyprint notranslate">
db2 rename stogroup &lt;old_stg_name&gt; to &lt;new_stg_name&gt;   
</pre>
<p><b>Example</b>: [To modify the name of storage group from ‘sg1’ to new name ‘sgroup1’]</p>
<pre class="prettyprint notranslate">
db2 rename stogroup sg1 to sgroup1   
</pre>
<h2>Dropping a storage group</h2>
<p><b>Step 1</b>: Before dropping any storagegroup, you can assign some different storagegroup for tablespaces.</p>
<p><b>Syntax</b>: [To assign another storagegroup for table space.]</p>
<pre class="prettyprint notranslate">
db2 alter tablspace &lt;ts_name&gt; using stogroup &lt;another sto_group_name&gt;    
</pre>
<p><b>Example</b>: [To change from one old stogroup to new stogroup named ‘sg2’ for tablespace ‘ts1’]</p>
<pre class="prettyprint notranslate">
db2 alter tablespace ts1 using stogroup sg2   
</pre>
<p><b>Step 2:</b></p>
<p><b>Syntax</b>: [To drop the existing stogroup]</p>
<pre class="prettyprint notranslate">
db2 drop stogorup &lt;stogroup_name&gt;   
</pre>
<p><b>Example</b>: [To drop stogroup ‘stg1’ from database]</p>
<pre class="prettyprint notranslate">
db2 drop stogroup stg1  
</pre>
<h1>DB2 Schemas</h1>
<p>This chapter introduces and describes the concept of Schema.</p>
<h2>Introduction</h2>
<p>A schema is a collection of named objects classified logically in the database.</p>
<p>In a database, you cannot create multiple database objects with same name. To do so, the schema provides a group environment. You can create multiple schemas in a database and you can create multiple database objects with same name, with different schema groups.</p>
<img src="/db2/images/schemas.png" alt="schemas" />
<p>A schema can contain tables, functions, indices, tablespaces, procedures, triggers etc. For example, you create two different schemas named as “Professional” and “Personal” for an “employee” database.  It is possible to make two different tables with the same name “Employee”. In this environment, one table has professional information and the other has personal information of employee. In spite of having two tables with the same name, they have two different schemas “Personal” and “Professional”. Hence, the user can work with both without encountering any problem. This feature is useful when there are constraints on the naming of tables.</p>
<p>Let us see few commands related to Schema:</p>
<h2>Getting currently active schema</h2>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 get schema  
</pre>
<p><b>Example</b>: [To get current database schema]</p>
<pre class="prettyprint notranslate">
db2 get schema   
</pre>
<h2>Setting another schema to current environment</h2>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 set schema=&lt;schema_name&gt;  
</pre>
<p><b>Example</b>: [To arrange ‘schema1’ to current instance environment]</p>
<pre class="prettyprint notranslate">
db2 set schema=schema1 
</pre>
<h2>Creating a new Schema</h2>
<p><b>Syntax</b>: [To create a new schema with authorized user id]</p>
<pre class="prettyprint notranslate">
db2 create schema &lt;schema_name&gt; authroization &lt;inst_user&gt; 
</pre>
<p><b>Example</b>: [To create “schema1” schema authorized with ‘db2inst2”]</p>
<pre class="prettyprint notranslate">
db2 create schema schema1 authorization db2inst2 
</pre>
<h2>Exercise</h2>
<p>Let us create two different tables with same name but two different schemas. Here, you create employee table with two different schemas, one for personal and the other for professional information.</p>
<p><b>Step 1</b>: Create two schemas.</p>
<p><b>Schema 1</b>: [To create schema named professional]</p>
<pre class="prettyprint notranslate">
db2 create schema professional authorization db2inst2 
</pre>
<p><b>Schema 2</b>: [To create schema named personal]</p>
<pre class="prettyprint notranslate">
db2 create schema personal authorization db2inst2
</pre>
<p><b>Step 2</b>: Create two tables with the same name for Employee details</p>
<p><b>Table1</b>: professional.employee</p>
<p>[To create a new table ‘employee’ in the database using schema name ‘professional’]</p>
<pre class="prettyprint notranslate">
db2 create table professional.employee(id number, name 
varchar(20), profession varchar(20), join_date date, 
salary number); 
</pre>
<p><b>Table2</b>: personal.employee</p>
<p>[To create a new table ‘employee’ in the same database, with schema name ‘personal’]</p>
<pre class="prettyprint notranslate">
db2 create table personal.employee(id number, name 
varchar(20), d_birth date, phone bigint, address 
varchar(200));  
</pre>
<p>After executing these steps, you get two tables with same name ’employee’, with two different schemas.</p>
<h1>DB2 Data Types</h1>
<p>This chapter introduces various data types used in DB2.</p>
<h2>Introduction</h2>
<p>In DB2 Database tables, each column has its own data type depending on developer’s requirements. The data type is said to be type and range of the values in columns of a table.</p>
<h2>Built-in data types</h2>
<ul class="list">
<li></b>Datetime</b>
<ul class="list">
<li><b>TIME</b>: It represents the time of the day in hours, minutes and seconds.</li>
<li><b>TIMESTAMP</b>: It represents seven values of the date and time in the form of year, month, day, hours, minutes, seconds and microseconds.</li>
<li><b>DATE</b>: It represents date of the day in three parts in the form of year, month and day.</li>
</ul>
</li>
<li><b>String</b>
<ul class="list">
<li>Character</li>
</ul>
</li>
<li><b>CHAR (fixed length)</b>: Fixed length of Character strings.
<ul class="list">
<li>Varying length</li>
</ul>
</li>
<li><b>VARCHAR</b>: Varying length character strings.</li>
<li><b>CLOB</b>: large object strings, you use this when a character string might exceed the limits of the VARCHAR data type.
<ul class="list">
<li>Graphic</li>
</ul>
</li>
<li><b>GRAPHIC</b>
<ul class="list">
<li><b>Fixed length</b>: Fixed length graphic strings that contains double-byte characters</li>
<li>Varying length</li>
</ul>
</li>
<li><b>VARGRAPHIC</b>: Varying character graphic string that contains double bye characters.</li>
<li><b>DBCLOB</b>: large object type
<ul class="list">
<li>Binary</li>
</ul>
</li>
<li><b>BLOB</b> (varying length): binary string in large object</li>
<li><b>BOOLEAN</b>: In the form of 0 and 1.</li>
<li><b>Signed numeric</b>
<ul class="list">
<li>Exact</li>
</ul>
</li>
<li><b>Binary integer</b>
<ul class="list">
<li><b>SMALLINT [16BIT]</b>: Using this you can insert small int values into columns</li>
<li><b>INTEGER [32BIT]</b>: Using this you can insert large int values into columns</li>
<li><b>BIGINT [64BIT]</b>: Using this you can insert larger int values into columns </li>
</ul>
</li>
<li><b>Decimal</b>
<ul class="list">
<li>DECIMAL (packed)</li>
<li><b>DECFLOAT</b> (decimal floating point): Using this, you can insert decimal floating point numbers</li>
<li>Approximate</li>
</ul>
</li>
<li><b>Floating points</b>
<ul class="list">
<li><b>REAL</b> (single precision): Using this data type, you can insert single precision floating point numbers.</li>
<li><b>DOUBLE</b> (double precision): Using this data type, you can insert double precision floating point numbers.</li>
</ul>
</li>
<li><b>eXtensible Mark-up Language</b>
<ul class="list">
<li><b>XML</b>: You can store XML data into this data type column.</li>
</ul>
</li>
</ul>
<h1>DB2 Tables</h1>
<p>Tables are logical structure maintained by Database manager. In a table each vertical block called as column (Tuple) and each horizontal block called as row (Entity). The collection of data stored in the form of columns and rows is known as a table. In tables, each column has different data type. Tables are used to store persistent data.</p>
<h2>Type of tables</h2>
<ul class="list">
<li><b>Base Tables</b>: They hold persistent data. There are different kinds of base tables, including:
<ul class="list">
<li><b>Regular Tables</b>: General purpose tables, Common tables with indexes are general purpose tables.</li>
<li><b>Multidimensional Clustering Table (MDC)</b>: This type of table physically clustered on more than one key, and it used to maintain large database environments. These type of tables are not supported in DB2 pureScale.</li>
<li><b>Insert time clustering Table (ITC)</b>: Similar to MDC tables, rows are clustered by the time they are inserted into the tables. They can be partitioned tables. They too, do not support pureScale environment.</li>
<li><b>Range-Clustered tables Table (RCT)</b>: These type of tables provide fast and direct access of data. These are implemented as sequential clusters. Each record in the table has a record ID. These type of tables are used where the data is clustered tightly with one or more columns in the table. This type of tables also do not support in DB2 pureScale.</li>
<li><b>Partitioned Tables</b>: These type of tables are used in data organization schema, in which table data is divided into multiple storage objects.  Data partitions can be added to, attached to and detached from a partitioned table. You can store multiple data partition from a table in one tablespace.</li>
<li><b>Temporal Tables</b>: History of a table in a database is stored in temporal tables such as details of the modifications done previously.</li>
</ul>
</li>
<li><b>Temporary Tables</b>: For temporary work of different database operations, you need to use temporary tables. The temporary tables (DGTTs) do not appear in system catalog, XML columns cannot be used in created temporary tables.</li>
<li><b>Materialized Query Tables</b>: MQT can be used to improve the performance of queries.  These types of tables are defined by a query, which is used to determine the data in the tables.</li>
</ul>
<h2>Creating Tables</h2>
<p>The following syntax creates table:</p>
<p><b>Syntax</b>: [To create a new table]</p>
<pre class="prettyprint notranslate">
db2 create table &lt;schema_name&gt;.&lt;table_name&gt;
(column_name column_type....) in &lt;tablespace_name&gt;   
</pre>
<p><b>Example</b>: We create a table to store “employee” details in the schema of “professional”. This table has “id, name, jobrole, joindate, salary” fields and this table data would be stored in tablespace “ts1”.</p>
<pre class="prettyprint notranslate">
db2 create table professional.employee(id int, name 
varchar(50),jobrole varchar(30),joindate date, 
salary double) in ts1    
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB20000I The SQL command completed successfully.    
</pre>
<h2>Listing table details</h2>
<p>The following syntax is used to list table details:</p>
<p><b>Syntax</b>: [To see the list of tables created with schemas]</p>
<pre class="prettyprint notranslate">
db2 select tabname, tabschema, tbspace from syscat.tables    
</pre>
<p><b>Example</b>: [To see the list of tables in the current database]</p>
<pre class="prettyprint notranslate">
db2 select tabname, tabschema, tbspace from syscat.tables     
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
TABNAME      TABSCHEMA     TBSPACE 
------------ ------------- -------- 
EMPLOYEE     PROFESSIONAL    TS1  


 1 record(s) selected.     
</pre>
<h2>Listing columns in a table</h2>
<p>The following syntax lists columns in a table:</p>
<p><b>Syntax</b>: [To see columns and data types of a table]</p>
<pre class="prettyprint notranslate">
db2 describe table &lt;table_name&gt;    
</pre>
<p><b>Example</b>: [To see the columns and data types of table ‘employee’]</p>
<pre class="prettyprint notranslate">
db2 describe table professional.employee     
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
             Data type                   Column 
Column name  schema    Data type name    Length    Scale Nulls 
------ ----- --------- ----------------- --------- ----- ------ 
ID           SYSIBM    INTEGER             4         0     Yes 
NAME         SYSIBM    VARCHAR             50        0     Yes 
JOBROLE      SYSIBM    VARCHAR             30        0     Yes 
JOINDATE     SYSIBM    DATE                4         0     Yes 
SALARY       SYSIBM    DOUBLE              8         0     Yes  

  5 record(s) selected.   
</pre>
<h3>Hidden Columns</h3>
<p>You can hide an entire column of a table.  If you call “select * from” query, the hidden columns are not returned in the resulting table. When you insert data into a table, an “INSERT” statement without a column list does not expect values for any implicitly hidden columns. These type of columns are highly referenced in materialized query tables. These type of columns do not support to create temporary tables.</p>
<h2>Creating table with hidden column</h2>
<p>The following syntax creates table with hidden columns:</p>
<p><b>Syntax</b>: [To create a table with hidden columns]</p>
<pre class="prettyprint notranslate">
db2 create table &lt;tab_name&gt; (col1 datatype,col2 datatype 
implicitly hidden)    
</pre>
<p><b>Example</b>: [To create a ‘customer’ table with hidden columns ‘phone’]</p>
<pre class="prettyprint notranslate">
db2 create table professional.customer(custid integer not 
null, fullname varchar(100), phone char(10) 
implicitly hidden)     
</pre>
<h2>Inserting data values in table</h2>
<p>The following syntax inserts values in the table:</p>
<p><b>Syntax</b>: [To insert values into a table]</p>
<pre class="prettyprint notranslate">
db2 insert into &lt;tab_name&gt;(col1,col2,...)
 values(val1,val2,..)    
</pre>
<p><b>Example</b>: [To insert values in ‘customer’ table]</p>
<pre class="prettyprint notranslate">
db2 insert into professional.customer(custid, fullname, phone) 
values(100,'ravi','9898989')


db2 insert into professional.customer(custid, fullname, phone) 
values(101,'krathi','87996659')


db2 insert into professional.customer(custid, fullname, phone) 
values(102,'gopal','768678687')
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB20000I  The SQL command completed successfully.
</pre>
<h2>Retrieving values from table</h2>
<p>The following syntax retrieves values from the table:</p>
<p><b>Syntax</b>: [To retrieve values form a table]</p>
<pre class="prettyprint notranslate">
db2 select * from &lttab_name&gt;    
</pre>
<p><b>Example</b>: [To retrieve values from ‘customer’ table]</p>
<pre class="prettyprint notranslate">
db2 select * from professional.customer 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
CUSTID      FULLNAME 
----------- ------------------------ 
        100 ravi
		
        101 krathi
		
        102 gopal  
		
  3 record(s) selected. 
</pre>
<h2>Retrieving values from a table including hidden columns</h2>
<p>The following syntax retrieves values from selected columns:</p>
<p><b>Syntax</b>: [To retrieve selected hidden columns values from a table]</p>
<pre class="prettyprint notranslate">
db2 select col1,col2,col3 from &lt;tab_name&gt;    
</pre>
<p><b>Example</b>: [To retrieve selected columns values result from a table]</p>
<pre class="prettyprint notranslate">
db2 select custid,fullname,phone from professional.customer  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
CUSTID  FULLNAME    PHONE 
------- ---------   ------------ 
100     ravi        9898989
 
101     krathi      87996659 

102     gopal       768678687 

  3 record(s) selected. 
</pre>
<p>If you want to see the data in the hidden columns, you need to execute “DESCRIBE” command.</p>
<p><b>Syntax</b>:</p>
<pre class="prettyprint notranslate">
db2 describe table &lt;table_name&gt; show detail     
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 describe table professional.customer show detail     
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
Column name     Data type schema     Data type name  Column
           column    Partitionkey  code 
                                       Length   Scale    Nulls     
number     sequence      page     Hidden      Default 
--------------- -------------------- --------------- -------- ----
---- -------- ---------- ------------- -------- ----------- ------ 
---  
CUSTID          SYSIBM               INTEGER         4        0 
No       0          0         0        No 
FULLNAME        SYSIBM               VARCHAR         100      0
Yes      1          0        1208     No     

PHONE           SYSIBM               CHARACTER       10       0     
Yes      2          0             1208     Implicitly  
  
3 record(s) selected.  
</pre>
<h2>Altering the type of table columns</h2>
<p>You can modify our table structure using this “alter” command as follows:</p>
<p><b>Syntax</b>:</p>
<pre class="prettyprint notranslate">
db2 alter table &lt;tab_name&gt; alter column &lt;col_name&gt; set data type &lt;data_type&gt;     
</pre>
<p><b>Example:</b> [To modify the data type for column “id” from “int” to “bigint” for employee table]</p>
<pre class="prettyprint notranslate">
db2 alter table professional.employee alter column id set data type bigint      
</pre>
<p><b>Output:</b>:</p>
<pre class="prettyprint notranslate">
DB20000I The SQL command completed successfully.    
</pre>
<h2>Altering column name</h2>
<p>You can change column name as shown below:</p>
<p><b>Syntax</b>: [To modify the column name from old name to new name of a table]</p>
<pre class="prettyprint notranslate">
db2 alter table &lt;tab_name&gt; rename column &lt;old_name&gt; to &lt;new_name&gt;     
</pre>
<p><b>Example:</b> [To modify the column name from “fullname” to “custname” in “customers” table.]</p>
<pre class="prettyprint notranslate">
db2 alter table professional.customer rename column fullname to custname       
</pre>
<h2>Dropping the tables</h2>
<p>To delete any table, you need to use the “DROP” command as follows:</p>
<p><b>Syntax</b>:</p>
<pre class="prettyprint notranslate">
db2 drop table &lt;tab_name&gt;     
</pre>
<p><b>Example:</b> [To drop customer table form database]</p>
<pre class="prettyprint notranslate">
db2 drop table professional.customers       
</pre>
<p>To delete the entire hierarchy of the table (including triggers and relation), you need to use “DROP TABLE HIERARCHY” command.</p>
<p><b>Syntax</b>:</p>
<pre class="prettyprint notranslate">
db2 drop table hierarchy &lt;tab_name&gt;
</pre>
<p><b>Example:</b> [To drop entire hierarchy of a table ‘customer’]</p>
<pre class="prettyprint notranslate">
db2 drop table hierarchy professional.customers       
</pre>
<h1>DB2 Alias</h1>
<p>This chapter describes the creation of alias and retrieving data using alias of database objects.</p>
<h2>Introduction</h2>
<p>Alias is an alternative name for database objects. It can be used to reference the database object. You can say, it is a nick name for database objects. Alias are defined for the objects to make their name short, thereby reducing the query size and increasing readability of the query.</p>
<h2>Creating database object aliases</h2>
<p>You can create database object alias as shown below:</p>
<p><b>Syntax</b>:</p>
<pre class="prettyprint notranslate">
db2 create alias &lt;alias_name&gt; for &lt;table_name&gt;    
</pre>
<p><b>Example</b>: Creating alias name for table “professional.customer” table</p>
<pre class="prettyprint notranslate">
db2 create alias pro_cust for professional.customer    
</pre>
<p>If you pass “SELECT * FROM PRO_CUST” or “SELECT * FROM PROFESSIONAL.CUSTOMER” the database server will show the same result.</p>
<p><b>Syntax</b>: [To retrieve values from a table directly with schema name]</p>
<pre class="prettyprint notranslate">
db2 select * from &lt;schema_name&gt;.&lt;table_name&gt;    
</pre>
<p><b>Example</b>: [To retrieve values from table customer]</p>
<pre class="prettyprint notranslate">
db2 select * from professional.customer    
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
CUSTID  FULLNAME    PHONE
------- ---------   ------------ 
100     ravi        9898989 
101     krathi      87996659 
102     gopal       768678687 
  
  3 record(s) selected.    
</pre>
<h2>Retrieving values using alias name of the table</h2>
<p>You can retrieve values from database using alias name as shown below:</p>
<p><b>Syntax</b>: [To retrieve values from table by calling alias name of the table]</p>
<pre class="prettyprint notranslate">
db2 select * from &lt;alias_name&gt;    
</pre>
<p><b>Example</b>: [To retrieve values from table customer using alias name]</p>
<pre class="prettyprint notranslate">
db2 select * from pro_cust
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
CUSTID  FULLNAME    PHONE
------- ---------   ------------ 
100     ravi        9898989 
101     krathi      87996659 
102     gopal       768678687 
  
  3 record(s) selected.    
</pre>
<h1>DB2 Constraints</h1>
<p>This chapter describes various constraints in the database.</p>
<h2>Introduction</h2>
<p>To enforce database integrity, a set of rules is defined, called constraints. The constraints either permit or prohibit the values in the columns.</p>
<p>In a Real time database activities, the data should be added with certain restrictions. For example, in a sales database, sales-id or transaction-id should be unique. The constraints types are:</p>
<ul class="list">
<li>NOT NULL</li>
<li>Unique</li>
<li>Primary key</li>
<li>Foreign Key</li>
<li>Check</li>
<li>Informational</li>
</ul>
<p>Constraints are only associated with tables. They are applied to only particular tables.  They are defined and applied to the table at the time of table creation.</p>
<h2>Explanation of each constraint:</h2>
<h3>NOT NULL</h3>
<p>It is a rule to prohibit null values from one or more columns within the table.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create table &lt;table_name&gt;(col_name col_type not null,..)  
</pre>
<p><b>Example</b>: [To create a sales table, with four columns (id, itemname, qty, price) in this adding “not null” constraints to all columns to avoid forming any null cell in the table.]</p>
<pre class="prettyprint notranslate">
db2 create table shopper.sales(id bigint not null, itemname 
varchar(40) not null, qty int not null,price double not null)   
</pre>
<h3>Inserting NOT NULL values into table</h3>
<p>You can insert values in the table as shown below:</p>
<p><b>Example:</b> [ERRORoneous Query]</p>
<pre class="prettyprint notranslate">
db2 insert into shopper.sales(id,itemname,qty) 
values(1,'raagi',12) 
</pre>
<p><b>Output:</b> [Correct query]</p>
<pre class="prettyprint notranslate">
DB21034E  The command was processed as an SQL statement because 
it was not a 

valid Command Line Processor command.  During SQL processing 
it returned: 

SQL0407N  Assignment of a NULL value to a NOT NULL column 
"TBSPACEID=5, 

TABLEID=4, COLNO=3" is not allowed.  SQLSTATE=23502 
 
</pre>
<p><b>Example:</b> [Correct query]</p>
<pre class="prettyprint notranslate">
db2 insert into shopper.sales(id,itemname,qty,price) 
values(1,'raagi',12, 120.00)  

db2 insert into shopper.sales(id,itemname,qty,price) 
values(1,'raagi',12, 120.00) 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB20000I The SQL command completed successfully.
</pre>
<h3>Unique constraints</h3>
<p>Using these constraints, you can set values of columns uniquely. For this, the unique constraints are declared with “not null” constraint at the time of creating table.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create table &lt;tab_name&gt;(&lt;col&gt; &lt;col_type&gt; not null unique, ...) 
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 create table shopper.sales1(id bigint not null unique, 
itemname varchar(40) not null, qty int not null,price 
double not null)  
</pre>
<h3>Inserting the values into table</h3>
<p><b>Example:</b> To insert four different rows with unique ids as 1, 2, 3 and 4.</p>
<pre class="prettyprint notranslate">
db2 insert into shopper.sales1(id, itemname, qty, price) 
values(1, 'sweet', 100, 89)  

db2 insert into shopper.sales1(id, itemname, qty, price) 
values(2, 'choco', 50, 60)  

db2 insert into shopper.sales1(id, itemname, qty, price) 
values(3, 'butter', 30, 40)  

db2 insert into shopper.sales1(id, itemname, qty, price) 
values(4, 'milk', 1000, 12)  
</pre>
<p><b>Example:</b> To insert a new row with “id” value 3</p>
<pre class="prettyprint notranslate">
db2 insert into shopper.sales1(id, itemname, qty, price) 
values(3, 'cheese', 60, 80)   
</pre>
<p><b>Output</b>: when you try to insert a new row with existed id value it will show this result:</p>
<pre class="prettyprint notranslate">
DB21034E  The command was processed as an SQL statement 
because it was not a 

valid Command Line Processor command.  During 
SQL processing it returned: 

SQL0803N  One or more values in the INSERT statement, 
UPDATE statement, or foreign key update caused by a
DELETE statement are not valid because the primary key, 
unique constraint or unique index identified by "1" constrains 
table "SHOPPER.SALES1" from having duplicate values for the 
index key. SQLSTATE=23505    
</pre>
<h3>Primary key</h3>
<p>Similar to the unique constraints, you can use a “primary key” and a “foreign key” constraint to declare relationships between multiple tables.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create table &lt;tab_name&gt;(<col> <col_type>,.., primary
key (<col>)) 
</pre>
<p><b>Example</b>: To create ‘salesboys’ table with “sid” as a primary key</p>
<pre class="prettyprint notranslate">
db2 create table shopper.salesboys(sid int not null, name 
varchar(40) not null, salary double not null, constraint 
pk_boy_id primary key (sid))
</pre>
<h3>Foreign key</h3>
<p>A foreign key is a set of columns in a table which are required to match at least one primary key of a row in another table. It is a referential constraint or referential integrity constraint. It is a logical rule about values in multiple columns in one or more tables. It enables required relationship between the tables.</p>
<p>Earlier, you created a table named “shopper.salesboys” . For this table, the primary key is “sid”. Now you are creating a new table that has sales boy’s personal details with different schema named “employee” and table named “salesboys”. In this case, “sid” is the foreign key.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create table &lt;tab_name&gt;(&lt;col&gt; &lt;col_type&gt;,constraint 
&lt;const_name&gt; foreign key (&lt;col_name&gt;)  
                  reference &lt;ref_table&gt; (&lt;ref_col&gt;)  
</pre>
<p><b>Example</b>: [To create a table named ‘salesboys’ with foreign key column ‘sid’]</p>
<pre class="prettyprint notranslate">
db2 create table employee.salesboys( 
            sid int,  
            name varchar(30) not null,  
            phone int not null,  
            constraint fk_boy_id  
            foreign key (sid)  
            references shopper.salesboys (sid) 
			 on delete restrict 
                       ) 
</pre>
<p><b>Example</b>: [Inserting values into primary key table “shopper.salesboys”]</p>
<pre class="prettyprint notranslate">
db2 insert into shopper.salesboys values(100,'raju',20000.00), 
(101,'kiran',15000.00), 
(102,'radha',10000.00), 
(103,'wali',20000.00), 
(104,'rayan',15000.00)
</pre>
<p><b>Example</b>: [Inserting values into foreign key table “employee.salesboys”  [without error]]</p>
<pre class="prettyprint notranslate">
db2 insert into employee.salesboys values(100,'raju',98998976), 
(101,'kiran',98911176), 
(102,'radha',943245176), 
(103,'wali',89857330),  
(104,'rayan',89851130) 
</pre>
<p>If you entered an unknown number, which is not stored in “shopper.salesboys” table, it will show you SQL error.</p>
<p><b>Example</b>: [error execution]</p>
<pre class="prettyprint notranslate">
db2 insert into employee.salesboys values(105,'rayan',89851130) 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB21034E  The command was processed as an SQL statement because it 
was not a valid Command Line Processor command.  During SQL 
processing it returned: SQL0530N  The insert or update value of 
the FOREIGN KEY "EMPLOYEE.SALESBOYS.FK_BOY_ID" is not equal to any 
value of the parent key of the parent table.  SQLSTATE=23503  
</pre>
<h3>Checking constraint</h3>
<p>You need to use this constraint to add conditional restrictions for a specific column in a table.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create table <tab_name>                                                     
 (<col_name> <col_type> 
  primary key (<col_name>),                                                       
  constraint <cons_name> check (condition or condition)  
 )
 </pre>
<p><b>Example</b>: [To create emp1 table with constraints values]</p>
<pre class="prettyprint notranslate">
db2 create table empl                                                     
 (id           smallint not null,                                         
  name         varchar(9),                                                
  dept         smallint check (dept between 10 and 100), 
  job          char(5)  check (job in ('sales', 'mgr', 'clerk')), 
  hiredate     date,                                                      
  salary       decimal(7,2),                                              
  comm         decimal(7,2),                                              
  primary key (id),                                                       
  constraint yearsal check (year(hiredate) > 1986 or salary > 40500)  
 )
 </pre>
<h3>Inserting values</h3>
<p>You can insert values into a table as shown below:</p>
<pre class="prettyprint notranslate">
db2 insert into empl values (1,'lee', 15, 'mgr', '1985-01-01' , 
40000.00, 1000.00) 
</pre>
<h2>Dropping the constraint</h2>
<p>Let us see the syntaxes for dropping various constraints.</p>
<h3>Dropping UNIQUE constraint</h3>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 alter table &lt;tab_name&gt; drop unique &lt;const_name&gt;
</pre>
<h3>Dropping primary key</h3>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 alter table &lt;tab_name&gt; drop primary key 
</pre>
<h3>Dropping check constraint</h3>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 alter table &lt;tab_name&gt; drop check &lt;check_const_name&gt;  
</pre>
<h3>Dropping foreign key</h3>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 alter table &lt;tab_name&gt; drop foreigh key &lt;foreign_key_name&gt;  
</pre>
<h1>DB2 Indexes</h1>
<p>This chapter covers introduction to indexes, their types, creation and dropping.</p>
<h2>Introduction</h2>
<p>Index is a set of pointers, which can refer to rows in a table, blocks in MDC or ITC tables, XML data in an XML storage object that are logically ordered by the values of one or more keys. It is created on DB2 table columns to speed up the data access for the queries, and to cluster and partition the data efficiently. It can also improve the performance of operation on the view.  A table with a unique index can have rows with unique keys. Depending on the table requirements, you can take different types of indexes.</p>
<h2>Types of indexes</h2>
<ul class="list">
<li>Unique and Non-Unique indexes</li>
<li>Clustered and non-clustered indexes</li>
</ul>
<h2>Creating indexes</h2>
<p>For creating unique indexes, you use following syntax:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create unique index &lt;index_name&gt; on 
&lttable_name&gt;(&lt;unique_column&gt;) include (&lt;column_names..&gt;) 
</pre>
<p><b>Example</b>: To create index for “shopper.sales1” table.</p>
<pre class="prettyprint notranslate">
db2 create unique index sales1_indx on 
shopper.sales1(id) include (itemname) 
</pre>
<h2>Dropping indexes</h2>
<p>For dropping the index, you use the following syntax:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create unique index &lt;index_name&gt; on 
&lttable_name&gt;(&lt;unique_column&gt;) include (&lt;column_names..&gt;) 
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 drop index sales_index 
</pre>
<h1>DB2 Triggers</h1>
<p>This chapter describes triggers, their types, creation and dropping of the triggers.</p>
<h2>Introduction</h2>
<p>A trigger is a set of actions, which are performed for responding to an INSERT, UPDATE or DELETE operation on a specified table in the database. Triggers are stored in the database at once. They handle governance of data. They can be accessed and shared among multiple applications. The advantage of using triggers is, if any change needs to be done in the application, it is done at the trigger; instead of changing each application that is accessing the trigger. Triggers are easy to maintain and they enforce faster application development. Triggers are defined using an SQL statement “CREATE TRIGGER”.</p>
<h2>Types of triggers</h2>
<p>There are two types of triggers:</p>
<h3>1. BEFORE triggers</h3>
<p>They are executed before any SQL operation.</p>
<h3>2. AFTER triggers</h3>
<p>They are executed after any SQL operation.</p>
<h2>Creating a BEFORE trigger</h2>
<p>Let us see how to create a sequence of trigger:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create sequence &lt;seq_name&gt; 
</pre>
<p><b>Example</b>: Creating a sequence of triggers for table shopper.sales1</p>
<pre class="prettyprint notranslate">
db2 create sequence sales1_seq as int start with 1 increment by 1 
</pre>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create trigger &lt;trigger_name&gt; no cascade before insert on 
&lt;table_name&gt; referencing new as &lt;table_object&gt; for each row set 
&lt;table_object&gt;.&lt;col_name&gt;=nextval for &lt;sequence_name&gt; 
</pre>
<p><b>Example</b>: Creating trigger for shopper.sales1 table to insert primary key numbers automatically</p>
<pre class="prettyprint notranslate">
db2 create trigger sales1_trigger no cascade before insert on 
shopper.sales1 referencing new as obj for each row set 
obj.id=nextval for sales1_seq
</pre>
<p>Now try inserting any values:</p>
<pre class="prettyprint notranslate">
db2 insert into shopper.sales1(itemname, qty, price) 
values('bicks', 100, 24.00) 
</pre>
<h2>Retrieving values from table</h2>
<p>Let us see how to retrieve values from a table:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 select * from &lt;tablename&gt;
</pre>
<p><b>Example</b>:</p>
<pre class="prettyprint notranslate">
db2 select * from shopper.sales1
</pre>
<p><b>Output</b>:</p>
<pre class="prettyprint notranslate">
  ID       ITEMNAME       QTY 
-------  ------------   ---------- 
    3      bicks            100 
    2      bread            100 
  
  2 record(s) selected. 
</pre>
<h2>Creating an AFTER trigger</h2>
<p>Let us see how to create an after trigger:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create trigger &lt;trigger_name&gt; no cascade before insert on 
&lt;table_name&gt; referencing new as &lt;table_object&gt; for each row set
 &lt;table_object&gt;.&lt;col_name&gt;=nextval for &lt;sequence_name&gt; 
</pre>
<p><b>Example:</b> [To insert and retrieve the values]</p>
<pre class="prettyprint notranslate">
db2 create trigger sales1_tri_after after insert on shopper.sales1 
for each row mode db2sql begin atomic update shopper.sales1 
set price=qty*price; end  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
//inseting values in shopper.sales1 
db2 insert into shopper.sales1(itemname,qty,price) 
values('chiken',100,124.00) 
//output 
ID    ITEMNAME       QTY         PRICE 
----- -------------- ----------- -----------                      
    3 bicks          100         2400.00 
    4 chiken         100         12400.00 
    2 bread          100         2400.00 

	3 record(s) selected. 
</pre>
<h2>Dropping a trigger</h2>
<p>Here is how a database trigger is dropped:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 drop trigger &lt;trigger_name&gt;  
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 drop trigger slaes1_trigger   
</pre>
<h1>DB2 - Sequences</h1>
<p>This chapter introduces you to the concept of sequence, creation of sequence, viewing the sequence, and dropping them.</p>
<h2>Introduction</h2>
<p>A sequence is a software function that generates integer numbers in either ascending or descending order, within a definite range, to generate primary key and coordinate other keys among the table. You use sequence for availing integer numbers say, for employee_id or transaction_id. A sequence can support SMALLINT, BIGINT, INTEGER, and DECIMAL data types. A sequence can be shared among multiple applications. A sequence is incremented or decremented irrespective of transactions.</p>
<p>A sequence is created by CREATE SEQUENCE statement.</p>
<h2>Types of Sequences</h2>
<p>There are two type of sequences available:</p>
<ul class="list">
<li><p><b>NEXTVAL</b>: It returns an incremented value for a sequence number.</p></li>
<li><p><b>PREVIOUS VALUE</b>: It returns recently generated value.</p></li>
</ul>
<h2>Parameters of sequences</h2>
<p>The following parameters are used for sequences:</p>
<p><b>Data type</b>: This is the data type of the returned incremented value. (SMALLINT, BIGINT, INTEGER, NUMBER, DOUBLE)</p>
<p><b>START WITH</b>: The reference value, with which the sequence starts.</p> 
<p><b>MINVALUE</b>: A minimum value for a sequence to start with.</p> 
<p><b>MAXVALUE</b>: A maximum value for a sequence.</p> 
<p><b>INCREMENT BY</b>: step value by which a sequence is incremented.</p>
<p><b>Sequence cycling</b>: the CYCLE clause causes generation of the sequence repeatedly. The sequence generation is conducted by referring the returned value, which is stored into the database by previous sequence generation.</p>
<h2>Creating a sequence</h2>
<p>You can create sequence using the following syntax:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create sequence &lt;seq_name&gt; 
</pre>
<p><b>Example</b>: [To create a new sequence with the name ‘sales1_seq’ and increasing values from 1]</p>
<pre class="prettyprint notranslate">
db2 create sequence sales1_seq as int start 
with 1 increment by 1  
</pre>
<h2>Viewing the sequences</h2>
<p>You can view a sequence using the syntax given below:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 value &lt;previous/next&gt; value for &lt;seq_name&gt;
</pre>
<p><b>Example</b>: [To see list of previous updated value in sequence ‘sales1_seq’]</p>
<pre class="prettyprint notranslate">
db2 values previous value for sales1_seq  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
 1 
----------- 
  4 
  1 record(s) selected. 
</pre>
<h2>Dropping the sequence</h2>
<p>To remove the sequence, you need to use the “DROP SEQUENCE <SEQUENCE_NAME>” command. Here is how you do it:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 drop sequence &lt;seq_name>&gt;
</pre>
<p><b>Example</b>: [To drop sequence ‘sales1_seq’ from database]</p>
<pre class="prettyprint notranslate">
db2 drop sequence sales1_seq  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
 DB20000I The SQL command completed successfully. 
</pre>
<h1>DB2 Views</h1>
<p>This chapter describes introduction of views, creating, modifying and dropping the views.</p>
<h2>Introduction</h2>
<p>A view is an alternative way of representing the data stored in the tables. It is not an actual table and it does not have any permanent storage. View provides a way of looking at the data in one or more tables. It is a named specification of a result table.</p>
<h2>Creating a view</h2>
<p>You can create a view using the following syntax:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create view &lt;view_name&gt; (&lt;col_name&gt;,
&lt;col_name1...) as select &lt;cols&gt;.. 
from &lt;table_name&gt; 
</pre>
<p><b>Example</b>: Creating view for shopper.sales1 table</p>
<pre class="prettyprint notranslate">
db2 create view view_sales1(id, itemname, qty, price) 
as select id, itemname, qty, price from 
shopper.sales1  
</pre>
<h2>Modifying a view</h2>
<p>You can modify a view using the following syntax:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 alter view &lt;view_name&gt; alter &lt;col_name&gt; 
add scope &lt;table_or_view_name&gt; 
</pre>
<p><b>Example</b>: [To add new table column to existing view ‘view_sales1’]</p>
<pre class="prettyprint notranslate">
db2 alter view view_sales1 alter id add 
scope shopper.sales1  
</pre>
<h2>Dropping the view</h2>
<p>You can drop a view using the following syntax:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 drop view &lt;view_name&gt; 
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 drop view sales1_view  
</pre>
<h1>DB2 with XML</h1>
<p>This chapter describes use of XML with DB2.</p>
<h2>Introduction</h2>
<p>PureXML feature allows you to store well-formed XML documents in columns of database tables. Those columns have XML database. Data is kept in its native hierarchical form by storing XML data in XML column. The stored XML data can be accessed and managed by DB2 database server functionality.  The storage of XML data in its native hierarchical form enables efficient search, retrieval, and update of XML. To update a value in XML data, you need to use XQuery, SQL or combination of both.</p>
<h2>Creating a database and table for storing XML data</h2>
<p>Create a database by issuing the following syntax:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 create database xmldb 
</pre>
<p>By default, databases use UTF-8 (UNICODE) code set. Activate the database and connect to it:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 activate db &lt;db_name&gt;
db2 connect to &lt;db_name&gt; 
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 activate db xmldb 
db2 connect to xmldb  
</pre>
<p>Create a well-formed XML file and create a table with data type of the column as ‘XML’. It is mandatory to pass the SQL query containing XML syntax within double quotation marks.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 “create table &lt;schema&gt;.&lt;table&gt;(col &lt;datatype&gt;, 
col &lt;xml datatype&gt;)” 
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 "create table shope.books(id bigint not null 
primary key, book XML)"   
</pre>
<p>Insert xml values into table, well-formed XML documents are inserted into XML type column using SQL statement ‘INSERT’.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 “insert into &lt;table_name&gt; values(value1, value2)” 
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 "insert into shope.books values(1000, '&lt;catalog&gt;  
&lt;book&gt; 

&lt;author&gt; Gambardella Matthew&lt;/author&gt; 
&lt;title&gt;XML Developers Guide&lt;/title&gt; 
&lt;genre&gt;Computer&lt;/genre&gt; 
&lt;price&gt;44.95&lt;/price&gt; 
&lt;publish_date&gt;2000-10-01&lt;/publish_date&gt; 
&lt;description&gt;An in-depth look at creating application 
with XML&lt;/description&gt; 
&lt;/book&gt; 

&lt;/catalog&gt;')"   
</pre>
<h2>Updating XML data in a table</h2>
<p>You can update XML data in a table by using the following syntax:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 “update &lt;table_name&gt; set &lt;column&gt;=&lt;value&gt; where 
&lt;column&gt;=&lt;value&gt;”  
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 "update shope.books set book='&lt;catalog&gt;  

&lt;book&gt; 
&lt;author&gt; Gambardella, Matthew&lt;/author&gt;  
&lt;title&gt;XML Developers Guide&lt;/title&gt;  
&lt;genre&gt;Computer&lt;/genre&gt;  
&lt;price&gt;44.95&lt;/price&gt;  
&lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;  
&lt;description&gt;An in-depth XML&lt;/description&gt;
  
&lt;/book&gt; 
 
&lt;/catalog&gt;' where id=1000"  
</pre>
<h1>DB2 - Backup and Recovery</h1>
<p>This chapter describes backup and restore methods of database.</p>
<img src="/db2/images/backup.png" alt="backup" />
<h2>Introduction</h2>
<p>Backup and recovery methods are designed to keep our information safe. In Command Line Interface (CLI) or Graphical User Interface (GUI) using backup and recovery utilities you can take backup or restore the data of databases in DB2 UDB.</p>
<h2>Logging</h2>
<p>Log files consist of error logs, which are used to recover from application errors.  The logs keep the record of changes in the database. There are two types of logging as described below:</p>
<h3>Circular logging</h3>
<p>It is a method where the old transaction logs are overwritten when there is a need to allocate a new transaction log file, thus erasing the sequences of log files and reusing them. You are permitted to take only full back-up in offline mode. i.e., the database must be offline to take the full backup.</p>
<h3>Archive logging</h3>
<p>This mode supports for Online Backup and database recovery using log files called roll forward recovery. The mode of backup can be changed from circular to archive by setting logretain or userexit to ON. For archive logging, backup setting database require a directory that is writable for DB2 process.</p>
<h2>Backup</h2>
<p>Using <b>Backup</b> command you can take copy of entire database. This backup copy includes database system files, data files, log files, control information and so on.</p>
<p>You can take backup while working offline as well as online.</p>
<h3>Offline backup</h3>
<p><b>Syntax:</b> [To list the active applications/databases]</p>
<pre class="prettyprint notranslate">
db2 list application  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
Auth Id  Application    Appl.      Application Id                                                
DB       # of   
         Name           Handle              
Name    Agents  
-------- -------------- ---------- ---------------------
----------------------------------------- -------- -----  
DB2INST1 db2bp          39         
*LOCAL.db2inst1.140722043938                                   
ONE      1  
</pre>
<p><b>Syntax:</b> [To force application using app. Handled id]</p>
<pre class="prettyprint notranslate">
db2 "force application (39)"   
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB20000I  The FORCE APPLICATION command completed 
successfully.  

DB21024I  This command is asynchronous and may not 
be effective immediately. 
</pre>
<p><b>Syntax:</b> [To terminate Database Connection]</p>
<pre class="prettyprint notranslate">
db2 terminate  
</pre>
<p><b>Syntax:</b> [To deactivate Database]</p>
<pre class="prettyprint notranslate">
db2 deactivate database one   
</pre>
<p><b>Syntax:</b> [To take the backup file]</p>
<pre class="prettyprint notranslate">
db2 backup database &lt;db_name&gt; to &lt;location&gt;   
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 backup database one to /home/db2inst1/ 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
Backup successful. The timestamp for this backup image is : 
20140722105345  
</pre>
<h3>Online backup</h3>
<p>To start, you need to change the mode from <b>Circular logging</b> to <b>Archive Logging</b>.</p>
<p><b>Syntax:</b> [To check if the database is using circular or archive logging]</p>
<pre class="prettyprint notranslate">
db2 get db cfg for one | grep LOGARCH   
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
First log archive method (LOGARCHMETH1) = OFF  
 Archive compression for logarchmeth1  (LOGARCHCOMPR1) = OFF 
 Options for logarchmeth1              (LOGARCHOPT1) =   
 Second log archive method             (LOGARCHMETH2) = OFF  
 Archive compression for logarchmeth2  (LOGARCHCOMPR2) = OFF  
 Options for logarchmeth2              (LOGARCHOPT2) =   
</pre>
<p>In the above output, the highlighted values are [logarchmeth1 and logarchmeth2] in off mode, which implies that the current database in “CIRCULLAR LOGGING” mode. If you need to work with ‘ARCHIVE LOGGING’ mode, you need to change or add path in the variables logarchmeth1 and logarchmeth2 present in the configuration file.</p>
<h2>Updating logarchmeth1 with required archive directory</h2>
<p><b>Syntax:</b> [To make directories]</p>
<pre class="prettyprint notranslate">
mkdir backup 
mkdir backup/ArchiveDest    
</pre>
<p><b>Syntax:</b> [To provide user permissions for folder]</p>
<pre class="prettyprint notranslate">
chown db2inst1:db2iadm1 backup/ArchiveDest 
</pre>
<p><b>Syntax:</b> [To update configuration LOGARCHMETH1]</p>
<pre class="prettyprint notranslate">
db2 update database configuration for one using LOGARCHMETH1 
'DISK:/home/db2inst1/backup/ArchiveDest'
</pre>
<p>You can take offline backup for safety, activate the database and connect to it.</p>
<p><b>Syntax:</b> [To take online backup]</p>
<pre class="prettyprint notranslate">
db2 backup database one online to 
/home/db2inst1/onlinebackup/ compress include logs   
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
db2 backup database one online to 
/home/db2inst1/onlinebackup/ compress include logs    
</pre>
<p>Verify Backup file using following command:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2ckbkp &lt;location/backup file&gt;   
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2ckbkp 
/home/db2inst1/ONE.0.db2inst1.DBPART000.20140722112743.001 
</pre>
<p>Listing the history of backup files</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 list history backup all for one    
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
                    List History File for one 
  
Number of matching file entries = 4 
 
Op Obj Timestamp+Sequence Type Dev Earliest Log Current Log  
Backup ID  
 -- --- ------------------ ---- --- ------------ ------------ 
 --------------
  B  D  20140722105345001   F    D  S0000000.LOG S0000000.LOG 

 ------------------------------------------------------------ 
 ----------------   
 
 Contains 4 tablespace(s): 
 00001 SYSCATSPACE  
 
 00002 USERSPACE1
 
 00003 SYSTOOLSPACE 
 
 00004 TS1 
  ------------------------------------------------------------ 
  ---------------- 
  Comment: DB2 BACKUP ONE OFFLINE  
  
 Start Time: 20140722105345  
 
   End Time: 20140722105347
   
     Status: A
 ------------------------------------------------------------ 
 ---------------- 
 EID: 3 Location: /home/db2inst1 

 
 Op Obj Timestamp+Sequence Type Dev Earliest Log Current Log  
 Backup ID
 -- --- ------------------ ---- --- ------------ ------------ 
 --------------  
  B  D  20140722112239000   N       S0000000.LOG S0000000.LOG   
 ------------------------------------------------------------ 
 ------------------------------------------------------------- 
 ------------------------------- 
 
 Comment: DB2 BACKUP ONE ONLINE  
 
 Start Time: 20140722112239 
 
   End Time: 20140722112240  
   
     Status: A 
 ------------------------------------------------------------ 
 ----------------  
  EID: 4 Location: 
SQLCA Information 
 
 sqlcaid : SQLCA     sqlcabc: 136   sqlcode: -2413   sqlerrml: 0 
 
 sqlerrmc:   
 sqlerrp : sqlubIni  
 sqlerrd : (1) 0                (2) 0                (3) 0 
 
           (4) 0                (5) 0                (6) 0  
		   
 sqlwarn : (1)      (2)      (3)      (4)        (5)       (6)  
 
           (7)      (8)      (9)      (10)       (11)  
 sqlstate: 
 
 Op Obj Timestamp+Sequence Type Dev Earliest Log Current Log  
 Backup ID
  -- --- ------------------ ---- --- ------------ ------------ 
  -------------- 
   B  D  20140722112743001   F    D  S0000000.LOG S0000000.LOG   
 
 ------------------------------------------------------------ 
 ---------------- 
 Contains 4 tablespace(s): 
 
 00001 SYSCATSPACE 
 
 00002 USERSPACE1 
 
 00003 SYSTOOLSPACE 
 
 00004 TS1
  ------------------------------------------------------------- 
  ---------------- 
  Comment: DB2 BACKUP ONE OFFLINE 
  
 Start Time: 20140722112743 
 
   End Time: 20140722112743 
   
     Status: A 
 ------------------------------------------------------------- 
  ---------------- 
 EID: 5 Location: /home/db2inst1 
 
 Op Obj Timestamp+Sequence Type Dev Earliest Log Current Log 
 Backup ID   
  ------------------------------------------------------------- 
  ----------------
  
R  D  20140722114519001   F                                
20140722112743 

 ------------------------------------------------------------ 
 ----------------  
 Contains 4 tablespace(s):  
 
 00001 SYSCATSPACE 
 
  00002 USERSPACE1 
  
 00003 SYSTOOLSPACE  
 
 00004 TS1
 ------------------------------------------------------------ 
 ----------------  
Comment: RESTORE ONE WITH RF
  
 Start Time: 20140722114519 
 
   End Time: 20140722115015  
     Status: A  
	 
 ------------------------------------------------------------ 
 ----------------  
  EID: 6 Location:  
</pre>
<h2>Restoring the database from backup</h2>
<p>To restore the database from backup file, you need to follow the given syntax:</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 restore database &lt;db_name&gt; from &lt;location&gt; 
taken at &lt;timestamp&gt;    
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 restore database one from /home/db2inst1/ taken at 
20140722112743  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
SQL2523W  Warning!  Restoring to an existing database that is 
different from  
 
the database on the backup image, but have matching names. 
The target database  
 
will be overwritten by the backup version.  The Roll-forward 
recovery logs

associated with the target database will be deleted.  

Do you want to continue ? (y/n) y 
 
DB20000I  The RESTORE DATABASE command completed successfully.   
</pre>
<p>Roll forward all the logs located in the log directory, including latest changes just before the disk drive failure.</p>
<p><b>Syntax:</b></p>
<pre class="prettyprint notranslate">
db2 rollforward db &lt;db_name&gt; to end of logs and stop   
</pre>
<p><b>Example:</b></p>
<pre class="prettyprint notranslate">
db2 rollforward db one to end of logs and stop  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
                                 Rollforward Status  
 Input database alias                   = one  
 Number of members have returned status = 1  
 Member ID                              = 0  
 Rollforward status                     = not pending  
 Next log file to be read               =  
 Log files processed                    = S0000000.LOG - 
 S0000001.LOG  
 Last committed transaction            = 2014-07-22- 
 06.00.33.000000 UTC  
DB20000I  The ROLLFORWARD command completed successfully. 
</pre>
<h1>DB2 - Database Security</h1>
<p>This chapter describes database security.</p>
<h2>Introduction</h2>
<p>DB2 database and functions can be managed by two different modes of security controls:</p>
<ol class="list">
<li>Authentication</li>
<li>Authorization</li>
</ol>
<h3>Authentication</h3>
<p>Authentication is the process of confirming that a user logs in only in accordance with the rights to perform the activities he is authorized to perform. User authentication can be performed at operating system level or database level itself. By using authentication tools for biometrics such as retina and figure prints are in use to keep the database from hackers or malicious users.</p>
<p>The database security can be managed from outside the db2 database system. Here are some type of security authentication process:</p>
<ul class="list">
<li>Based on Operating System authentications.</li>
<li>Lightweight Directory Access Protocol (LDAP)</li>
</ul>
<p>For DB2, the security service is a part of operating system as a separate product. For Authentication, it requires two different credentials, those are userid or username, and password.</p>
<h3>Authorization</h3>
<p>You can access the DB2 Database and its functionality within the DB2 database system, which is managed by the DB2 Database manager. Authorization is a process managed by the DB2 Database manager. The manager obtains information about the current authenticated user, that indicates which database operation the user can perform or access.</p>
<p>Here are different ways of permissions available for authorization:</p>
<p><b>Primary permission</b>: Grants the authorization ID directly.</p>
<p><b>Secondary permission</b>: Grants to the groups and roles if the user is a member</p>
<p><b>Public permission</b>: Grants to all users publicly.</p>
<p><b>Context-sensitive permission</b>: Grants to the trusted context role.</p>
<p>Authorization can be given to users based on the categories below:</p>
<ul class="list">
<li>System-level authorization</li>
<li>System administrator [SYSADM]</li>
<li>System Control [SYSCTRL]</li>
<li>System maintenance [SYSMAINT]</li>
<li>System monitor [SYSMON]</li>
</ul>
<p>Authorities provide of control over instance-level functionality. Authority provide to group privileges, to control maintenance and authority operations. For instance, database and database objects.</p>
<ul>
<li>Database-level authorization</li>
<li>Security Administrator [SECADM]</li>
<li>Database Administrator [DBADM]</li>
<li>Access Control [ACCESSCTRL]</li>
<li>Data access [DATAACCESS]</li>
<li>SQL administrator. [SQLADM]</li>
<li>Workload management administrator [WLMADM]</li>
<li>Explain [EXPLAIN]</li>
</ul>
<p>Authorities provide controls within the database. Other authorities for database include with LDAD and CONNECT.</p>
<ul class="list">
<li><b>Object-Level Authorization</b>: Object-Level authorization involves verifying privileges when an operation is performed on an object.</li>
<li><b>Content-based Authorization</b>: User can have read and write access to individual rows and columns on a particular table using Label-based access Control [LBAC].</li>
</ul>
<p>DB2 tables and configuration files are used to record the permissions associated with authorization names. When a user tries to access the data, the recorded permissions verify the following permissions:</p>
<ul class="list">
<li>Authorization name of the user</li>
<li>Which group belongs to the user</li>
<li>Which roles are granted directly to the user or indirectly to a group</li>
<li>Permissions acquired through a trusted context.</li>
</ul>
<p>While working with the SQL statements, the DB2 authorization model considers the combination of the following permissions:</p>
<ul class="list">
<li>Permissions granted to the primary authorization ID associated with the SQL statements.</li>
<li>Secondary authorization IDs associated with the SQL statements.</li>
<li>Granted to PUBLIC</li>
<li>Granted to the trusted context role.</li>
</ul>
<h2>Instance level authorities</h2>
<p>Let us discuss some instance related authorities.</p>
<h3>System administration authority (SYSADM)</h3>
<p>It is highest level administrative authority at the instance-level.  Users with SYSADM authority can execute some databases and database manager commands within the instance. Users with SYSADM authority can perform the following operations:</p>
<ul>
<li>Upgrade a Database</li>
<li>Restore a Database</li>
<li>Update Database manager configuration file.</li>
</ul>
<h3>System control authority (SYSCTRL)</h3>
<p>It is the highest level in System control authority. It provides to perform maintenance and utility operations against the database manager instance and its databases. These operations can affect system resources, but they do not allow direct access to data in the database.</p>
<p>Users with SYSCTRL authority can perform the following actions:</p>
<ul class="list">
<li>Updating the database, Node, or Distributed Connect Service (DCS) directory</li>
<li>Forcing users off the system-level</li>
<li>Creating or Dropping a database-level</li>
<li>Creating, altering, or dropping a table space</li>
<li>Using any table space</li>
<li>Restoring Database</li>
</ul>
<h3>System maintenance authority (SYSMAINT)</h3>
<p>It is a second level of system control authority.  It provides to perform maintenance and utility operations against the database manager instance and its databases. These operations affect the system resources without allowing direct access to data in the database. This authority is designed for users to maintain databases within a database manager instance that contains sensitive data.</p>
<p>Only Users with SYSMAINT or higher level system authorities can perform the following tasks:</p>
<ul class="list">
<li>Taking backup</li>
<li>Restoring the backup</li>
<li>Roll forward recovery</li>
<li>Starting or stopping instance</li>
<li>Restoring tablespaces</li>
<li>Executing db2trc command</li>
<li>Taking system monitor snapshots in case of an Instance level user or a database level user.</li>
</ul>
<p>A user with SYSMAINT can perform the following tasks:</p>
<ul class="list">
<li>Query the state of a tablespace</li>
<li>Updating log history files</li>
<li>Reorganizing of tables</li>
<li>Using RUNSTATS (Collection catalog statistics)</li>
</ul>
<h3>System monitor authority (SYSMON)</h3>
<p>With this authority, the user can monitor or take snapshots of database manager instance or its database. SYSMON authority enables the user to run the following tasks:</p>
<ul class="list">
<li>GET DATABASE MANAGER MONITOR SWITCHES</li>
<li>GET MONITOR SWITCHES</li>
<li>GET SNAPSHOT</li>
<li>LIST
<ul class="list">
<li>LIST ACTIVE DATABASES</li>
<li>LIST APPLICATIONS</li>
<li>LIST DATABASE PARTITION GROUPS</li>
<li>LIST DCS APPLICATIONS</li>
<li>LIST PACKAGES</li>
<li>LIST TABLES</li>
<li>LIST TABLESPACE CONTAINERS</li>
<li>LIST TABLESPACES</li>
<li>LIST UTITLITIES</li>
</ul>
</li>
<li>RESET MONITOR</li>
<li>UPDATE MONITOR SWITCHES</li>
</ul>
<h2>Database authorities</h2>
<p>Each database authority holds the authorization ID to perform some action on the database. These database authorities are different from privileges. Here is the list of some database authorities:</p>
<p><b>ACCESSCTRL</b>: allows to grant and revoke all object privileges and database authorities.</p>
<p><b>BINDADD</b>: Allows to create a new package in the database.</p>
<p><b>CONNECT</b>: Allows to connect to the database.</p>
<p><b>CREATETAB</b>: Allows to create new tables in the database.</p>
<p><b>CREATE_EXTERNAL_ROUTINE</b>: Allows to create a procedure to be used by applications and the users of the databases.</p>
<p><b>DATAACCESS</b>: Allows to access data stored in the database tables.</p>
<p><b>DBADM</b>: Act as a database administrator. It gives all other database authorities except ACCESSCTRL, DATAACCESS, and SECADM.</p>
<p><b>EXPLAIN</b>: Allows to explain query plans without requiring them to hold the privileges to access the data in the tables.</p>
<p><b>IMPLICIT_SCHEMA</b>: Allows a user to create a schema implicitly by creating an object using a CREATE statement.</p>
<p><b>LOAD</b>: Allows to load data into table.</p>
<p><b>QUIESCE_CONNECT</b>: Allows to access the database while it is quiesce (temporarily disabled).</p>
<p><b>SECADM</b>: Allows to act as a security administrator for the database.</p>
<p><b>SQLADM</b>: Allows to monitor and tune SQL statements.</p>
<p><b>WLMADM</b>: Allows to act as a workload administrator</p>
<h2>Privileges</h2>
<h3>SETSESSIONUSER</h3>
<p>Authorization ID privileges involve actions on authorization IDs. There is only one privilege, called the SETSESSIONUSER privilege.  It can be granted to user or a group and it allows to session user to switch identities to any of the authorization IDs on which the privileges are granted. This privilege is granted by user SECADM authority.</p>
<h3>Schema privileges</h3>
<p>This privileges involve actions on schema in the database. The owner of the schema has all the permissions to manipulate the schema objects like tables, views, indexes, packages, data types, functions, triggers, procedures and aliases. A user, a group, a role, or PUBLIC can be granted any user of the following privileges:</p>
<ul class="list">
<li><b>CREATEIN</b>: allows to create objects within the schema</li>
<li><b>ALTERIN</b>: allows to modify objects within the schema.</li>
</ul>
<h3>DROPIN</h3>
<p>This allows to delete the objects within the schema.</p>
<h2>Tablespace privileges</h2>
<p>These privileges involve actions on the tablespaces in the database. User can be granted the USE privilege for the tablespaces. The privileges then allow them to create tables within tablespaces. The privilege owner can grant the USE privilege with the command WITH GRANT OPTION on the tablespace when tablespace is created. And SECADM or ACCESSCTRL authorities have the permissions to USE privileges on the tablespace.</p>
<h2>Table and view privileges</h2>
<p>The user must have CONNECT authority on the database to be able to use table and view privileges.  The privileges for tables and views are as given below:</p>
<h3>CONTROL</h3>
<p>It provides all the privileges for a table or a view including drop and grant, revoke individual table privileges to the user.</p>
<h3>ALTER</h3>
<p>It allows user to modify a table.</p>
<h3>DELETE</h3>
<p>It allows the user to delete rows from the table or view.</p>
<h3>INDEX</h3>
<p> It allows the user to insert a row into table or view. It can also run import utility.</p>
<h3>REFERENCES</h3>
<p>It allows the users to create and drop a foreign key.</p>
<h3>SELECT</h3>
<p>It allows the user to retrieve rows from a table or view.</p>
<h3>UPDATE</h3>
<p>It allows the user to change entries in a table, view.</p>
<h2>Package privileges</h2>
<p>User must have CONNECT authority to the database. Package is a database object that contains the information of database manager to access data in the most efficient way for a particular application.</p>
<h3>CONTROL</h3>
<p>It provides the user with privileges of rebinding, dropping or executing packages. A user with this privileges is granted to BIND and EXECUTE privileges.</p>
<h3>BIND</h3>
<p>It allows the user to bind or rebind that package.</p>
<h3>EXECUTE</h3>
<p>Allows to execute a package.</p>
<h2>Index privileges</h2>
<p>This privilege automatically receives CONTROL privilege on the index.</p>
<h2>Sequence privileges</h2>
<p>Sequence automatically receives the USAGE and ALTER privileges on the sequence.</p>
<h2>Routine privileges</h2>
<p>It involves the action of routines such as functions, procedures, and methods within a database.</p>
<h1>DB2 - Roles</h1>
<h2>Introduction</h2>
<p>A role is a database object that groups multiple privileges that can be assigned to users, groups, PUBLIC or other roles by using GRANT statement.</p>
<h2>Restrictions on roles</h2>
<ul class="list">
<li>A role cannot own database objects.</li>
<li>Permissions and roles granted to groups are not considered when you create the following database objects.
<ul class="list">
<li>Package Containing static SQL</li>
<li>Views</li>
<li>Materialized Query Tables (MQT)</li>
<li>Triggers</li>
<li>SQL Routines</li>
</ul>
</li>
</ul>
<h2>Creating and granting membership in roles</h2>
<p><b>Syntax:</b> [To create a new role]</p>
<pre class="prettyprint notranslate">
db2 create role &lt;role_name&gt; 
</pre>
<p><b>Example</b>: [To create a new role named ‘sales’ to add some table to be managed by some user or group]</p>
<pre class="prettyprint notranslate">
db2 create role sales 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB20000I The SQL command completed successfully. 
</pre>
<h2>Granting role from DBADM to a particular table</h2>
<p><b>Syntax:</b> [To grant permission of a role to a table]</p>
<pre class="prettyprint notranslate">
db2 grant select on table &lt;table_name&gt; to role &lt;role_name&gt; 
</pre>
<p><b>Example</b>: [To add permission to manage a table ‘shope.books’ to role ‘sales’]</p>
<pre class="prettyprint notranslate">
db2 grant select on table shope.books to role sales 
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB20000I  The SQL command completed successfully. 
</pre>
<p>Security administrator grants role to the required users. (Before you use this command, you need to create the users.)</p>
<p><b>Syntax:</b> [To add users to a role]</p>
<pre class="prettyprint notranslate">
db2 grant role &lt;role_name&gt; to user &lt;username&gt; 
</pre>
<p><b>Example</b>: [To add a user ‘mastanvali’ to a role ‘sales’]</p>
<pre class="prettyprint notranslate">
db2 grant sales to user mastanvali  
</pre>
<p><b>Output:</b></p>
<pre class="prettyprint notranslate">
DB20000I  The SQL command completed successfully. 
</pre>
<h2>Role hierarchies</h2>
<p>For creating a hierarchies for roles, each role is granted permissions/ membership with another role.</p>
<p><b>Syntax:</b> [before this syntax create a new role with name of “production”]</p>
<pre class="prettyprint notranslate">
db2 grant role &lt;roll_name&gt; to role &lt;role_name&gt;
</pre>
<p><b>Example</b>: [To provide permission of a role ‘sales’ to another role ‘production’]</p>
<pre class="prettyprint notranslate">
db2 grant sales to role production 
</pre>
<h1>DB2 - LDAP</h1>
<h2>Introduction</h2>
<p>LDAP is Lightweight Directory Access Protocol. LDAP is a global directory service, industry-standard protocol, which is based on client-server model and runs on a layer above the TCP/IP stack. The LDAP provides a facility to connect to, access, modify, and search the internet directory.</p>
<p>The LDAP servers contain information which is organized in the form of a directory tree. The clients ask server to provide information or to perform some operation on a particular information. The server answers the client by providing required information if it has one, or it refers the client to another server for action on required information. The client then acquires the desired information from another server.</p>
<p>The tree structure of directory is maintained same across all the participating servers. This is a prominent feature of LDAP directory service. Hence, irrespective of which server is referred to by the client, the client always gets required information in an error-free manner. Here, we use LDAP to authenticate IBM DB2 as a replacement of operating system authentication.</p>
<p>There are two types of LDAP:</p>
<ol class="list">
<li>Transparent</li>
<li>Plug-in</li>
</ol>
<p>Let us see how to configure a transparent LDAP.</p>
<h2>Configuring transparent LDAP</h2>
<p>To start with configuration of transparent LDAP, you need to configure the LDAP server.</p>
<h3>LDAP server configuration</h3>
<p>Create a SLAPD.conf file, which contains all the information about users and group object in the LDAP. When you install LDAP server, by default it is configured with basic LDAP directory tree on your machine.</p>
<p>The table shown below indicates the file configuration after modification.</p>
<p>The text highlighted with yellow the code box means for the following:</p>
<p>DBA user-id = “db2my1”, group = “db1my1adm”, password= “db2my1” Admin user-id = “my1adm”, group = “dbmy1ctl”.</p>
<pre class="prettyprint notranslate">
# base dn: example.com 
dn: dc=example,dc=com 
dc: example 
o: example 
objectClass: organization 
objectClass: dcObject 
# pc box db 
dn: dc=db697,dc=example,dc=com 
dc: db697 
o: db697 
objectClass: organization 
objectClass: dcObject 
# 
# Group: db<sid>adm 
# 
dn: cn=dbmy1adm,dc=db697,dc=example,dc=com 
cn: dbmy1adm 
objectClass: top 
objectClass: posixGroup 
gidNumber: 400 
objectClass: groupOfNames 
member: uid=db2my1,cn=dbmy1adm,dc=db697,dc=example,dc=com 
memberUid: db2my1 
# 
# User: db2<sid> 
# 
dn: uid=db2my1,cn=dbmy1adm,dc=db697,dc=example,dc=com 
cn: db2my1 
sn: db2my1 
uid: db2my1 
objectClass: top 
objectClass: inetOrgPerson 
objectClass: posixAccount 
uidNumber: 400 
gidNumber: 400 
loginShell: /bin/csh 
homeDirectory: /db2/db2my1 
# 
# Group: db<sid>ctl 
# 
dn: cn=dbmy1ctl,dc=db697,dc=example,dc=com 
cn: dbmy1ctl 
objectClass: top 
objectClass: posixGroup 
gidNumber: 404 
objectClass: groupOfNames 
member: uid=my1adm,cn=dbmy1adm,dc=db697,dc=example,dc=com 
memberUid: my1adm 
# 
# User: <sid>adm 
# 
dn: uid=my1adm,cn=dbmy1ctl,dc=db697,dc=example,dc=com 
cn: my1adm 
sn: my1adm 
uid: my1adm 
objectClass: top 
objectClass: inetOrgPerson 
objectClass: posixAccount 
uidNumber: 404 
gidNumber: 404 
loginShell: /bin/csh 
homeDirectory: /home/my1adm 
</pre>
<p>Save the above file with name ‘/var/lib/slapd.conf’, then execute this file by following command to add these values into LDAP Server. This is a linux command; not a db2 command.</p>
<pre class="prettyprint notranslate">
ldapadd r- -D ‘cn=Manager,dc=example,dc=com” –W –f 
/var/lib/slapd.conf 
</pre>
<p>After registering the DB2 users and the DB2 group at the LDAP Server, logon to the particular user where you have installed instance and database. You need to configure LDAP client to confirm to client where your server is located, be it remote or local.</p>
<h3>LDAP client configuration</h3>
<p>The LDAP Client configuration is saved in the file ‘ldap.conf’. There are two files available for configuration parameters, one is common and the other is specific.  You should find the first one at   ‘/etc/ldap.conf’ and the latter is located at ‘/etc/openldap/ldap.conf’.</p>
<p>The following data is available in common LDAP client configuration file</p>
<pre class="prettyprint notranslate">
# File: /etc/ldap.conf  
# The file contains lots of more entries and many of them  
# are comments. You show only the interesting values for now  
host localhost  
base dc=example,dc=com  
ldap_version 3  
pam_password crypt  
pam_filter objectclass=posixAccount  
nss_map_attribute uniqueMember member 
nss_base_passwd dc=example,dc=com  
nss_base_shadow dc=example,dc=com  
nss_base_group dc=example,dc=com 
</pre>
<p>You need to change the location of server and domain information according to the DB2 configuration. If we are using server in same system then mention it as ‘localhost’ at ‘host’ and at ‘base’ you can configure which is mentioned in ‘SLAPD.conf’ file for LDAP server.</p>
<p>Pluggable Authentication Model (PAM) is an API for authentication services. This is common interface for LDAP authentication with an encrypted password and special LDAP object of type posixAccount. All LDAP objects of this type represent an abstraction of an account with portable Operating System Interface (POSIX) attributes.</p>
<p>Network Security Services (NSS) is a set of libraries to support cross-platform development of security-enabled client and server applications. This includes libraries like SSL, TLS, PKCS S/MIME and other security standards.</p>
<p>You need to specify the base DN for this interface and two additional mapping attributes. OpenLDAP client configuration file contains the entries given below:</p>
<pre class="prettyprint notranslate">
host localhost  
base dc=example,dc=com
</pre>
<p>Till this you just define the host of LDAP serve and the base DN.</p> 
<h2>Validating OpenLDAP environment</h2>
<p>After you configured your LDAP Server and LDAP Client, verify both for communication.</p>
<p><b>Step1</b>: Check your Local LDAP server is running. Using below command:</p>
<pre class="prettyprint notranslate">
ps -ef | grep -i ldap
</pre>
<p>This command should list the LDAP deamon which represents your LDAP server:</p>
<pre class="prettyprint notranslate">
/usr/lib/openldap/slapd -h ldap:/// -u ldap -g ldap -o slp=on
</pre>
<p>This indicates that you LDAP server is running and is waiting for request from clients. If there is no such process for previous commands you can start LDAP server with the ’rcldap’ command.</p>
<pre class="prettyprint notranslate">
rcldap start 
</pre>
<p>When the server starts, you can monitor this in the file ‘/var/log/messages/ by issuing the following command.</p>
<pre class="prettyprint notranslate">
tail –f /var/log/messages 
</pre>
<h2>Testing connection to LDAP server with ldapsearch</h2>
<p>The ldapsearch command opens a connection to an LDAP server, binds to it and performs a search query which can be specified by using special parameters ‘-x’ connect to your LDAP server with a simple authentication mechanism by using the –x parameter instead of a more complex mechanism like Simple Authentication and Security Layer (SASL)</p>
<pre class="prettyprint notranslate">
ldapsearch –x  
</pre>
<p>LDAP server should reply with a response given below, containing all of your LDAP entries in a LDAP Data Interchange Format(LDIF).</p>
<pre class="prettyprint notranslate">
# extended LDIF  
#  
# LDAPv3  
# base &lt;&gt; with scope subtree  
# filter: (objectclass=*) 
# requesting: ALL  
# example.com  
dn: dc=example,
dc=com  dc: example  
o: example  
objectClass: organization  
objectClass: dcObject  
# search result  
search: 2  
result: 0 Success  
# numResponses: 2  
# numEntries: 1  
</pre>
<h2>Configuring DB2</h2>
<p>After working with LDAP server and client, you need to configure our DB2 database for use with LDAP.  Let us discuss, how you can install and configure your database to use our LDAP environment for the DB2 user authentication process.</p>
<h2>Configuring DB2 and LDAP interaction plug-ins</h2>
<p>IBM provides a free package with LDAP plug-ins for DB2. The DB2 package includes three DB2 security plug-ins for each of the following:</p>
<ul class="list">
<li>server side authentication</li>
<li>client side authentication</li>
<li>group lookup</li>
</ul>
<p>Depending upon your requirements, you can use any of the three plug-ins or all of them. This plugin do not support environments where some users are defined in LDAP and others in the operating Systems. If you decide to use the LDAP plug-ins, you need to define all users associated with the database in the LDAP server. The same principle applies to the group plug-in.</p>
<p>You have to decide which plug-ins are mandatory for our system. The client authentication plug-ins used in scenarios where the user ID and the password validation supplied on a CONNECT or ATTACH statement occurs on the client system. So the database manager configuration parameters SRVCON_AUTH or AUTHENTICATION need to be set to the value CLIENT. The client authentication is difficult to secure and is not generally recommended. Server plug-in is generally recommended because it performs a server side validation of user IDs and passwords, if the client executes a CONNECT or ATTACH statement and this is secure way. The server plug-in also provides a way to map LDAP user IDs DB2 authorization IDs.</p>
<p>Now you can start installation and configuration of the DB2 security plug-ins, you need to think about the required directory information tree for DB2. DB2 uses indirect authorization which means that a user belongs to a group and this group was granted with fewer authorities. You need to define all DB2 users and DB2 groups in LDAP directory.</p>
<h2>Image</h2>
<p>The LDIF file openldap.ldif should contain the code below:</p>
<pre class="prettyprint notranslate">
#  
# LDAP root object  
# example.com  
#  
dn: dc=example,
dc=com  
dc: example  
o: example  
objectClass: organization  
objectClass: dcObject 
 #  
 # db2 groups  
 #  
 dn: cn=dasadm1,dc=example,dc=com  
 cn: dasadm1  
 objectClass: top  
 objectClass: posixGroup  
 gidNumber: 300  
 objectClass: groupOfNames 
 member: uid=dasusr1,cn=dasadm1,dc=example,dc=com  
 memberUid: dasusr1  
 dn: cn=db2grp1,dc=example,dc=com  
 cn: db2grp1  
 objectClass: top  
 objectClass: posixGroup  
 gidNumber: 301  
 objectClass: groupOfNames  
 member: uid=db2inst2,cn=db2grp1,dc=example,dc=com  memberUid: db2inst2  
 dn: cn=db2fgrp1,dc=example,dc=com  
 cn: db2fgrp1  
 objectClass: top 
 objectClass: posixGroup  
 gidNumber: 302  
 objectClass: groupOfNames 
 member: uid=db2fenc1,cn=db2fgrp1,dc=example,dc=com  
 memberUid: db2fenc1  
 #  
 # db2 users  
 #  
 dn: uid=dasusr1,
 cn=dasadm1,
 dc=example,dc=com  
 cn: dasusr1  
 sn: dasusr1  
 uid: dasusr1  
 objectClass: top  
 objectClass: inetOrgPerson 
 objectClass: posixAccount 
 uidNumber: 300  
 gidNumber: 300  
 loginShell: /bin/bash 
 homeDirectory: /home/dasusr1  
 dn: uid=db2inst2,cn=db2grp1,dc=example,dc=com  
 cn: db2inst2  
 sn: db2inst2  
 uid: db2inst2  
 objectClass: top  
 objectClass: inetOrgPerson  
 objectClass: posixAccount  
 uidNumber: 301  
 gidNumber: 301  
 loginShell: /bin/bash  
 homeDirectory: /home/db2inst2  
 dn: uid=db2fenc1,cn=db2fgrp1,dc=example,dc=com  
 cn: db2fenc1  
 sn: db2fenc1  
 uid: db2fenc1  
 objectClass: top  
 objectClass: inetOrgPerson  
 objectClass: posixAccount  
 uidNumber: 303  
 gidNumber: 303  
 loginShell: /bin/bash  
 homeDirectory: /home/db2fenc1 
 </pre>
 <p>Create a file named ‘db2.ldif’ and paste the above example into it. Using this file, add the defined structures to your LDAP directory.</p>
 <p>To add the DB2 users and DB2 groups to the LDAP directory, you need to bind the user as ‘rootdn’ to the LDAP server in order to get the exact privileges.</p>
<p>Execute the following syntaxes to fill the LDAP information directory with all our objects defined in the LDIF file ‘db2.ldif’</p>
<pre class="prettyprint notranslate">
ldapadd –x –D “cn=Manager, dc=example,dc=com” –W –f &lt;path&gt;/db2.ldif 
</pre>
<p>Perform the search result with more parameter</p>
<pre class="prettyprint notranslate">
ldapsearch –x |more 
</pre>
<h2>Preparing file system for DB2 usage</h2>
<p>Creating instance for our LDAP user db2inst2. This user requires home directory with two empty files inside the home directory. Before you create a new instance, you need to create a user who will be the owner of the instance.</p>
<p>After creating the instance user, you should have to create the file ‘.profile’ and ‘.login’ in user home directory, which will be modified by DB2.  To create this file in the directory, execute the following command:</p>
<pre class="prettyprint notranslate">
mkdir /home/db2inst2  
mkdir /home/db2inst2/.login 
mkdir /home/db2inst2/.profile  
</pre>
<p>You have registered all users and groups related with DB2 in LDAP directory, now you can create an instance with the name ‘db2inst2’ with the instance owner id ‘db2inst2’ and use the fenced user id ‘db2fenc1’, which is needed for running user defined functions (UDFs)or stored procedures.</p>
<pre class="prettyprint notranslate">
/opt/ibm/db2/V10.1/instance/db2icrt –u db2fenc1 db2inst2  
DBI1070I Program db2icrt completed successfully.  
</pre>
<p>Now check the instance home directory. You can see new sub-directory called ‘sqllib’ and the .profile and .login files customized for DB2 usage.</p>
<h2>Configuring authentication public-ins for LDAP support in DB2</h2>
<p>Copy the required LDAP plug-ins to the appropriate DB2 directory:</p>
<pre class="prettyprint notranslate">
cp            /<db2_ldap_pakg>/<os>/v10/IBMLDAPauthserver.so  
/home/db2inst2/sqllib/security<bit>/plugin/server/. 
 
cp            /<db2_ldap_pakg>/<os>/v10/IBMLDAPgroups.so 
/home/db2inst2/sqllib/security<bit>/plugin/group/.
</pre>
<p>Once the plug-ins are copied to the specified directory, you toned to login to DB2 instance owner and change the database manager configuration to use these plug-ins.</p>
<pre class="prettyprint notranslate">
Su – db2inst2  
db2inst2> db2 update dbm cfg using svrcon_pw_plugin 
IBMLDAPauthserver 
db2inst2> db2 update dbm cfg using group_plugin 
IBMLDAPgroups 
db2inst2> db2 update dbm cfg using authentication 
SERVER_ENCRYPT 
db2inst2> db2stop 
db2inst2> db2start  
</pre>
<p>This modification comes into effect after you start DB2 instance. After restarting the instance, you need to install and configure the main DB2 LDAP configuration file named “IBMLDAPSecurity.ini” to make DB2 plug-ins work with the current LDAP configuration.</p>
<p>IBMLDAPSecurity.ini file contains</p>
<pre class="prettyprint notranslate">
;-----------------------------------------------------------  
; SERVER RELATED VALUES  
;-----------------------------------------------------------  
; Name of your LDAP server(s).  
; This is a space separated list of LDAP server addresses,  
; with an optional port number for each one:  
; host1[:port] [host2:[port2] ... ]  
; The default port number is 389, or 636 if SSL is enabled.  
LDAP_HOST = my.ldap.server  
;-----------------------------------------------------------  
; USER RELATED VALUES  
;-----------------------------------------------------------  
rs  
; LDAP object class used for use USER_OBJECTCLASS = posixAccount  
; LDAP user attribute that represents the "userid"  
; This attribute is combined with the USER_OBJECTCLASS and  
; USER_BASEDN (if specified) to construct an LDAP search  
; filter when a user issues a DB2 CONNECT statement with an  
; unqualified userid. For example, using the default values 
; in this configuration file, (db2 connect to MYDB user bob  
; using bobpass) results in the following search filter:  
OrgPerson)(uid=bob)  
; &(objectClass=inet USERID_ATTRIBUTE = uid  
representing the DB2 authorization ID  
; LDAP user attribute, AUTHID_ATTRIBUTE = uid  
;-----------------------------------------------------------  
; GROUP RELATED VALUES  
;-----------------------------------------------------------  
ps  
; LDAP object class used for grou GROUP_OBJECTCLASS = groupOfNames  
at represents the name of the group  
; LDAP group attribute th GROUPNAME_ATTRIBUTE = cn  
; Determines the method used to find the group memberships  
; for a user. Possible values are:  
; SEARCH_BY_DN - Search for groups that list the user as  
; a member. Membership is indicated by the  
; group attribute defined as  
; GROUP_LOOKUP_ATTRIBUTE. 
; USER_ATTRIBUTE - A user's groups are listed as attributes  
; of the user object itself. Search for the  
; user attribute defined as  
TRIBUTE to get the groups.  
; GROUP_LOOKUP_AT GROUP_LOOKUP_METHOD = SEARCH_BY_DN  
; GROUP_LOOKUP_ATTRIBUTE  
; Name of the attribute used to determine group membership,  
; as described above.  
llGroups  
; GROUP_LOOKUP_ATTRIBUTE = ibm-a GROUP_LOOKUP_ATTRIBUTE = member 
</pre>
<p>Now locate the file IBMLDAPSecurity.ini file in the current instance directory. Copy the above sample contents into the same.</p>
<pre class="prettyprint notranslate">
Cp 
/<ibm_db_installation_directory>/db2_ldap_pkg/IBMLDAPSecurity.ini  
/home/db2inst2/sqllib/cfg/ 
</pre>
<p>Now you need to restart your DB2 instance, using two syntaxes given below:</p>
<pre class="prettyprint notranslate">
db2inst2&gt; db2stop 

Db2inst2&gt; db2start 
</pre>
<p>At this point, if you try ‘db2start’ command, you will get security error message. Because, DB2 security configuration is not yet correctly configured for your LDAP environment.</p>
<h2>Customizing both configurations</h2>
<p>Keep LDAP_HOST name handy, which is configured in slapd.conf file.</p>
<p>Now edit IMBLDAPSecurity.ini file and type the LDAP_HOST name. The LDAP_HOST name in both the said files must be identical.</p>
<p>The contents of file are as shown below:</p>
<pre class="prettyprint notranslate">
      ;-----------------------------------------------------------  
      ; SERVER RELATED VALUES  
      ;-----------------------------------------------------------  
      LDAP_HOST = localhost  
      ;-----------------------------------------------------------  
      ; USER RELATED VALUES  
      ----------------------------  
      ;-------------------------------  
      USER_OBJECTCLASS = posixAccount  
      USER_BASEDN = dc=example,dc=com  
      USERID_ATTRIBUTE = uid  
      AUTHID_ATTRIBUTE = uid  
      ;-----------------------------------------------------------  
      ; GROUP RELATED VALUES  
      ;-----------------------------------------------------------  
      GROUP_OBJECTCLASS = groupOfNames 
	  GROUP_BASEDN = dc=example,dc=com  
      GROUPNAME_ATTRIBUTE = cn  
      GROUP_LOOKUP_METHOD = SEARCH_BY_DN  
      GROUP_LOOKUP_ATTRIBUTE = member 
</pre>
<p>After changing these values, LDAP immediately takes effect and your DB2 environment with LDAP works perfectly.</p>
<p>You can logout and login again to ‘db2inst2’ user.</p>
<p>Now your instance is working with LDAP directory.</p>
<div class="nxt-btn center">
<a href="/db2/db2_useful_resources.htm">Next Page <i class="icon icon-arrow-circle-o-right big-font"></i>&nbsp;</a>
</div>
<div class="mui-container-fluid button-borders show">
<div class="pre-btn">
<a href="/db2/db2_questions_answers.htm"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="/db2/db2_useful_resources.htm">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>
<div class="google-bottom-ads">
<div>Advertisements</div>
<script><!--
var width = 580;
var height = 400;
var format = "580x400_as";
if( window.innerWidth < 468 ){
   width = 300;
   height = 250;
   format = "300x250_as";
}
google_ad_client = "pub-7133395778201029";
google_ad_width = width;
google_ad_height = height;
google_ad_format = format;
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<div class="space-bottom"></div>
</div>
</div>
<!-- Tutorial Content Ends Here -->
<!-- Right Column Starts Here -->
<div class="mui-col-md-2 google-right-ads">
<div class="space-top"></div>
<div class="google-right-ad" style="margin: 0px auto !important;margin-top:5px;">
<script><!--
google_ad_client = "pub-2537027957187252";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="google-right-ad">
<div class="adsbyvli" data-ad-slot="vi_9012177"></div>
<script>(vitag.Init = window.vitag.Init || []).push(function(){viAPItag.display("vi_9012177")})</script>
</div>
<div class="space-bottom"></div>
<div class="google-right-ad">
<div class="adsbyvli" data-ad-slot="vi_9013289"></div>
<script>(vitag.Init = window.vitag.Init || []).push(function(){viAPItag.display("vi_9013289")})</script>
</div>
<div class="space-bottom" style="margin-bottom:15px;"></div>
</div>
<!-- Right Column Ends Here -->
</div>
</div>
<div class="clear"></div>
<footer id="footer">
<div class="mui--text-center">
<div class="mui--text-caption mui--text-light">
<a href="/index.htm" class="logo"><img class="img-responsive" src="/images/logo-black.png" alt="Tutorials Point" title="Tutorials Point"></a>
</div>
<ul class="mui-list--inline mui--text-body2 mui--text-light">
<li><a href="/about/index.htm"><i class="fal fa-globe"></i> About us</a></li>
<li><a href="/about/about_terms_of_use.htm"><i class="fal fa-asterisk"></i> Terms of use</a></li>
<li><a href="/about/about_privacy.htm#cookies"> <i class="fal fa-shield-check"></i> Cookies Policy</a></li>
<li><a href="/about/faq.htm"><i class="fal fa-question-circle"></i> FAQ's</a></li>
<li><a href="/about/about_helping.htm"><i class="fal fa-hands-helping"></i> Helping</a></li>
<li><a href="/about/contact_us.htm"><i class="fal fa-map-marker-alt"></i> Contact</a></li>
</ul>
<div class="mui--text-caption mui--text-light bottom-copyright-text">&copy; Copyright 2019. All Rights Reserved.</div>
</div>
<div id="privacy-banner">
  <div>
    <p>
      We use cookies to provide and improve our services. By using our site, you consent to our Cookies Policy.
      <a id="banner-accept" href="#">Accept</a>
      <a id="banner-learn" href="/about/about_cookies.htm" target="_blank">Learn more</a>
    </p>
  </div>
</div>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-232293-17"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-232293-6');
</script>
</footer>
</body>
</html>
