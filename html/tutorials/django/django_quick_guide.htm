<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Django - Quick Guide</title>
<meta charset="utf-8">
<meta name="description" content="Django - Quick Guide - Django is a high-level Python web framework that encourages rapid development and clean, pragmatic design. Django makes it easier to build better web apps quick"/>
<meta name="keywords" content="C, C++, Python, Java, HTML, CSS, JavaScript, SQL, PHP, jQuery, XML, DOM, Bootstrap, Tutorials, Articles, Programming, training, learning, quiz, preferences, examples, code"/>
<link rel="canonical" href="https://www.tutorialspoint.com/django/django_quick_guide.htm" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
<script src="/theme/js/script-min-v2.js?v=3"></script>
<link rel="stylesheet" href="/theme/css/style-min-v2.css?v=6">
<script src="//services.bilsyndication.com/adv1/?d=901" defer="" async=""></script>
<script> var vitag = vitag || {};</script>
<script> vitag.outStreamConfig = { enablePC: false, enableMobile: false };</script>  
<style>
.right-menu .mui-btn {
    background-color:#0c4b33;
}
a.demo {
    background:#0c4b33;
}
li.heading {
    background:#0c4b33;
}
.course-box{background:#0c4b33}
.home-intro-sub p{color:#0c4b33}
</style>
</head>
<body>
<header id="header">
<!-- Top sub-menu Starts Here -->
<div class="mui-appbar mui-container-fulid top-menu">
<div class="mui-container">
<div class="top-menu-item home">
<a href="https://www.tutorialspoint.com/index.htm" target="_blank" title="TutorialsPoint - Home"><i class="fal fa-home"></i> <span>Home</span></a>
</div>
<div class="top-menu-item qa">
<a href="https://www.tutorialspoint.com/about/about_careers.htm" target="_blank" title="Job @ Tutorials Point"><i class="fa fa-suitcase"></i> <span>Jobs</span></a>
</div>
<div class="top-menu-item tools">
<a href="https://www.tutorialspoint.com/online_dev_tools.htm" target="_blank" title="Tools - Online Development and Testing Tools"><i class="fal fa-cogs"></i> <span>Tools</span></a>
</div>
<div class="top-menu-item coding-ground">
<a href="https://www.tutorialspoint.com/codingground.htm" target="_blank" title="Coding Ground - Free Online IDE and Terminal"><i class="fal fa-code"></i> <span>Coding Ground </span></a> 
</div>
<div class="top-menu-item current-affairs">
<a href="https://www.tutorialspoint.com/current_affairs.htm" target="_blank" title="Daily Current Affairs"><i class="fal fa-layer-plus"></i> <span>Current Affairs</span></a>
</div>
<div class="top-menu-item upsc-notes">
<a href="https://www.tutorialspoint.com/upsc_ias_exams.htm" target="_blank" title="UPSC IAS Exams Notes - TutorialsPoint"><i class="fal fa-user-tie"></i> <span>UPSC Notes</span></a>
</div>      
<div class="top-menu-item online-tutoris">
<a href="https://www.tutorialspoint.com/tutor_connect/index.php" target="_blank" title="Top Online Tutors - Tutor Connect"><i class="fal fa-user"></i> <span>Online Tutors</span></a>
</div>
<div class="top-menu-item whiteboard">
<a href="https://www.tutorialspoint.com/whiteboard.htm" target="_blank" title="Free Online Whiteboard"><i class="fal fa-chalkboard"></i> <span>Whiteboard</span></a>
</div>
<div class="top-menu-item net-meeting">
<a href="https://www.tutorialspoint.com/netmeeting.php" target="_blank" title="A free tool for online video conferencing"><i class="fal fa-chalkboard-teacher"></i> <span>Net Meeting</span></a> 
</div>
<div class="top-menu-item articles">
<a href="https://www.tutorix.com" target="_blank" title="Tutorx - The Best Learning App" rel="nofollow"><i class="fal fa-video"></i> <span>Tutorix</span></a> 
</div>        
<div class="social-menu-item">
<a href="https://www.facebook.com/tutorialspointindia" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Facebook"><i class="fab fa-facebook-f"></i></a> 
<a href="https://www.twitter.com/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Twitter"><i class="fab fa-twitter"></i></a>
<a href="https://www.linkedin.com/company/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Linkedin"><i class="fab fa-linkedin-in"></i></a>
<a href="https://www.youtube.com/channel/UCVLbzhxVTiTLiVKeGV7WEBg" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint YouTube"><i class="fab fa-youtube"></i></a>
</div>        
</div>
</div>
<!-- Top sub-menu Ends Here -->
<!-- Top main-menu Starts Here -->
<div class="mui-appbar mui-container-fulid mui--appbar-line-height mui--z1" id="logo-menu">
<div class="mui-container">
<div class="left-menu">
<a href="https://www.tutorialspoint.com/index.htm" title="Tutorialspoint">
<img class="tp-logo" alt="tutorialspoint" src="/django/images/logo.png">
</a>
<div class="mui-dropdown">
<a class="mui-btn mui-btn--primary categories" data-mui-toggle="dropdown"><i class="fa fa-th-large"></i> 
<span>Categories <span class="mui-caret"></span></span></a>            
<ul class="mui-dropdown__menu cat-menu">
<li>
<ul>
<li><a href="/academic_tutorials.htm"><i class="fa fa-caret-right"></i> Academic Tutorials</a></li>
<li><a href="/big_data_tutorials.htm"><i class="fa fa-caret-right"></i> Big Data &amp; Analytics </a></li>
<li><a href="/computer_programming_tutorials.htm"><i class="fa fa-caret-right"></i> Computer Programming </a></li>
<li><a href="/computer_science_tutorials.htm"><i class="fa fa-caret-right"></i> Computer Science </a></li>
<li><a href="/database_tutorials.htm"><i class="fa fa-caret-right"></i> Databases </a></li>
<li><a href="/devops_tutorials.htm"><i class="fa fa-caret-right"></i> DevOps </a></li>
<li><a href="/digital_marketing_tutorials.htm"><i class="fa fa-caret-right"></i> Digital Marketing </a></li>
<li><a href="/engineering_tutorials.htm"><i class="fa fa-caret-right"></i> Engineering Tutorials </a></li>
<li><a href="/upsc_ias_exams.htm"><i class="fa fa-caret-right"></i> Exams Syllabus </a></li>
<li><a href="/famous_monuments.htm"><i class="fa fa-caret-right"></i> Famous Monuments </a></li>
<li><a href="/gate_exams_tutorials.htm"><i class="fa fa-caret-right"></i> GATE Exams Tutorials</a></li>
<li><a href="/latest_technologies.htm"><i class="fa fa-caret-right"></i> Latest Technologies </a></li>
<li><a href="/machine_learning_tutorials.htm"><i class="fa fa-caret-right"></i> Machine Learning </a></li>
<li><a href="/mainframe_tutorials.htm"><i class="fa fa-caret-right"></i> Mainframe Development </a></li>
<li><a href="/management_tutorials.htm"><i class="fa fa-caret-right"></i> Management Tutorials </a></li>
<li><a href="/maths_tutorials.htm"><i class="fa fa-caret-right"></i> Mathematics Tutorials</a></li>
<li><a href="/microsoft_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> Microsoft Technologies </a></li>
<li><a href="/misc_tutorials.htm"><i class="fa fa-caret-right"></i> Misc tutorials </a></li>
<li><a href="/mobile_development_tutorials.htm"><i class="fa fa-caret-right"></i> Mobile Development </a></li>
<li><a href="/java_technology_tutorials.htm"><i class="fa fa-caret-right"></i> Java Technologies </a></li>
<li><a href="/python_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> Python Technologies </a></li>
<li><a href="/sap_tutorials.htm"><i class="fa fa-caret-right"></i> SAP Tutorials </a></li>
<li><a href="/scripting_lnaguage_tutorials.htm"><i class="fa fa-caret-right"></i>Programming Scripts </a></li>
<li><a href="/selected_reading.htm"><i class="fa fa-caret-right"></i> Selected Reading </a></li>
<li><a href="/software_quality_tutorials.htm"><i class="fa fa-caret-right"></i> Software Quality </a></li>
<li><a href="/soft_skill_tutorials.htm"><i class="fa fa-caret-right"></i> Soft Skills </a></li>
<li><a href="/telecom_tutorials.htm"><i class="fa fa-caret-right"></i> Telecom Tutorials </a></li>
<li><a href="/upsc_ias_exams.htm"><i class="fa fa-caret-right"></i> UPSC IAS Exams </a></li>
<li><a href="/web_development_tutorials.htm"><i class="fa fa-caret-right"></i> Web Development </a></li>
<li><a href="/sports_tutorials.htm"><i class="fa fa-caret-right"></i> Sports Tutorials </a></li>
<li><a href="/xml_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> XML Technologies </a></li>
<li><a href="/multi_language_tutorials.htm"><i class="fa fa-caret-right"></i> Multi-Language Tutorials</a></li>
<li><a href="/questions_and_answers.htm"><i class="fa fa-caret-right"></i> Interview Questions</a></li>
</ul>
</li>
</ul>
<div class="clear"></div>
</div> 
</div>
<div class="right-menu">
<div class="toc-toggle">
<a href="javascript:void(0);"><i class="fa fa-bars"></i></a>
</div>
<div class="mobile-search-btn">
<a href="https://www.tutorialspoint.com/search.htm"><i class="fal fa-search"></i></a>
</div>
<div class="search-box">
<form method="get" class="" name="searchform" action="https://www.google.com/search" target="_blank" novalidate="">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com" class="user-valid valid">
<input class="header-search-box" type="text" id="search-string" name="q" placeholder="Search your favorite tutorials..." onfocus="if (this.value == 'Search your favorite tutorials...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search your favorite tutorials...';}" autocomplete="off">
<button><i class="fal fa-search"></i></button>
</form>
</div>
<div class="menu-btn library-btn">
<a href="https://www.tutorialspoint.com/tutorialslibrary.htm"><i class="fal fa-cubes"></i> <span>Library</span></a>
</div>
<div class="menu-btn videos-btn">
<a href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fal fa-video"></i> <span>Videos</span></a> 
</div>
<div class="menu-btn videos-btn">
<a href="https://www.tutorialspoint.com/questions/index.php"><i class="fa fa-location-arrow"></i> <span>Q/A</span></a>
</div>
<div class="menu-btn ebooks-btn">
<a href="https://store.tutorialspoint.com"><i class="fal fa-book"></i> <span>eBooks</span></a>
</div>
<div class="mui-dropdown">
<button class="mui-btn mui-btn--primary" data-mui-toggle="dropdown">
<span class="mui-caret"></span>
</button>
<ul class="mui-dropdown__menu">
<li><a href="https://www.tutorialspoint.com/tutorialslibrary.htm"><i class="fal fa-cubes"></i> <span>Library</span></a></li>
<li><a href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fal fa-video"></i> <span>Videos</span></a></li>
<li><a href="https://store.tutorialspoint.com"><i class="fal fa-book"></i> <span>eBooks</span></a></li>
</ul>
</div>
</div>
</div>
</div>
<!-- Top main-menu Ends Here -->
</header>
<div class="mui-container-fluid content">
<div class="mui-container">
<!-- Tutorial ToC Starts Here -->
<div class="mui-col-md-3 tutorial-toc">
<div class="mini-logo">
<img src="/django/images/django-mini-logo.jpg" alt="Django Tutorial" />
</div>
<ul class="toc chapters">
<li class="heading">Django Tutorial</li>
<li><a href="/django/index.htm">Django - Home</a></li>
<li><a href="/django/django_basics.htm">Django - Basics</a></li>
<li><a href="/django/django_overview.htm">Django - Overview</a></li>
<li><a href="/django/django_environment.htm">Django - Environment</a></li>
<li><a href="/django/django_creating_project.htm">Django - Creating a Project</a></li>
<li><a href="/django/django_apps_life_cycle.htm">Django - Apps Life Cycle</a></li>
<li><a href="/django/django_admin_interface.htm">Django - Admin Interface</a></li>
<li><a href="/django/django_creating_views.htm">Django - Creating Views</a></li>
<li><a href="/django/django_url_mapping.htm">Django - URL Mapping</a></li>
<li><a href="/django/django_template_system.htm">Django - Template System</a></li>
<li><a href="/django/django_models.htm">Django - Models</a></li>
<li><a href="/django/django_page_redirection.htm">Django - Page Redirection</a></li>
<li><a href="/django/django_sending_emails.htm">Django - Sending E-mails</a></li>
<li><a href="/django/django_generic_views.htm">Django - Generic Views</a></li>
<li><a href="/django/django_form_processing.htm">Django - Form Processing</a></li>
<li><a href="/django/django_file_uploading.htm">Django - File Uploading</a></li>
<li><a href="/django/django_apache_setup.htm">Django - Apache Setup</a></li>
<li><a href="/django/django_cookies_handling.htm">Django - Cookies Handling</a></li>
<li><a href="/django/django_sessions.htm">Django - Sessions</a></li>
<li><a href="/django/django_caching.htm">Django - Caching</a></li>
<li><a href="/django/django_comments.htm">Django - Comments</a></li>
<li><a href="/django/django_rss.htm">Django - RSS</a></li>
<li><a href="/django/django_ajax.htm">Django - AJAX</a></li>
</ul>
<ul class="toc chapters">
<li class="heading">Django Useful Resources</li>
<li><a href="/django/django_quick_guide.htm">Django - Quick Guide</a></li>
<li><a href="/django/django_useful_resources.htm">Django - Useful Resources</a></li>
<li><a href="/django/django_discussion.htm">Django - Discussion</a></li>
</ul>
<ul class="toc reading">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="/upsc_ias_exams.htm">UPSC IAS Exams Notes</a></li>
<li><a target="_top" href="/developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="/questions_and_answers.htm">Questions and Answers</a></li>
<li><a target="_top" href="/effective_resume_writing.htm">Effective Resume Writing</a></li>
<li><a target="_top" href="/hr_interview_questions/index.htm">HR Interview Questions</a></li>
<li><a target="_top" href="/computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="/computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div>
<!-- Tutorial ToC Ends Here -->
<!-- Tutorial Content Starts Here -->
<div class="mui-col-md-6 tutorial-content">
<h1>Django - Quick Guide</h1>
<hr />
<div class="top-ad-heading">Advertisements</div>
<div style="text-align: center;">
<script><!--
google_ad_client = "pub-7133395778201029";
var width = document.getElementsByClassName("tutorial-content")[0].clientWidth - 40;
google_ad_width = width;
google_ad_height = 150;
google_ad_format = width + "x150_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="mui-container-fluid button-borders">
<div class="pre-btn">
<a href="/django/django_ajax.htm"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="/django/django_useful_resources.htm">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>
<div class="clearer"></div>
<h1>Django - Basics</h1>
<p>Django is a high-level Python web framework that encourages rapid development and clean, pragmatic design. Django makes it easier to build better web apps quickly and with less code.</p>
<p><b>Note</b> &minus; Django is a registered trademark of the Django Software Foundation, and is licensed under BSD License.</p>
<h2>History of Django</h2>
<ul class="list">
<li><p><b>2003</b> &minus; Started by Adrian Holovaty and Simon Willison as an internal project at the Lawrence Journal-World newspaper.</p></li>
<li><p><b>2005</b> &minus; Released July 2005 and named it Django, after the jazz guitarist Django Reinhardt.</p></li>
<li><p><b>2005</b> &minus; Mature enough to handle several high-traffic sites.</p></li>
<li><p><b>Current</b> &minus; Django is now an open source project with contributors across the world.</p></li>
</ul>
<h2>Django – Design Philosophies</h2>
<p>Django comes with the following design philosophies &minus;</p>
<ul class="list">
<li><p><b>Loosely Coupled</b> &minus; Django aims to make each element of its stack independent of the others.</p></li>
<li><p><b>Less Coding</b> &minus; Less code so in turn a quick development.</p></li>
<li><p><b>Don't Repeat Yourself (DRY)</b> &minus; Everything should be developed only in exactly one place instead of repeating it again and again.</p></li>
<li><p><b>Fast Development</b> &minus; Django's philosophy is to do all it can to facilitate hyper-fast development.</p></li>
<li><p><b>Clean Design</b> &minus; Django strictly maintains a clean design throughout its own code and makes it easy to follow best web-development practices.</p></li>
</ul>
<h2>Advantages of Django</h2>
<p>Here are few advantages of using Django which can be listed out here &minus;</p>
<ul class="list">
<li><p><b>Object-Relational Mapping (ORM) Support</b> &minus; Django provides a bridge between the data model and the database engine, and supports a large set of database systems including MySQL, Oracle, Postgres, etc. Django also supports NoSQL database through Django-nonrel fork. For now, the only NoSQL databases supported are MongoDB and google app engine.</p></li>
<li><p><b>Multilingual Support</b> &minus; Django supports multilingual websites through its built-in internationalization system. So you can develop your website, which would support multiple languages.</p></li>
<li><p><b>Framework Support</b> &minus; Django has built-in support for Ajax, RSS, Caching and various other frameworks.</p></li>
<li><p><b>Administration GUI</b> &minus; Django provides a nice ready-to-use user interface for administrative activities.</p></li>
<li><p><b>Development Environment</b> &minus; Django comes with a lightweight web server to facilitate end-to-end application development and testing.</p></li>
</ul>
<h1>Django - Overview</h1>
<p>As you already know, Django is a Python web framework. And like most modern framework, Django supports the MVC pattern. First let's see what is the Model-View-Controller (MVC) pattern, and then we will look at Django’s specificity for the Model-View-Template (MVT) pattern.</p>
<h2>MVC Pattern</h2>
<p>When talking about applications that provides UI (web or desktop), we usually talk about MVC architecture. And as the name suggests, MVC pattern is based on three components: Model, View, and Controller. <a href="http://www.tutorialspoint.com/struts_2/basic_mvc_architecture.htm">Check our MVC tutorial here</a> to know more.</p>
<h2>DJANGO MVC - MVT Pattern</h2>
<p>The Model-View-Template (MVT) is slightly different from MVC. In fact the main difference between the two patterns is that Django itself takes care of the Controller part (Software Code that controls the interactions between the Model and View), leaving us with the template. The template is a HTML file mixed with Django Template Language (DTL).</p>
<p>The following diagram illustrates how each of the components of the MVT pattern interacts with each other to serve a user request &minus;</p>
<img src="/django/images/django_mvc_mvt_pattern.jpg" alt="DJANGO MVC - MVT Pattern" />
<p>The developer provides the Model, the view and the template then just maps it to a URL and Django does the magic to serve it to the user.</p>
<h1>Django - Environment</h1>
<p>Django development environment consists of installing and setting up Python, Django, and a Database System. Since Django deals with web application, it's worth mentioning that you would need a web server setup as well.</p>
<h2>Step 1 – Installing Python</h2>
<p>Django is written in 100% pure Python code, so you'll need to install Python on your system. Latest Django version requires Python 2.6.5 or higher for the 2.6.x branch or higher than 2.7.3 for the 2.7.x branch.</p>
<p>If you're on one of the latest Linux or Mac OS X distribution, you probably already have Python installed. You can verify it by typing <i>python</i> command at a command prompt. If you see something like this, then Python is installed.</p>
<pre class="result notranslate">
$ python
Python 2.7.5 (default, Jun 17 2014, 18:11:42)
[GCC 4.8.2 20140120 (Red Hat 4.8.2-16)] on linux2
</pre>
<p>Otherwise, you can download and install the latest version of Python from the link <a target="_blank" rel="nofollow" href="https://www.python.org/downloads/">http://www.python.org/download</a>.</p>
<h2>Step 2 - Installing Django</h2>
<p>Installing Django is very easy, but the steps required for its installation depends on your operating system. Since Python is a platform-independent language, Django has one package that works everywhere regardless of your operating system.</p>
<p>You can download the latest version of Django from the link <a target="_blank" rel="nofollow" href="https://www.djangoproject.com/download/">http://www.djangoproject.com/download</a>.</p>
<h3>UNIX/Linux and Mac OS X Installation</h3>
<p>You have two ways of installing Django if you are running Linux or Mac OS system &minus;</p>
<ul class="list">
<li><p>You can use the package manager of your OS, or use easy_install or pip if installed.</p></li>
<li><p>Install it manually using the official archive you downloaded before.</p></li>
</ul>
<p>We will cover the second option as the first one depends on your OS distribution. If you have decided to follow the first option, just be careful about the version of Django you are installing.</p>
<p>Let's say you got your archive from the link above, it should be something like Django-x.xx.tar.gz:</p>
<p>Extract and install.</p>
<pre class="result notranslate">
$ tar xzvf Django-x.xx.tar.gz
$ cd Django-x.xx
$ sudo python setup.py install
</pre>
<p>You can test your installation by running this command &minus;</p>
<pre class="result notranslate">
$ django-admin.py --version
</pre>
<p>If you see the current version of Django printed on the screen, then everything is set.</p>
<p><b>Note</b> &minus; For some version of Django it will be django-admin the ".py" is removed.</p>
<h3>Windows Installation</h3>
<p>We assume you have your Django archive and python installed on your computer.</p>
<p>First, PATH verification.</p>
<p>On some version of windows (windows 7) you might need to make sure the Path system variable has the path the following <code> C:\Python27\;C:\Python27\Lib\site-packages\django\bin\</code> in it, of course depending on your Python version.</p>
<p>Then, extract and install Django.</p>
<pre class="result notranslate">
c:\&gt;cd c:\Django-x.xx
</pre>
<p>Next, install Django by running the following command for which you will need administrative privileges in windows shell "cmd" &minus;</p>
<pre class="result notranslate">
c:\Django-x.xx&gt;python setup.py install
</pre>
<p>To test your installation, open a command prompt and type the following command &minus;</p>
<pre class="result notranslate">
c:\&gt;django-admin.py --version
</pre>
<p>If you see the current version of Django printed on screen, then everything is set.</p>
<p>OR</p>
<p>Launch a "cmd" prompt and type python then &minus;</p>
<pre class="result notranslate">
c:\&gt; python
&gt;&gt;&gt; import django
&gt;&gt;&gt; print django.get_version()
</pre>
<h2>Step 3 – Database Setup</h2>
<p>Django supports several major database engines and you can set up any of them based on your comfort.</p>
<ul class="list">
<li><a target="_blank" rel="nofollow" href="http://www.mysql.com/">MySQL (http://www.mysql.com/)</a></li>
<li><a target="_blank" rel="nofollow" href="http://www.postgresql.org/">PostgreSQL (http://www.postgresql.org/)</a></li>
<li><a target="_blank" rel="nofollow" href="http://www.sqlite.org/">SQLite 3 (http://www.sqlite.org/)</a></li>
<li><a target="_blank" rel="nofollow" href="http://www.oracle.com/index.html">Oracle (http://www.oracle.com/)</a></li>
<li><a target="_blank" rel="nofollow" href="https://django-mongodb-engine.readthedocs.org/en/latest/">MongoDb (https://django-mongodb-engine.readthedocs.org)</a></li>
<li><a target="_blank" rel="nofollow" href="https://cloud.google.com/appengine/articles/django-nonrel">GoogleAppEngine Datastore (https://cloud.google.com/appengine/articles/django-nonrel)</a></li>
</ul>
<p>You can refer to respective documentation to installing and configuring a database of your choice.</p>
<p><b>Note</b> &minus; Number 5 and 6 are NoSQL databases.</p>
<h2>Step 4 – Web Server</h2>
<p>Django comes with a lightweight web server for developing and testing applications. This server is pre-configured to work with Django, and more importantly, it restarts whenever you modify the code.</p>
<p>However, Django does support Apache and other popular web servers such as Lighttpd. We will discuss both the approaches in coming chapters while working with different examples.</p>
<h1>Django - Creating a Project</h1>
<p>Now that we have installed Django, let's start using it. In Django, every web app you want to create is called a project; and a project is a sum of applications. An application is a set of code files relying on the MVT pattern. As example let's say we want to build a website, the website is our project and, the forum, news, contact engine are applications. This structure makes it easier to move an application between projects since every application is independent.</p>
<h2>Create a Project</h2>
<p>Whether you are on Windows or Linux, just get a terminal or a <b>cmd</b> prompt and navigate to the place you want your project to be created, then use this code &minus;</p>
<pre class="result notranslate">
$ django-admin startproject myproject
</pre>
<p>This will create a "myproject" folder with the following structure &minus;</p>
<pre class="result notranslate">
myproject/
   manage.py
   myproject/
      __init__.py
      settings.py
      urls.py
      wsgi.py
</pre>
<h2>The Project Structure</h2>
<p>The “myproject” folder is just your project container, it actually contains two elements &minus;</p>
<ul class="list">
<li><p><b>manage.py</b> &minus; This file is kind of your project local django-admin for interacting with your project via command line (start the development server, sync db...). To get a full list of command accessible via manage.py you can use the code &minus;</p></li>
</ul>
<pre class="result notranslate">
$ python manage.py help
</pre>
<ul class="list">
<li><p><b>The “myproject” subfolder</b> &minus; This folder is the actual python package of your project. It contains four files &minus;</p>
<ul class="list">
<li><p><b>__init__.py</b> &minus; Just for python, treat this folder as package.</p></li>
<li><p><b>settings.py</b> &minus; As the name indicates, your project settings.</p></li>
<li><p><b>urls.py</b> &minus; All links of your project and the function to call. A kind of ToC of your project.</p></li>
<li><p><b>wsgi.py</b> &minus; If you need to deploy your project over WSGI.</p></li>
</ul>
</li>
</ul>
<h2>Setting Up Your Project</h2>
<p>Your project is set up in the subfolder myproject/settings.py. Following are some important options you might need to set &minus;</p>
<pre class="result notranslate">
DEBUG = True
</pre>
<p>This option lets you set if your project is in debug mode or not. Debug mode lets you get more information about your project's error. Never set it to ‘True’ for a live project. However, this has to be set to ‘True’ if you want the Django light server to serve static files. Do it only in the development mode.</p>
<pre class="prettyprint notranslate">
DATABASES = {
   'default': {
      'ENGINE': 'django.db.backends.sqlite3',
      'NAME': 'database.sql',
      'USER': '',
      'PASSWORD': '',
      'HOST': '',
      'PORT': '',
   }
}
</pre>
<p>Database is set in the ‘Database’ dictionary. The example above is for SQLite engine. As stated earlier, Django also supports &minus;</p>
<ul class="list">
<li>MySQL (django.db.backends.mysql)</li>
<li>PostGreSQL (django.db.backends.postgresql_psycopg2)</li>
<li>Oracle (django.db.backends.oracle) and NoSQL DB</li>
<li>MongoDB (django_mongodb_engine)</li>
</ul>
<p>Before setting any new engine, make sure you have the correct db driver installed.</p>
<p>You can also set others options like: TIME_ZONE, LANGUAGE_CODE, TEMPLATE…</p>
<p>Now that your project is created and configured make sure it's working &minus;</p>
<pre class="result notranslate">
$ python manage.py runserver
</pre>
<p>You will get something like the following on running the above code &minus;</p>
<pre class="result notranslate">
Validating models...

0 errors found
September 03, 2015 - 11:41:50
Django version 1.6.11, using settings 'myproject.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
</pre>
<h1>Django - Apps Life Cycle</h1>
<p>A project is a sum of many applications. Every application has an objective and can be reused into another project, like the contact form on a website can be an application, and can be reused for others. See it as a module of your project.</p>
<h2>Create an Application</h2>
<p>We assume you are in your project folder. In our main “myproject” folder, the same folder then manage.py &minus;</p>
<pre class="result notranslate">
$ python manage.py startapp myapp
</pre>
<p>You just created myapp application and like project, Django create a “myapp” folder with the application structure &minus;</p>
<pre class="result notranslate">
myapp/
   __init__.py
   admin.py
   models.py
   tests.py
   views.py
</pre>
<ul class="list">
<li><p><b>__init__.py</b> &minus; Just to make sure python handles this folder as a package.</p></li>
<li><p><b>admin.py</b> &minus; This file helps you make the app modifiable in the admin interface.</p></li>
<li><p><b>models.py</b> &minus; This is where all the application models are stored.</p></li>
<li><p><b>tests.py</b> &minus; This is where your unit tests are.</p></li>
<li><p><b>views.py</b> &minus; This is where your application views are.</p></li>
</ul>
<h2>Get the Project to Know About Your Application</h2>
<p>At this stage we have our "myapp" application, now we need to register it with our Django project "myproject". To do so, update INSTALLED_APPS tuple in the settings.py file of your project (add your app name) &minus;</p>
<pre class="prettyprint notranslate">
INSTALLED_APPS = (
   'django.contrib.admin',
   'django.contrib.auth',
   'django.contrib.contenttypes',
   'django.contrib.sessions',
   'django.contrib.messages',
   'django.contrib.staticfiles',
   'myapp',
)
</pre>
<h1>Django - Admin Interface</h1>
<p>Django provides a ready-to-use user interface for administrative activities. We all know how an admin interface is important for a web project. Django automatically generates admin UI based on your project models.</p>
<h2>Starting the Admin Interface</h2>
<p>The Admin interface depends on the django.countrib module. To have it working you need to make sure some modules are imported in the INSTALLED_APPS and MIDDLEWARE_CLASSES tuples of the myproject/settings.py file.</p>
<p>For INSTALLED_APPS make sure you have &minus;</p>
<pre class="prettyprint notranslate">
INSTALLED_APPS = (
   'django.contrib.admin',
   'django.contrib.auth',
   'django.contrib.contenttypes',
   'django.contrib.sessions',
   'django.contrib.messages',
   'django.contrib.staticfiles',
   'myapp',
)
</pre>
<p>For MIDDLEWARE_CLASSES &minus;</p>
<pre class="prettyprint notranslate">
MIDDLEWARE_CLASSES = (
   'django.contrib.sessions.middleware.SessionMiddleware',
   'django.middleware.common.CommonMiddleware',
   'django.middleware.csrf.CsrfViewMiddleware',
   'django.contrib.auth.middleware.AuthenticationMiddleware',
   'django.contrib.messages.middleware.MessageMiddleware',
   'django.middleware.clickjacking.XFrameOptionsMiddleware',
)
</pre>
<p>Before launching your server, to access your Admin Interface, you need to initiate the database &minus;</p>
<pre class="result notranslate">
$ python manage.py migrate
</pre>
<p>syncdb will create necessary tables or collections depending on your db type, necessary for the admin interface to run. Even if you don't have a superuser, you will be prompted to create one.</p>
<p>If you already have a superuser or have forgotten it, you can always create one using the following code &minus;</p>
<pre class="result notranslate">
$ python manage.py createsuperuser
</pre>
<p>Now to start the Admin Interface, we need to make sure we have configured a URL for our admin interface. Open the myproject/url.py and you should have something like &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
   # Examples:
   # url(r'^$', 'myproject.views.home', name = 'home'),
   # url(r'^blog/', include('blog.urls')),

   url(r'^admin/', include(admin.site.urls)),
)
</pre>
<p>Now just run the server.</p>
<pre class="result notranslate">
$ python manage.py runserver
</pre>
<p>And your admin interface is accessible at: http://127.0.0.1:8000/admin/</p>
<img src="/django/images/admin_interface.jpg" alt="Admin Interface" />
<p>Once connected with your superuser account, you will see the following screen &minus;</p>
<img src="/django/images/super_user_account.jpg" alt="Super User Account" />
<p>That interface will let you administrate Django groups and users, and all registered models in your app. The interface gives you the ability to do at least the "CRUD" (Create, Read, Update, Delete) operations on your models.</p>
<h1>Django - Creating Views</h1>
<p>A view function, or “view” for short, is simply a Python function that takes a web request and returns a web response. This response can be the HTML contents of a Web page, or a redirect, or a 404 error, or an XML document, or an image, etc. Example: You use view to create web pages, note that you need to associate a view to a URL to see it as a web page.</p>
<p>In Django, views have to be created in the app views.py file.</p>
<h2>Simple View</h2>
<p>We will create a simple view in myapp to say "welcome to my app!"</p>
<p>See the following view &minus;</p>
<pre class="prettyprint notranslate">
from django.http import HttpResponse

def hello(request):
   text = """&lt;h1&gt;welcome to my app !&lt;/h1&gt;"""
   return HttpResponse(text)
</pre>
<p>In this view, we use HttpResponse to render the HTML (as you have probably noticed we have the HTML hard coded in the view). To see this view as a page we just need to map it to a URL (this will be discussed in an upcoming chapter).</p>
<p>We used HttpResponse to render the HTML in the view before. This is not the best way to render pages. Django supports the MVT pattern so to make the precedent view, Django - MVT like, we will need &minus;</p>
<p>A template: myapp/templates/hello.html</p>
<p>And now our view will look like &minus;</p>
<pre class="prettyprint notranslate">
from django.shortcuts import render

def hello(request):
   return render(request, "myapp/template/hello.html", {})
</pre>
<p>Views can also accept parameters &minus;</p>
<pre class="prettyprint notranslate">
from django.http import HttpResponse

def hello(request, number):
   text = "&lt;h1&gt;welcome to my app number %s!&lt;/h1&gt;"% number
   return HttpResponse(text)
</pre>
<p>When linked to a URL, the page will display the number passed as a parameter. Note that the parameters will be passed via the URL (discussed in the next chapter).</p>
<h1>Django - URL Mapping</h1>
<p>Now that we have a working view as explained in the previous chapters. We want to access that view via a URL. Django has his own way for URL mapping and it's done by editing your project url.py file <b>(myproject/url.py)</b>. The url.py file looks like &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
   #Examples
   #url(r'^$', 'myproject.view.home', name = 'home'),
   #url(r'^blog/', include('blog.urls')),

   url(r'^admin', include(admin.site.urls)),
)
</pre>
<p>When a user makes a request for a page on your web app, Django controller takes over to look for the corresponding view via the url.py file, and then return the HTML response or a 404 not found error, if not found. In url.py, the most important thing is the <b>"urlpatterns"</b> tuple. It’s where you define the mapping between URLs and views. A mapping is a tuple in URL patterns like &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
   #Examples
   #url(r'^$', 'myproject.view.home', name = 'home'),
   #url(r'^blog/', include('blog.urls')),

   url(r'^admin', include(admin.site.urls)),
   url(r'^hello/', 'myapp.views.hello', name = 'hello'),
)
</pre>
<p>The marked line maps the URL "/home" to the hello view created in myapp/view.py file. As you can see above a mapping is composed of three elements &minus;</p>
<ul class="list">
<li><p><b>The pattern</b> &minus; A regexp matching the URL you want to be resolved and map. Everything that can work with the python 're' module is eligible for the pattern (useful when you want to pass parameters via url).</p></li>
<li><p><b>The python path to the view</b> &minus; Same as when you are importing a module.</p></li>
<li><p><b>The name</b> &minus; In order to perform URL reversing, you’ll need to use named URL patterns as done in the examples above. Once done, just start the server to access your view via :http://127.0.0.1/hello</p></li>
</ul>
<h2>Organizing Your URLs</h2>
<p>So far, we have created the URLs in “myprojects/url.py” file, however as stated earlier about Django and creating an app, the best point was to be able to reuse applications in different projects. You can easily see what the problem is, if you are saving all your URLs in the “projecturl.py” file. So best practice is to create an “url.py” per application and to include it in our main projects url.py file (we included admin URLs for admin interface before).</p>
<img src="/django/images/organize_urls.jpg" alt="Organize URLs" />
<h2>How is it Done?</h2>
<p>We need to create an url.py file in myapp using the following code &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, include, url

urlpatterns = patterns('', url(r'^hello/', 'myapp.views.hello', name = 'hello'),)
</pre>
<p>Then myproject/url.py will change to the following &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
   #Examples
   #url(r'^$', 'myproject.view.home', name = 'home'),
   #url(r'^blog/', include('blog.urls')),

   url(r'^admin', include(admin.site.urls)),
   url(r'^myapp/', include('myapp.urls')),
)
</pre>
<p>We have included all URLs from myapp application. The home.html that was accessed through “/hello” is now “/myapp/hello” which is a better and more understandable structure for the web app.</p>
<img src="/django/images/myproject.jpg" alt="Myproject" />
<p>Now let's imagine we have another view in myapp “morning” and we want to map it in myapp/url.py, we will then change our myapp/url.py to &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, include, url

urlpatterns = patterns('',
   url(r'^hello/', 'myapp.views.hello', name = 'hello'),
   url(r'^morning/', 'myapp.views.morning', name = 'morning'),
)
</pre>
<p>This can be re-factored to &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, include, url

urlpatterns = patterns('myapp.views',
   url(r'^hello/', 'hello', name = 'hello'),
   url(r'^morning/', 'morning', name = 'morning'),)
</pre>
<p>As you can see, we now use the first element of our <b>urlpatterns</b> tuple. This can be useful when you want to change your app name.</p>
<img src="/django/images/urlpatterns.jpg" alt="URL Patterns" />
<h2>Sending Parameters to Views</h2>
<p>We now know how to map URL, how to organize them, now let us see how to send parameters to views. A classic sample is the article example (you want to access an article via “/articles/article_id”).</p>
<p>Passing parameters is done by capturing them with the <b>regexp</b> in the URL pattern. If we have a view like the following one in “myapp/view.py”</p>
<pre class="prettyprint notranslate">
from django.shortcuts import render
from django.http import HttpResponse

def hello(request):
   return render(request, "hello.html", {})

def viewArticle(request, articleId):
   text = "Displaying article Number : %s"%articleId
   return HttpResponse(text)
</pre>
<p>We want to map it in myapp/url.py so we can access it via “/myapp/article/articleId”, we need the following in “myapp/url.py” &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, include, url

urlpatterns = patterns('myapp.views',
   url(r'^hello/', 'hello', name = 'hello'),
   url(r'^morning/', 'morning', name = 'morning'),
   url(r'^article/(\d+)/', 'viewArticle', name = 'article'),)
</pre>
<p>When Django will see the url: “/myapp/article/42” it will pass the parameters '42' to the viewArticle view, and in your browser you should get the following result &minus;</p>
<img src="/django/images/passing_parameters_to_viewarticle.jpg" alt="Passing parameters to viewArticle" />
<p>Note that the order of parameters is important here. Suppose we want the list of articles of a month of a year, let's add a viewArticles view. Our view.py becomes &minus;</p>
<pre class="prettyprint notranslate">
from django.shortcuts import render
from django.http import HttpResponse

def hello(request):
   return render(request, "hello.html", {})

def viewArticle(request, articleId):
   text = "Displaying article Number : %s"%articleId
   return HttpResponse(text)

def viewArticles(request, month, year):
   text = "Displaying articles of : %s/%s"%(year, month)
   return HttpResponse(text)
</pre>
<p>The corresponding <b>url.py</b> file will look like &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, include, url

urlpatterns = patterns('myapp.views',
   url(r'^hello/', 'hello', name = 'hello'),
   url(r'^morning/', 'morning', name = 'morning'),
   url(r'^article/(\d+)/', 'viewArticle', name = 'article'),
   url(r'^articles/(\d{2})/(\d{4})', 'viewArticles', name = 'articles'),)
</pre>
<p>Now when you go to “/myapp/articles/12/2006/” you will get 'Displaying articles of: 2006/12' but if you reverse the parameters you won’t get the same result.</p>
<img src="/django/images/displaying_articles.jpg" alt="Displaying Articles" />
<p>To avoid that, it is possible to link a URL parameter to the view parameter. For that, our <b>url.py</b> will become &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, include, url

urlpatterns = patterns('myapp.views',
   url(r'^hello/', 'hello', name = 'hello'),
   url(r'^morning/', 'morning', name = 'morning'),
   url(r'^article/(\d+)/', 'viewArticle', name = 'article'),
   url(r'^articles/(?P\d{2})/(?P\d{4})', 'viewArticles', name = 'articles'),)
</pre>
<h1>Django - Template System</h1>
<p>Django makes it possible to separate python and HTML, the python goes in views and HTML goes in templates. To link the two, Django relies on the render function and the Django Template language.</p>
<h2>The Render Function</h2>
<p>This function takes three parameters &minus;</p>
<ul class="list">
<li><p><b>Request</b> &minus; The initial request.</p></li>
<li><p><b>The path to the template</b> &minus; This is the path relative to the TEMPLATE_DIRS option in the project settings.py variables.</p></li>
<li><p><b>Dictionary of parameters</b> &minus; A dictionary that contains all variables needed in the template. This variable can be created or you can use locals() to pass all local variable declared in the view.</p></li>
</ul>
<h2>Django Template Language (DTL)</h2>
<p>Django’s template engine offers a mini-language to define the user-facing layer of the application.</p>
<h3>Displaying Variables</h3>
<p>A variable looks like this: {{variable}}. The template replaces the variable by the variable sent by the view in the third parameter of the render function. Let's change our hello.html to display today’s date &minus;</p>
<p><b>hello.html</b></p>
<pre class="prettyprint notranslate">
&lt;html&gt;
   
   &lt;body&gt;
      Hello World!!!&lt;p&gt;Today is {{today}}&lt;/p&gt;
   &lt;/body&gt;
   
&lt;/html&gt;
</pre>
<p>Then our view will change to &minus;</p>
<pre class="prettyprint notranslate">
def hello(request):
   today = datetime.datetime.now().date()
   return render(request, "hello.html", {"today" : today})
</pre>
<p>We will now get the following output after accessing the URL/myapp/hello &minus;</p>
<pre class="result notranslate">
Hello World!!!
Today is Sept. 11, 2015
</pre>
<p>As you have probably noticed, if the variable is not a string, Django will use the __str__ method to display it; and with the same principle you can access an object attribute just like you do it in Python. For example: if we wanted to display the date year, my variable would be: {{today.year}}.</p>
<h2>Filters</h2>
<p>They help you modify variables at display time. Filters structure looks like the following: {{var|filters}}.</p>
<p><b>Some examples</b> &minus;</p>
<ul class="list">
<li><p><b>{{string|truncatewords:80}}</b> &minus; This filter will truncate the string, so you will see only the first 80 words.</p></li>
<li><p><b>{{string|lower}}</b> &minus; Converts the string to lowercase.</p></li>
<li><p><b>{{string|escape|linebreaks}}</b> &minus; Escapes string contents, then converts line breaks to tags.</p></li>
</ul>
<p>You can also set the default for a variable.</p>
<h2>Tags</h2>
<p>Tags lets you perform the following operations: if condition, for loop, template inheritance and more.</p>
<h3>Tag if</h3>
<p>Just like in Python you can use if, else and elif in your template &minus;</p>
<pre class="prettyprint notranslate">
&lt;html&gt;
   &lt;body&gt;
   
      Hello World!!!&lt;p&gt;Today is {{today}}&lt;/p&gt;
      We are
      {% if today.day == 1 %}
      
      the first day of month.
      {% elif today.day == 30 %}
      
      the last day of month.
      {% else %}
      
      I don't know.
      {%endif%}
      
   &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>In this new template, depending on the date of the day, the template will render a certain value.</p>
<h3>Tag for</h3>
<p>Just like 'if', we have the 'for' tag, that works exactly like in Python. Let's change our hello view to transmit a list to our template &minus;</p>
<pre class="prettyprint notranslate">
def hello(request):
   today = datetime.datetime.now().date()
   
   daysOfWeek = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
   return render(request, "hello.html", {"today" : today, "days_of_week" : daysOfWeek})
</pre>
<p>The template to display that list using {{ for }} &minus;</p>
<pre class="prettyprint notranslate">
&lt;html&gt;
   &lt;body&gt;
      
      Hello World!!!&lt;p&gt;Today is {{today}}&lt;/p&gt;
      We are
      {% if today.day == 1 %}
      
      the first day of month.
      {% elif today.day == 30 %}
      
      the last day of month.
      {% else %}
      
      I don't know.
      {%endif%}
      
      &lt;p&gt;
         {% for day in days_of_week %}
         {{day}}
      &lt;/p&gt;
		
      {% endfor %}
      
   &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>And we should get something like &minus;</p>
<pre class="result notranslate">
Hello World!!!
Today is Sept. 11, 2015
We are I don't know.
Mon
Tue
Wed
Thu
Fri
Sat
Sun
</pre>
<h3>Block and Extend Tags</h3>
<p>A template system cannot be complete without template inheritance. Meaning when you are designing your templates, you should have a main template with holes that the child's template will fill according to his own need, like a page might need a special css for the selected tab.</p>
<p>Let’s change the hello.html template to inherit from a main_template.html.</p>
<p><b>main_template.html</b></p>
<pre class="prettyprint notranslate">
&lt;html&gt;
   &lt;head&gt;
      
      &lt;title&gt;
         {% block title %}Page Title{% endblock %}
      &lt;/title&gt;
      
   &lt;/head&gt;
	
   &lt;body&gt;
   
      {% block content %}
         Body content
      {% endblock %}
      
   &lt;/body&gt;
&lt;/html&gt;
</pre>
<p><b>hello.html</b></p>
<pre class="prettyprint notranslate">
{% extends "main_template.html" %}
{% block title %}My Hello Page{% endblock %}
{% block content %}

Hello World!!!&lt;p&gt;Today is {{today}}&lt;/p&gt;
We are
{% if today.day == 1 %}

the first day of month.
{% elif today.day == 30 %}

the last day of month.
{% else %}

I don't know.
{%endif%}

&lt;p&gt;
   {% for day in days_of_week %}
   {{day}}
&lt;/p&gt;

{% endfor %}
{% endblock %}
</pre>
<p>In the above example, on calling /myapp/hello we will still get the same result as before but now we rely on extends and block to refactor our code &minus;</p>
<p>In the main_template.html we define blocks using the tag block. The title block will contain the page title and the content block will have the page main content. In home.html we use extends to inherit from the main_template.html then we fill the block define above (content and title).</p>
<h3>Comment Tag</h3>
<p>The comment tag helps to define comments into templates, not HTML comments, they won’t appear in HTML page. It can be useful for documentation or just commenting a line of code.</p>
<h1>Django - Models</h1>
<p>A model is a class that represents table or collection in our DB, and where every attribute of the class is a field of the table or collection. Models are defined in the app/models.py (in our example: myapp/models.py)</p>
<h2>Creating a Model</h2>
<p>Following is a Dreamreal model created as an example &minus;</p>
<pre class="prettyprint notranslate">
from django.db import models

class Dreamreal(models.Model):

   website = models.CharField(max_length = 50)
   mail = models.CharField(max_length = 50)
   name = models.CharField(max_length = 50)
   phonenumber = models.IntegerField()

   class Meta:
      db_table = "dreamreal"
</pre>
<p>Every model inherits from django.db.models.Model.</p>
<p>Our class has 4 attributes (3 CharField and 1 Integer), those will be the table fields.</p>
<p>The Meta class with the db_table attribute lets us define the actual table or collection name. Django names the table or collection automatically: myapp_modelName. This class will let you force the name of the table to what you like.</p>
<p>There is more field's type in django.db.models, you can learn more about them on <a target="_blank" rel="nofollow" href="https://docs.djangoproject.com/en/1.5/ref/models/fields/#field-types">https://docs.djangoproject.com/en/1.5/ref/models/fields/#field-types</a></p>
<p>After creating your model, you will need Django to generate the actual database &minus;</p>
<pre class="result notranslate">
$python manage.py syncdb
</pre>
<h3>Manipulating Data (CRUD)</h3>
<p>Let's create a "crudops" view to see how we can do CRUD operations on models. Our myapp/views.py will then look like &minus;</p>
<p><b>myapp/views.py</b></p>
<pre class="prettyprint notranslate">
from myapp.models import Dreamreal
from django.http import HttpResponse

def crudops(request):
   #Creating an entry
   
   dreamreal = Dreamreal(
      website = "www.polo.com", mail = "sorex@polo.com", 
      name = "sorex", phonenumber = "002376970"
   )
   
   dreamreal.save()
   
   #Read ALL entries
   objects = Dreamreal.objects.all()
   res ='Printing all Dreamreal entries in the DB : &lt;br&gt;'
   
   for elt in objects:
      res &plus;= elt.name+"&lt;br&gt;"
   
   #Read a specific entry:
   sorex = Dreamreal.objects.get(name = "sorex")
   res &plus;= 'Printing One entry &lt;br&gt;'
   res &plus;= sorex.name
   
   #Delete an entry
   res &plus;= '&lt;br&gt; Deleting an entry &lt;br&gt;'
   sorex.delete()
   
   #Update
   dreamreal = Dreamreal(
      website = "www.polo.com", mail = "sorex@polo.com", 
      name = "sorex", phonenumber = "002376970"
   )
   
   dreamreal.save()
   res &plus;= 'Updating entry&lt;br&gt;'
   
   dreamreal = Dreamreal.objects.get(name = 'sorex')
   dreamreal.name = 'thierry'
   dreamreal.save()
   
   return HttpResponse(res)
</pre>
<h3>Other Data Manipulation</h3>
<p>Let's explore other manipulations we can do on Models. Note that the CRUD operations were done on instances of our model, now we will be working directly with the class representing our model.</p>
<p>Let's create a 'datamanipulation' view in <b>myapp/views.py</b></p>
<pre class="prettyprint notranslate">
from myapp.models import Dreamreal
from django.http import HttpResponse

def datamanipulation(request):
   res = ''
   
   #Filtering data:
   qs = Dreamreal.objects.filter(name = "paul")
   res &plus;= "Found : %s results&lt;br&gt;"%len(qs)
   
   #Ordering results
   qs = Dreamreal.objects.order_by("name")
   
   for elt in qs:
      res &plus;= elt.name &plus; '&lt;br&gt;'
   
   return HttpResponse(res)
</pre>
<h2>Linking Models</h2>
<p>Django ORM offers 3 ways to link models &minus;</p>
<p>One of the first case we will see here is the one-to-many relationships. As you can see in the above example, Dreamreal company can have multiple online websites. Defining that relation is done by using django.db.models.ForeignKey &minus;</p>
<p><b>myapp/models.py</b></p>
<pre class="prettyprint notranslate">
from django.db import models

class Dreamreal(models.Model):
   website = models.CharField(max_length = 50)
   mail = models.CharField(max_length = 50)
   name = models.CharField(max_length = 50)
   phonenumber = models.IntegerField()
   online = models.ForeignKey('Online', default = 1)
   
   class Meta:
      db_table = "dreamreal"

class Online(models.Model):
      domain = models.CharField(max_length = 30)
   
   class Meta:
      db_table = "online"
</pre>
<p>As you can see in our updated myapp/models.py, we added the online model and linked it to our Dreamreal model.</p>
<p>Let's check how all of this is working via manage.py shell &minus;</p>
<p>First let’s create some companies (Dreamreal entries) for testing in our Django shell &minus;</p>
<pre class="prettyprint notranslate">
$python manage.py shell

&gt;&gt;&gt; from myapp.models import Dreamreal, Online
&gt;&gt;&gt; dr1 = Dreamreal()
&gt;&gt;&gt; dr1.website = 'company1.com'
&gt;&gt;&gt; dr1.name = 'company1'
&gt;&gt;&gt; dr1.mail = 'contact@company1'
&gt;&gt;&gt; dr1.phonenumber = '12345'
&gt;&gt;&gt; dr1.save()
&gt;&gt;&gt; dr2 = Dreamreal()
&gt;&gt;&gt; dr1.website = 'company2.com'
&gt;&gt;&gt; dr2.website = 'company2.com'
&gt;&gt;&gt; dr2.name = 'company2'
&gt;&gt;&gt; dr2.mail = 'contact@company2'
&gt;&gt;&gt; dr2.phonenumber = '56789'
&gt;&gt;&gt; dr2.save()
</pre>
<p>Now some hosted domains &minus;</p>
<pre class="prettyprint notranslate">
&gt;&gt;&gt; on1 = Online()
&gt;&gt;&gt; on1.company = dr1
&gt;&gt;&gt; on1.domain = "site1.com"
&gt;&gt;&gt; on2 = Online()
&gt;&gt;&gt; on2.company = dr1
&gt;&gt;&gt; on2.domain = "site2.com"
&gt;&gt;&gt; on3 = Online()
&gt;&gt;&gt; on3.domain = "site3.com"
&gt;&gt;&gt; dr2 = Dreamreal.objects.all()[2]
&gt;&gt;&gt; on3.company = dr2
&gt;&gt;&gt; on1.save()
&gt;&gt;&gt; on2.save()
&gt;&gt;&gt; on3.save()
</pre>
<p>Accessing attribute of the hosting company (Dreamreal entry) from an online domain is simple &minus;</p>
<pre class="result notranslate">
&gt;&gt;&gt; on1.company.name
</pre>
<p>And if we want to know all the online domain hosted by a Company in Dreamreal we will use the code &minus;</p>
<pre class="result notranslate">
&gt;&gt;&gt; dr1.online_set.all()
</pre>
<p>To get a QuerySet, note that all manipulating method we have seen before (filter, all, exclude, order_by....)</p>
<p>You can also access the linked model attributes for filtering operations, let's say you want to get all online domains where the Dreamreal name contains 'company' &minus;</p>
<pre class="result notranslate">
&gt;&gt;&gt; Online.objects.filter(company__name__contains = 'company'
</pre>
<p><b>Note</b> &minus; That kind of query is just supported for SQL DB. It won’t work for non-relational DB where joins doesn’t exist and there are two '_'.</p>
<p>But that's not the only way to link models, you also have OneToOneField, a link that guarantees that the relation between two objects is unique. If we used the OneToOneField in our example above, that would mean for every Dreamreal entry only one Online entry is possible and in the other way to.</p>
<p>And the last one, the ManyToManyField for (n-n) relation between tables. Note, those are relevant for SQL based DB.</p>
<h1>Django - Page Redirection</h1>
<p>Page redirection is needed for many reasons in web application. You might want to redirect a user to another page when a specific action occurs, or basically in case of error. For example, when a user logs in to your website, he is often redirected either to the main home page or to his personal dashboard. In Django, redirection is accomplished using the 'redirect' method.</p>
<p>The 'redirect' method takes as argument: The URL you want to be redirected to as string A view's name.</p>
<p>The myapp/views looks like the following so far &minus;</p>
<pre class="prettyprint notranslate">
def hello(request):
   today = datetime.datetime.now().date()
   daysOfWeek = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
   return render(request, "hello.html", {"today" : today, "days_of_week" : daysOfWeek})
	
def viewArticle(request, articleId):
   """ A view that display an article based on his ID"""
   text = "Displaying article Number : %s" %articleId
   return HttpResponse(text)
	
def viewArticles(request, year, month):
   text = "Displaying articles of : %s/%s"%(year, month)
   return HttpResponse(text)
</pre>
<p>Let's change the hello view to redirect to djangoproject.com and our viewArticle to redirect to our internal '/myapp/articles'. To do so the myapp/view.py will change to &minus;</p>
<pre class="prettyprint notranslate">
from django.shortcuts import render, redirect
from django.http import HttpResponse
import datetime

# Create your views here.
def hello(request):
   today = datetime.datetime.now().date()
   daysOfWeek = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
   return redirect("https://www.djangoproject.com")
	
def viewArticle(request, articleId):
   """ A view that display an article based on his ID"""
   text = "Displaying article Number : %s" %articleId
   return redirect(viewArticles, year = "2045", month = "02")
	
def viewArticles(request, year, month):
   text = "Displaying articles of : %s/%s"%(year, month)
   return HttpResponse(text)
</pre>
<p>In the above example, first we imported redirect from django.shortcuts and for redirection to the Django official website we just pass the full URL to the 'redirect' method as string, and for the second example (the viewArticle view) the 'redirect' method takes the view name and his parameters as arguments.</p>
<p>Accessing /myapp/hello, will give you the following screen &minus;</p>
<img src="/django/images/django_page_redirection_example1.jpg" alt="Django page Redirection Example1" />
<p>And accessing /myapp/article/42, will give you the following screen &minus;</p>
<img src="/django/images/django_page_redirection_example2.jpg" alt="Django page Redirection Example2" />
<p>It is also possible to specify whether the 'redirect' is temporary or permanent by adding permanent = True parameter. The user will see no difference, but these are details that search engines take into account when ranking of your website.</p>
<p>Also remember that 'name' parameter we defined in our url.py while mapping the URLs &minus;</p>
<pre class="result notranslate">
url(r'^articles/(?P\d{2})/(?P\d{4})/', 'viewArticles', name = 'articles'),
</pre>
<p>That name (here article) can be used as argument for the 'redirect' method, then our viewArticle redirection can be changed from &minus;</p>
<pre class="prettyprint notranslate">
def viewArticle(request, articleId):
   """ A view that display an article based on his ID"""
   text = "Displaying article Number : %s" %articleId
   return redirect(viewArticles, year = "2045", month = "02")
</pre>
<p><b>To</b> &minus;</p>
<pre class="prettyprint notranslate">
def viewArticle(request, articleId):
   """ A view that display an article based on his ID"""
   text = "Displaying article Number : %s" %articleId
   return redirect(articles, year = "2045", month = "02")
</pre>
<p><b>Note</b> &minus; There is also a function to generate URLs; it is used in the same way as redirect; the 'reverse' method (django.core.urlresolvers.reverse). This function does not return a HttpResponseRedirect object, but simply a string containing the URL to the view compiled with any passed argument.</p>
<h1>Django - Sending E-mails</h1>
<p>Django comes with a ready and easy-to-use light engine to send e-mail. Similar to Python you just need an import of smtplib. In Django you just need to import django.core.mail. To start sending e-mail, edit your project settings.py file and set the following options &minus;</p>
<ul class="list">
<li><p><b>EMAIL_HOST</b> &minus; smtp server.</p></li>
<li><p><b>EMAIL_HOST_USER</b> &minus; Login credential for the smtp server.</p></li>
<li><p><b>EMAIL_HOST_PASSWORD</b> &minus; Password credential for the smtp server.</p></li>
<li><p><b>EMAIL_PORT</b> &minus; smtp server port.</p></li>
<li><p><b>EMAIL_USE_TLS or _SSL</b> &minus; True if secure connection.</p></li>
</ul>
<h2>Sending a Simple E-mail</h2>
<p>Let's create a "sendSimpleEmail" view to send a simple e-mail.</p>
<pre class="prettyprint notranslate">
from django.core.mail import send_mail
from django.http import HttpResponse

def sendSimpleEmail(request,emailto):
   res = send_mail("hello paul", "comment tu vas?", "paul@polo.com", [emailto])
   return HttpResponse('%s'%res)
</pre>
<p>Here is the details of the parameters of send_mail &minus;</p>
<ul class="list">
<li><p><b>subject</b> &minus; E-mail subject.</p></li>
<li><p><b>message</b> &minus; E-mail body.</p></li>
<li><p><b>from_email</b> &minus; E-mail from.</p></li>
<li><p><b>recipient_list</b> &minus; List of receivers’ e-mail address.</p></li>
<li><p><b>fail_silently</b> &minus; Bool, if false send_mail will raise an exception in case of error.</p></li>
<li><p><b>auth_user</b> &minus; User login if not set in settings.py.</p></li>
<li><p><b>auth_password</b> &minus; User password if not set in settings.py.</p></li>
<li><p><b>connection</b> &minus; E-mail backend.</p></li>
<li><p><b>html_message</b> &minus; (new in Django 1.7) if present, the e-mail will be multipart/alternative.</p></li>
</ul>
<p>Let's create a URL to access our view &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, url

urlpatterns = paterns('myapp.views', url(r'^simpleemail/(?P&lt;emailto&gt;
   [\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4})/', 
   'sendSimpleEmail' , name = 'sendSimpleEmail'),)
</pre>
<p>So when accessing /myapp/simpleemail/polo@gmail.com, you will get the following page &minus;</p>
<img src="/django/images/sending_simple_email.jpg" alt="Sending Simple E-mail" />
<h2>Sending Multiple Mails with send_mass_mail</h2>
<p>The method returns the number of messages successfully delivered. This is same as send_mail but takes an extra parameter; datatuple, our sendMassEmail view will then be &minus;</p>
<pre class="prettyprint notranslate">
from django.core.mail import send_mass_mail
from django.http import HttpResponse

def sendMassEmail(request,emailto):
   msg1 = ('subject 1', 'message 1', 'polo@polo.com', [emailto1])
   msg2 = ('subject 2', 'message 2', 'polo@polo.com', [emailto2])
   res = send_mass_mail((msg1, msg2), fail_silently = False)
   return HttpResponse('%<b>s</b>'%res)
</pre>
<p>Let's create a URL to access our view &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, url

urlpatterns = paterns('myapp.views', url(r'^massEmail/(?P&lt;emailto1&gt;
   [\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4})/(?P&lt;emailto2&gt;
   [\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4})', 'sendMassEmail' , name = 'sendMassEmail'),)
</pre>
<p>When accessing /myapp/massemail/polo@gmail.com/sorex@gmail.com/, we get &minus;</p>
<img src="/django/images/sending_multiple_mails.jpg" alt="Sending Multiple Mails" />
<p>send_mass_mail parameters details are &minus;</p>
<ul class="list">
<li><p><b>datatuples</b> &minus; A tuple where each element is like (subject, message, from_email, recipient_list).</p></li>
<li><p><b>fail_silently</b> &minus; Bool, if false send_mail will raise an exception in case of error.</p></li>
<li><p><b>auth_user</b> &minus; User login if not set in settings.py.</p></li>
<li><p><b>auth_password</b> &minus; User password if not set in settings.py.</p></li>
<li><p><b>connection</b> &minus; E-mail backend.</p></li>
</ul>
<p>As you can see in the above image, two messages were sent successfully.</p>
<p><b>Note</b> &minus; In this example we are using Python smtp debuggingserver, that you can launch using &minus;</p>
<pre class="result notranslate">
$python -m smtpd -n -c DebuggingServer localhost:1025
</pre>
<p>This means all your sent e-mails will be printed on stdout, and the dummy server is running on localhost:1025.</p>
<p><b>Sending e-mails to admins and managers using mail_admins and mail_managers methods</b></p>
<p>These methods send e-mails to site administrators as defined in the ADMINS option of the settings.py file, and to site managers as defined in MANAGERS option of the settings.py file. Let's assume our ADMINS and MANAGERS options look like &minus;</p>
<p><b>ADMINS</b> = (('polo', 'polo@polo.com'),)</p>
<p><b>MANAGERS</b> = (('popoli', 'popoli@polo.com'),)</p>
<pre class="prettyprint notranslate">
from django.core.mail import mail_admins
from django.http import HttpResponse

def sendAdminsEmail(request):
   res = mail_admins('my subject', 'site is going down.')
   return HttpResponse('<b>%s</b>'%res)
</pre>
<p>The above code will send an e-mail to every admin defined in the ADMINS section.</p>
<pre class="prettyprint notranslate">
from django.core.mail import mail_managers
from django.http import HttpResponse

def sendManagersEmail(request):
   res = mail_managers('my subject 2', 'Change date on the site.')
   return HttpResponse('<b>%s</b>'%res)
</pre>
<p>The above code will send an e-mail to every manager defined in the MANAGERS section.</p>
<p>Parameters details &minus;</p>
<ul class="list">
<li><p><b>Subject</b> &minus; E-mail subject.</p></li>
<li><p><b>message</b> &minus; E-mail body.</p></li>
<li><p><b>fail_silently</b> &minus; Bool, if false send_mail will raise an exception in case of error.</p></li>
<li><p><b>connection</b> &minus; E-mail backend.</p></li>
<li><p><b>html_message</b> &minus; (new in Django 1.7) if present, the e-mail will be multipart/alternative.</p></li>
</ul>
<h2>Sending HTML E-mail</h2>
<p>Sending HTML message in Django &gt;= 1.7 is as easy as &minus;</p>
<pre class="prettyprint notranslate">
from django.core.mail import send_mail

from django.http import HttpResponse
   res = send_mail("hello paul", "comment tu vas?", "paul@polo.com", 
         ["polo@gmail.com"], html_message=")
</pre>
<p>This will produce a multipart/alternative e-mail.</p>
<p>But for Django &lt; 1.7 sending HTML messages is done via the django.core.mail.EmailMessage class then calling 'send' on the object &minus;</p>
<p>Let's create a "sendHTMLEmail" view to send an HTML e-mail.</p>
<pre class="prettyprint notranslate">
from django.core.mail import EmailMessage
from django.http import HttpResponse

def sendHTMLEmail(request , emailto):
   html_content = "&lt;strong&gt;Comment tu vas?&lt;/strong&gt;"
   email = EmailMessage("my subject", html_content, "paul@polo.com", [emailto])
   email.content_subtype = "html"
   res = email.send()
   return HttpResponse('<b>%s</b>'%res)
</pre>
<p>Parameters details for the EmailMessage class creation &minus;</p>
<ul class="list">
<li><p><b>Subject</b> &minus; E-mail subject.</p></li>
<li><p><b>message</b> &minus; E-mail body in HTML.</p></li>
<li><p><b>from_email</b> &minus; E-mail from.</p></li>
<li><p><b>to</b> &minus; List of receivers’ e-mail address.</p></li>
<li><p><b>bcc</b> &minus; List of “Bcc” receivers’ e-mail address.</p></li>
<li><p><b>connection</b> &minus; E-mail backend.</p></li>
</ul>
<p>Let's create a URL to access our view &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, url

urlpatterns = paterns('myapp.views', url(r'^htmlemail/(?P&lt;emailto&gt;
   [\w.%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4})/', 
   'sendHTMLEmail' , name = 'sendHTMLEmail'),)
</pre>
<p>When accessing /myapp/htmlemail/polo@gmail.com, we get &minus;</p>
<img src="/django/images/sending_html_email.jpg" alt="Sending HTML E-mail" />
<h2>Sending E-mail with Attachment</h2>
<p>This is done by using the 'attach' method on the EmailMessage object.</p>
<p>A view to send an e-mail with attachment will be &minus;</p>
<pre class="prettyprint notranslate">
from django.core.mail import EmailMessage
from django.http import HttpResponse

def sendEmailWithAttach(request, emailto):
   html_content = "<b>Comment tu vas?</b>"
   email = EmailMessage("my subject", html_content, "paul@polo.com", emailto])
   email.content_subtype = "html"
   
   fd = open('manage.py', 'r')
   email.attach('manage.py', fd.read(), 'text/plain')
   
   res = email.send()
   return HttpResponse('<b>%s</b>'%res)
</pre>
<p>Details on attach arguments &minus;</p>
<ul class="list">
<li><p><b>filename</b> &minus; The name of the file to attach.</p></li>
<li><p><b>content</b> &minus; The content of the file to attach.</p></li>
<li><p><b>mimetype</b> &minus; The attachment's content mime type.</p></li>
</ul>
<h1>Django - Generic Views</h1>
<p>In some cases, writing views, as we have seen earlier is really heavy. Imagine you need a static page or a listing page. Django offers an easy way to set those simple views that is called generic views.</p>
<p>Unlike classic views, generic views are classes not functions. Django offers a set of classes for generic views in django.views.generic, and every generic view is one of those classes or a class that inherits from one of them.</p>
<p>There are 10&plus; generic classes &minus;</p>
<pre class="prettyprint notranslate">
&gt;&gt;&gt; import django.views.generic
&gt;&gt;&gt; dir(django.views.generic)

['ArchiveIndexView', 'CreateView', 'DateDetailView', 'DayArchiveView', 
   'DeleteView', 'DetailView', 'FormView', 'GenericViewError', 'ListView', 
   'MonthArchiveView', 'RedirectView', 'TemplateView', 'TodayArchiveView', 
   'UpdateView', 'View', 'WeekArchiveView', 'YearArchiveView', '__builtins__', 
   '__doc__', '__file__', '__name__', '__package__', '__path__', 'base', 'dates', 
   'detail', 'edit', 'list']
</pre>
<p>This you can use for your generic view. Let's look at some example to see how it works.</p>
<h2>Static Pages</h2>
<p>Let's publish a static page from the “static.html” template.</p>
<p>Our static.html &minus;</p>
<pre class="prettyprint notranslate">
&lt;html&gt;
   &lt;body&gt; 
      This is a static page!!! 
   &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>If we did that the way we learned before, we would have to change the <b>myapp/views.py</b> to be &minus;</p>
<pre class="prettyprint notranslate">
from django.shortcuts import render

def static(request):
   return render(request, 'static.html', {})
</pre>
<p>and <b>myapp/urls.py</b> to be &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, url

urlpatterns = patterns("myapp.views", url(r'^static/', 'static', name = 'static'),)
</pre>
<p>The best way is to use generic views. For that, our myapp/views.py will become &minus;</p>
<pre class="prettyprint notranslate">
from django.views.generic import TemplateView

class StaticView(TemplateView):
   template_name = "static.html"
</pre>
<p>And our myapp/urls.py we will be &minus;</p>
<pre class="prettyprint notranslate">
from myapp.views import StaticView
from django.conf.urls import patterns

urlpatterns = patterns("myapp.views", (r'^static/$', StaticView.as_view()),)
</pre>
<p>When accessing /myapp/static you get &minus;</p>
<img src="/django/images/static_page.jpg" alt="Static Page" />
<p>For the same result we can also, do the following &minus;</p>
<ul class="list">
<li>No change in the views.py</li>
<li>Change the url.py file to be &minus;</li>
</ul>
<pre class="prettyprint notranslate">
from django.views.generic import TemplateView
from django.conf.urls import patterns, url

urlpatterns = patterns("myapp.views",
   url(r'^static/',TemplateView.as_view(template_name = 'static.html')),)
</pre>
<p>As you can see, you just need to change the url.py file in the second method.</p>
<h3>List and Display Data from DB</h3>
<p>We are going to list all entries in our Dreamreal model. Doing so is made easy by using the ListView generic view class. Edit the url.py file and update it as &minus;</p>
<pre class="prettyprint notranslate">
from django.views.generic import ListView
from django.conf.urls import patterns, url

urlpatterns = patterns(
   "myapp.views", url(r'^dreamreals/', ListView.as_view(model = Dreamreal, 
      template_name = "dreamreal_list.html")),
)
</pre>
<p>Important to note at this point is that the variable pass by the generic view to the template is object_list. If you want to name it yourself, you will need to add a context_object_name argument to the as_view method. Then the url.py will become &minus;</p>
<pre class="prettyprint notranslate">
from django.views.generic import ListView
from django.conf.urls import patterns, url

urlpatterns = patterns("myapp.views",
   url(r'^dreamreals/', ListView.as_view(
      template_name = "dreamreal_list.html")),
      model = Dreamreal, context_object_name = ”dreamreals_objects” ,)
</pre>
<p>The associated template will then be &minus;</p>
<pre class="prettyprint notranslate">
{% extends "main_template.html" %}
{% block content %}
Dreamreals:&lt;p&gt;
{% for dr in object_list %}
{{dr.name}}&lt;/p&gt;
{% endfor %}
{% endblock %}
</pre>
<p>Accessing /myapp/dreamreals/ will produce the following page &minus;</p>
<img src="/django/images/list_display_data_from_db.jpg" alt="List and Display Data from DB" />
<h1>Django - Form Processing</h1>
<p>Creating forms in Django, is really similar to creating a model. Here again, we just need to inherit from Django class and the class attributes will be the form fields. Let's add a <b>forms.py</b> file in myapp folder to contain our app forms. We will create a login form.</p>
<p><b>myapp/forms.py</b></p>
<pre class="prettyprint notranslate">
#-*- coding: utf-8 -*-
from django import forms

class LoginForm(forms.Form):
   user = forms.CharField(max_length = 100)
   password = forms.CharField(widget = forms.PasswordInput())
</pre>
<p>As seen above, the field type can take "widget" argument for html rendering; in our case, we want the password to be hidden, not displayed. Many others widget are present in Django: <b>DateInput</b> for dates, <b>CheckboxInput</b> for checkboxes, etc.</p>
<h2>Using Form in a View</h2>
<p>There are two kinds of HTTP requests, GET and POST. In Django, the request object passed as parameter to your view has an attribute called "method" where the type of the request is set, and all data passed via POST can be accessed via the request.POST dictionary.</p>
<p>Let's create a login view in our myapp/views.py &minus;</p>
<pre class="prettyprint notranslate">
#-*- coding: utf-8 -*-
from myapp.forms import LoginForm

def login(request):
   username = "not logged in"
   
   if request.method == "POST":
      #Get the posted form
      MyLoginForm = LoginForm(request.POST)
      
      if MyLoginForm.is_valid():
         username = MyLoginForm.cleaned_data['username']
   else:
      MyLoginForm = Loginform()
		
   return render(request, 'loggedin.html', {"username" : username})
</pre>
<p>The view will display the result of the login form posted through the <b>loggedin.html</b>. To test it, we will first need the login form template. Let's call it login.html.</p>
<pre class="prettyprint notranslate">
&lt;html&gt;
   &lt;body&gt;
      
      &lt;form name = "form" action = "{% url "myapp.views.login" %}" 
         method = "POST" &gt;{% csrf_token %}
         
         &lt;div style = "max-width:470px;"&gt;
            &lt;center&gt; 
               &lt;input type = "text" style = "margin-left:20%;" 
                  placeholder = "Identifiant" name = "username" /&gt;
            &lt;/center&gt;
         &lt;/div&gt;
			
         &lt;br&gt;
         
         &lt;div style = "max-width:470px;"&gt;
            &lt;center&gt;
               &lt;input type = "password" style = "margin-left:20%;" 
                  placeholder = "password" name = "password" /&gt;
            &lt;/center&gt;
         &lt;/div&gt;
			
         &lt;br&gt;
         
         &lt;div style = "max-width:470px;"&gt;
            &lt;center&gt; 
            
               &lt;button style = "border:0px; background-color:#4285F4; margin-top:8%;
                  height:35px; width:80%;margin-left:19%;" type = "submit" 
                  value = "Login" &gt;
                  &lt;strong&gt;Login&lt;/strong&gt;
               &lt;/button&gt;
               
            &lt;/center&gt;
         &lt;/div&gt;
         
      &lt;/form&gt;
      
   &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>The template will display a login form and post the result to our login view above. You have probably noticed the tag in the template, which is just to prevent Cross-site Request Forgery (CSRF) attack on your site.</p>
<pre class="result notranslate">
{% csrf_token %}
</pre>
<p>Once we have the login template, we need the loggedin.html template that will be rendered after form treatment.</p>
<pre class="prettyprint notranslate">
&lt;html&gt;
   
   &lt;body&gt;
      You are : &lt;strong&gt;{{username}}&lt;/strong&gt;
   &lt;/body&gt;
   
&lt;/html&gt;
</pre>
<p>Now, we just need our pair of URLs to get started: myapp/urls.py</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, url
from django.views.generic import TemplateView

urlpatterns = patterns('myapp.views',
   url(r'^connection/',TemplateView.as_view(template_name = 'login.html')),
   url(r'^login/', 'login', name = 'login'))
</pre>
<p>When accessing "/myapp/connection", we will get the following login.html template rendered &minus;</p>
<img src="/django/images/login_html_template.jpg" alt="Login HTML Template" />
<p>On the form post, the form is valid. In our case make sure to fill the two fields and you will get &minus;</p>
<img src="/django/images/form_validation.jpg" alt="Form Validation" />
<p>In case your username is polo, and you forgot the password. You will get the following message &minus;</p>
<img src="/django/images/form_invalid_message.jpg" alt="Form Invalid Message" />
<h3>Using Our Own Form Validation</h3>
<p>In the above example, when validating the form &minus;</p>
<pre class="result notranslate">
MyLoginForm.is_valid()
</pre>
<p>We only used Django self-form validation engine, in our case just making sure the fields are required. Now let’s try to make sure the user trying to login is present in our DB as Dreamreal entry. For this, change the myapp/forms.py to &minus;</p>
<pre class="prettyprint notranslate">
#-*- coding: utf-8 -*-
from django import forms
from myapp.models import Dreamreal

class LoginForm(forms.Form):
   user = forms.CharField(max_length = 100)
   password = forms.CharField(widget = forms.PasswordInput())

   def clean_message(self):
      username = self.cleaned_data.get("username")
      dbuser = Dreamreal.objects.filter(name = username)
      
      if not dbuser:
         raise forms.ValidationError("User does not exist in our db!")
      return username
</pre>
<p>Now, after calling the "is_valid" method, we will get the correct output, only if the user is in our database. If you want to check a field of your form, just add a method starting by "clean_" then your field name to your form class. Raising a forms.ValidationError is important.</p>
<h1>Django - File Uploading</h1>
<p>It is generally useful for a web app to be able to upload files (profile picture, songs, pdf, words.....). Let's discuss how to upload files in this chapter.</p>
<h2>Uploading an Image</h2>
<p>Before starting to play with an image, make sure you have the Python Image Library (PIL) installed. Now to illustrate uploading an image, let's create a profile form, in our myapp/forms.py &minus;</p>
<pre class="prettyprint notranslate">
#-*- coding: utf-8 -*-
from django import forms

class ProfileForm(forms.Form):
   name = forms.CharField(max_length = 100)
   picture = forms.ImageFields()
</pre>
<p>As you can see, the main difference here is just the <b>forms.ImageField</b>. ImageField will make sure the uploaded file is an image. If not, the form validation will fail.</p>
<p>Now let's create a "Profile" model to save our uploaded profile. This is done in myapp/models.py &minus;</p>
<pre class="prettyprint notranslate">
from django.db import models

class Profile(models.Model):
   name = models.CharField(max_length = 50)
   picture = models.ImageField(upload_to = 'pictures')

   class Meta:
      db_table = "profile"
</pre>
<p>As you can see for the model, the ImageField takes a compulsory argument: <b>upload_to</b>. This represents the place on the hard drive where your images will be saved. Note that the parameter will be added to the MEDIA_ROOT option defined in your settings.py file.</p>
<p>Now that we have the Form and the Model, let's create the view, in myapp/views.py &minus;</p>
<pre class="prettyprint notranslate">
#-*- coding: utf-8 -*-
from myapp.forms import ProfileForm
from myapp.models import Profile

def SaveProfile(request):
   saved = False
   
   if request.method == "POST":
      #Get the posted form
      MyProfileForm = ProfileForm(request.POST, request.FILES)
      
      if MyProfileForm.is_valid():
         profile = Profile()
         profile.name = MyProfileForm.cleaned_data["name"]
         profile.picture = MyProfileForm.cleaned_data["picture"]
         profile.save()
         saved = True
   else:
      MyProfileForm = Profileform()
		
   return render(request, 'saved.html', locals())
</pre>
<p>The part not to miss is, there is a change when creating a ProfileForm, we added a second parameters: <b>request.FILES</b>. If not passed the form validation will fail, giving a message that says the picture is empty.</p>
<p>Now, we just need the <b>saved.html</b> template and the <b>profile.html</b> template, for the form and the redirection page &minus;</p>
<p><b>myapp/templates/saved.html</b> &minus;</p>
<pre class="prettyprint notranslate">
&lt;html&gt;
   &lt;body&gt;
   
      {% if saved %}
         &lt;strong&gt;Your profile was saved.&lt;/strong&gt;
      {% endif %}
      
      {% if not saved %}
         &lt;strong&gt;Your profile was not saved.&lt;/strong&gt;
      {% endif %}
      
   &lt;/body&gt;
&lt;/html&gt;
</pre>
<p><b>myapp/templates/profile.html</b> &minus;</p>
<pre class="prettyprint notranslate">
&lt;html&gt;
   &lt;body&gt;
   
      &lt;form name = "form" enctype = "multipart/form-data" 
         action = "{% url "myapp.views.SaveProfile" %}" method = "POST" &gt;{% csrf_token %}
         
         &lt;div style = "max-width:470px;"&gt;
            &lt;center&gt;  
               &lt;input type = "text" style = "margin-left:20%;" 
               placeholder = "Name" name = "name" /&gt;
            &lt;/center&gt;
         &lt;/div&gt;
			
         &lt;br&gt;
         
         &lt;div style = "max-width:470px;"&gt;
            &lt;center&gt; 
               &lt;input type = "file" style = "margin-left:20%;" 
                  placeholder = "Picture" name = "picture" /&gt;
            &lt;/center&gt;
         &lt;/div&gt;
			
         &lt;br&gt;
         
         &lt;div style = "max-width:470px;"&gt;
            &lt;center&gt; 
            
               &lt;button style = "border:0px;background-color:#4285F4; margin-top:8%; 
                  height:35px; width:80%; margin-left:19%;" type = "submit" value = "Login" &gt;
                  &lt;strong&gt;Login&lt;/strong&gt;
               &lt;/button&gt;
               
            &lt;/center&gt;
         &lt;/div&gt;
         
      &lt;/form&gt;
      
   &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Next, we need our pair of URLs to get started: myapp/urls.py</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, url
from django.views.generic import TemplateView

urlpatterns = patterns(
   'myapp.views', url(r'^profile/',TemplateView.as_view(
      template_name = 'profile.html')), url(r'^saved/', 'SaveProfile', name = 'saved')
)
</pre>
<p>When accessing "/myapp/profile", we will get the following profile.html template rendered &minus;</p>
<img src="/django/images/uploading_image.jpg" alt="Uploading Image" />
<p>And on form post, the saved template will be rendered &minus;</p>
<img src="/django/images/form_post_template.jpg" alt="Form Post Template" />
<p>We have a sample for image, but if you want to upload another type of file, not just image, just replace the <b>ImageField</b> in both Model and Form with <b>FileField</b>.</p>
<h1>Django - Apache Setup</h1>
<p>So far, in our examples, we have used the Django dev web server. But this server is just for testing and is not fit for production environment. Once in production, you need a real server like Apache, Nginx, etc. Let's discuss Apache in this chapter.</p>
<p>Serving Django applications via Apache is done by using mod_wsgi. So the first thing is to make sure you have Apache and mod_wsgi installed. Remember, when we created our project and we looked at the project structure, it looked like &minus;</p>
<pre class="result notranslate">
myproject/
   manage.py
   myproject/
      __init__.py
      settings.py
      urls.py
      wsgi.py
</pre>
<p>The wsgi.py file is the one taking care of the link between Django and Apache.</p>
<p>Let's say we want to share our project (myproject) with Apache. We just need to set Apache to access our folder. Assume we put our myproject folder in the default "/var/www/html". At this stage, accessing the project will be done via 127.0.0.1/myproject. This will result in Apache just listing the folder as shown in the following snapshot.</p>
<img src="/django/images/django_apache_setup.jpg" alt="Django Apache Setup" />
<p>As seen, Apache is not handling Django stuff. For this to be taken care of, we need to configure Apache in httpd.conf. So open the httpd.conf and add the following line &minus;</p>
<pre class="prettyprint notranslate">
WSGIScriptAlias / /var/www/html/myproject/myproject/wsgi.py
WSGIPythonPath /var/www/html/myproject/

&lt;Directory /var/www/html/myproject/&gt;
   &lt;Files wsgi.py&gt;
      Order deny,allow
      Allow from all
   &lt;/Files&gt;
&lt;/Directory&gt;
</pre>
<p>If you can access the login page as 127.0.0.1/myapp/connection, you will get to see the following page &minus;</p>
<img src="/django/images/login_page.jpg" alt="Login Page" />
<h1>Django - Cookies Handling</h1>
<p>Sometimes you might want to store some data on a per-site-visitor basis as per the requirements of your web application. Always keep in mind, that cookies are saved on the client side and depending on your client browser security level, setting cookies can at times work and at times might not.</p>
<p>To illustrate cookies handling in Django, let's create a system using the login system we created before. The system will keep you logged in for X minute of time, and beyond that time, you will be out of the app.</p>
<p>For this, you will need to set up two cookies, last_connection and username.</p>
<p>At first, let's change our login view to store our username and last_connection cookies &minus;</p>
<pre class="prettyprint notranslate">
from django.template import RequestContext

def login(request):
   username = "not logged in"
   
   if request.method == "POST":
      #Get the posted form
      MyLoginForm = LoginForm(request.POST)
   
   if MyLoginForm.is_valid():
      username = MyLoginForm.cleaned_data['username']
   else:
      MyLoginForm = LoginForm()
   
   response = render_to_response(request, 'loggedin.html', {"username" : username}, 
      context_instance = RequestContext(request))
   
   response.set_cookie('last_connection', datetime.datetime.now())
   response.set_cookie('username', datetime.datetime.now())
	
   return response
</pre>
<p>As seen in the view above, setting cookie is done by the <b>set_cookie</b> method called on the response not the request, and also note that all cookies values are returned as string.</p>
<p>Let’s now create a formView for the login form, where we won’t display the form if cookie is set and is not older than 10 second &minus;</p>
<pre class="prettyprint notranslate">
def formView(request):
   if 'username' in request.COOKIES and 'last_connection' in request.COOKIES:
      username = request.COOKIES['username']
      
      last_connection = request.COOKIES['last_connection']
      last_connection_time = datetime.datetime.strptime(last_connection[:-7], 
         "%Y-%m-%d %H:%M:%S")
      
      if (datetime.datetime.now() - last_connection_time).seconds &lt; 10:
         return render(request, 'loggedin.html', {"username" : username})
      else:
         return render(request, 'login.html', {})
			
   else:
      return render(request, 'login.html', {})
</pre>
<p>As you can see in the formView above accessing the cookie you set, is done via the COOKIES attribute (dict) of the request.</p>
<p>Now let’s change the url.py file to change the URL so it pairs with our new view &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, url
from django.views.generic import TemplateView

urlpatterns = patterns('myapp.views',
   url(r'^connection/','formView', name = 'loginform'),
   url(r'^login/', 'login', name = 'login'))
</pre>
<p>When accessing /myapp/connection, you will get the following page &minus;</p>
<img src="/django/images/django_cookies_handling.jpg" alt="Django Cookies Handling" />
<p>And you will get redirected to the following screen on submit &minus;</p>
<img src="/django/images/cookies_handling_redirected_page.jpg" alt="Cookies Handling Redirected Page" />
<p>Now, if you try to access /myapp/connection again in the 10 seconds range, you will get redirected to the second screen directly. And if you access /myapp/connection again out of this range you will get the login form (screen 1).</p>
<h1>Django - Sessions</h1>
<p>As discussed earlier, we can use client side cookies to store a lot of useful data for the web app. We have seen before that we can use client side cookies to store various data useful for our web app. This leads to lot of security holes depending on the importance of the data you want to save.</p>
<p>For security reasons, Django has a session framework for cookies handling. Sessions are used to abstract the receiving and sending of cookies, data is saved on server side (like in database), and the client side cookie just has a session ID for identification. Sessions are also useful to avoid cases where the user browser is set to ‘not accept’ cookies.</p>
<h2>Setting Up Sessions</h2>
<p>In Django, enabling session is done in your project <b>settings.py</b>, by adding some lines to the <b>MIDDLEWARE_CLASSES</b> and the <b>INSTALLED_APPS</b> options. This should be done while creating the project, but it's always good to know, so <b>MIDDLEWARE_CLASSES</b> should have &minus;</p>
<pre class="result notranslate">
'django.contrib.sessions.middleware.SessionMiddleware'
</pre>
<p>And <b>INSTALLED_APPS</b> should have &minus;</p>
<pre class="result notranslate">
'django.contrib.sessions'
</pre>
<p>By default, Django saves session information in database (django_session table or collection), but you can configure the engine to store information using other ways like: in <b>file</b> or in <b>cache</b>.</p>
<p>When session is enabled, every request (first argument of any view in Django) has a session (dict) attribute.</p>
<p>Let's create a simple sample to see how to create and save sessions. We have built a simple login system before (see Django form processing chapter and Django Cookies Handling chapter). Let us save the username in a cookie so, if not signed out, when accessing our login page you won’t see the login form. Basically, let's make our login system we used in Django Cookies handling more secure, by saving cookies server side.</p>
<p>For this, first lets change our login view to save our username cookie server side &minus;</p>
<pre class="prettyprint notranslate">
def login(request):
   username = 'not logged in'
   
   if request.method == 'POST':
      MyLoginForm = LoginForm(request.POST)
      
      if MyLoginForm.is_valid():
         username = MyLoginForm.cleaned_data['username']
         request.session['username'] = username
      else:
         MyLoginForm = LoginForm()
			
   return render(request, 'loggedin.html', {"username" : username}
</pre>
<p>Then let us create formView view for the login form, where we won’t display the form if cookie is set &minus;</p>
<pre class="prettyprint notranslate">
def formView(request):
   if request.session.has_key('username'):
      username = request.session['username']
      return render(request, 'loggedin.html', {"username" : username})
   else:
      return render(request, 'login.html', {})
</pre>
<p>Now let us change the url.py file to change the url so it pairs with our new view &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import patterns, url
from django.views.generic import TemplateView

urlpatterns = patterns('myapp.views',
   url(r'^connection/','formView', name = 'loginform'),
   url(r'^login/', 'login', name = 'login'))
</pre>
<p>When accessing /myapp/connection, you will get to see the following page &minus;</p>
<img src="/django/images/setting_up_sessions.jpg" alt="Setting Up Sessions" />
<p>And you will get redirected to the following page &minus;</p>
<img src="/django/images/sessions_redirected_page.jpg" alt="Sessions Redirected Page" />
<p>Now if you try to access /myapp/connection again, you will get redirected to the second screen directly.</p>
<p>Let's create a simple logout view that erases our cookie.</p>
<pre class="prettyprint notranslate">
def logout(request):
   try:
      del request.session['username']
   except:
      pass
   return HttpResponse("&lt;strong&gt;You are logged out.&lt;/strong&gt;")
</pre>
<p>And pair it with a logout URL in myapp/url.py</p>
<pre class="result notranslate">
url(r'^logout/', 'logout', name = 'logout'),
</pre>
<p>Now, if you access /myapp/logout, you will get the following page &minus;</p>
<img src="/django/images/logged_out_page.jpg" alt="Logged Out Page" />
<p>If you access /myapp/connection again, you will get the login form (screen 1).</p>
<h3>Some More Possible Actions Using Sessions</h3>
<p>We have seen how to store and access a session, but it's good to know that the session attribute of the request have some other useful actions like &minus;</p>
<ul class="list">
<li><p><b>set_expiry (<i>value</i>)</b> &minus; Sets the expiration time for the session.</p></li>
<li><p><b>get_expiry_age()</b> &minus; Returns the number of seconds until this session expires.</p></li>
<li><p><b>get_expiry_date()</b> &minus; Returns the date this session will expire.</p></li>
<li><p><b>clear_expired()</b> &minus; Removes expired sessions from the session store.</p></li>
<li><p><b>get_expire_at_browser_close()</b> &minus; Returns either True or False, depending on whether the user’s session cookies have expired when the user’s web browser is closed.</p></li>
</ul>
<h1>Django - Caching</h1>
<p>To cache something is to save the result of an expensive calculation, so that you don’t perform it the next time you need it. Following is a pseudo code that explains how caching works &minus;</p>
<pre class="prettyprint notranslate">
given a URL, try finding that page in the cache

if the page is in the cache:
   return the cached page
else:
   generate the page
   save the generated page in the cache (for next time)
   return the generated page
</pre>
<p>Django comes with its own caching system that lets you save your dynamic pages, to avoid calculating them again when needed. The good point in Django Cache framework is that you can cache &minus;</p>
<ul class="list">
<li>The output of a specific view.</li>
<li>A part of a template.</li>
<li>Your entire site.</li>
</ul>
<p>To use cache in Django, first thing to do is to set up where the cache will stay. The cache framework offers different possibilities - cache can be saved in database, on file system or directly in memory. Setting is done in the <b>settings.py</b> file of your project.</p>
<h2>Setting Up Cache in Database</h2>
<p>Just add the following in the project settings.py file &minus;</p>
<pre class="prettyprint notranslate">
CACHES = {
   'default': {
      'BACKEND': 'django.core.cache.backends.db.DatabaseCache',
      'LOCATION': 'my_table_name',
   }
}
</pre>
<p>For this to work and to complete the setting, we need to create the cache table 'my_table_name'. For this, you need to do the following &minus;</p>
<pre class="result notranslate">
python manage.py createcachetable
</pre>
<h2>Setting Up Cache in File System</h2>
<p>Just add the following in the project settings.py file &minus;</p>
<pre class="prettyprint notranslate">
CACHES = {
   'default': {
      'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',
      'LOCATION': '/var/tmp/django_cache',
   }
}
</pre>
<h2>Setting Up Cache in Memory</h2>
<p>This is the most efficient way of caching, to use it you can use one of the following options depending on the Python binding library you choose for the memory cache &minus;</p>
<pre class="prettyprint notranslate">
CACHES = {
   'default': {
      'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
      'LOCATION': '127.0.0.1:11211',
   }
}
</pre>
<p><b>Or</b></p>
<pre class="prettyprint notranslate">
CACHES = {
   'default': {
      'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
      'LOCATION': 'unix:/tmp/memcached.sock',
   }
}
</pre>
<h2>Caching the Entire Site</h2>
<p>The simplest way of using cache in Django is to cache the entire site. This is done by editing the MIDDLEWARE_CLASSES option in the project settings.py. The following need to be added to the option &minus;</p>
<pre class="prettyprint notranslate">
MIDDLEWARE_CLASSES &plus;= (
   'django.middleware.cache.UpdateCacheMiddleware',
   'django.middleware.common.CommonMiddleware',
   'django.middleware.cache.FetchFromCacheMiddleware',
)
</pre>
<p>Note that the order is important here, Update should come before Fetch middleware.</p>
<p>Then in the same file, you need to set &minus;</p>
<pre class="result notranslate">
CACHE_MIDDLEWARE_ALIAS – The cache alias to use for storage.
CACHE_MIDDLEWARE_SECONDS – The number of seconds each page should be cached.
</pre>
<h2>Caching a View</h2>
<p>If you don’t want to cache the entire site you can cache a specific view. This is done by using the <b>cache_page</b> decorator that comes with Django. Let us say we want to cache the result of the <b>viewArticles</b> view &minus;</p>
<pre class="prettyprint notranslate">
from django.views.decorators.cache import cache_page

@cache_page(60 * 15)

def viewArticles(request, year, month):
   text = "Displaying articles of : %s/%s"%(year, month)
   return HttpResponse(text)
</pre>
<p>As you can see <b>cache_page</b> takes the number of seconds you want the view result to be cached as parameter. In our example above, the result will be cached for 15 minutes.</p>
<p><b>Note</b> &minus; As we have seen before the above view was map to &minus;</p>
<pre class="prettyprint notranslate">
urlpatterns = patterns('myapp.views',
   url(r'^articles/(?P&lt;month&gt;\d{2})/(?P&lt;year&gt;\d{4})/', 'viewArticles', name = 'articles'),)
</pre>
<p>Since the URL is taking parameters, each different call will be cached separately. For example, request to /myapp/articles/02/2007 will be cached separately to /myapp/articles/03/2008.</p>
<p>Caching a view can also directly be done in the url.py file. Then the following has the same result as the above. Just edit your myapp/url.py file and change the related mapped URL (above) to be &minus;</p>
<pre class="prettyprint notranslate">
urlpatterns = patterns('myapp.views',
   url(r'^articles/(?P&lt;month&gt;\d{2})/(?P&lt;year&gt;\d{4})/', 
   cache_page(60 * 15)('viewArticles'), name = 'articles'),)
</pre>
<p>And, of course, it's no longer needed in myapp/views.py.</p>
<h2>Caching a Template Fragment</h2>
<p>You can also cache parts of a template, this is done by using the <b>cache</b> tag. Let's take our <b>hello.html</b> template &minus;</p>
<pre class="prettyprint notranslate">
{% extends "main_template.html" %}
{% block title %}My Hello Page{% endblock %}
{% block content %}

Hello World!!!&lt;p&gt;Today is {{today}}&lt;/p&gt;
We are
{% if today.day == 1 %}

the first day of month.
{% elif today.day == 30 %}

the last day of month.
{% else %}

I don't know.
{%endif%}

&lt;p&gt;
   {% for day in days_of_week %}
   {{day}}
&lt;/p&gt;

{% endfor %}
{% endblock %}
</pre>
<p>And to cache the content block, our template will become &minus;</p>
<pre class="prettyprint notranslate">
{% load cache %}
{% extends "main_template.html" %}
{% block title %}My Hello Page{% endblock %}
{% cache 500 content %}
{% block content %}

Hello World!!!&lt;p&gt;Today is {{today}}&lt;/p&gt;
We are
{% if today.day == 1 %}

the first day of month.
{% elif today.day == 30 %}

the last day of month.
{% else %}

I don't know.
{%endif%}

&lt;p&gt;
   {% for day in days_of_week %}
   {{day}}
&lt;/p&gt;

{% endfor %}
{% endblock %}
{% endcache %}
</pre>
<p>As you can see above, the cache tag will take 2 parameters &minus; the time you want the block to be cached (in seconds) and the name to be given to the cache fragment.</p>
<h1>Django - Comments</h1>
<p>Before starting, note that the Django Comments framework is deprecated, since the 1.5 version. Now you can use external feature for doing so, but if you still want to use it, it's still included in version 1.6 and 1.7. Starting version 1.8 it's absent but you can still get the code on a different GitHub account.</p>
<p>The comments framework makes it easy to attach comments to any model in your app.</p>
<p>To start using the Django comments framework &minus;</p>
<p>Edit the project settings.py file and add <b>'django.contrib.sites'</b>, and <b>'django.contrib.comments'</b>, to INSTALLED_APPS option &minus;</p>
<pre class="prettyprint notranslate">
INSTALLED_APPS &plus;= ('django.contrib.sites', 'django.contrib.comments',)
</pre>
<p>Get the site id &minus;</p>
<pre class="prettyprint notranslate">
&gt;&gt;&gt; from django.contrib.sites.models import Site
&gt;&gt;&gt; Site().save()
&gt;&gt;&gt; Site.objects.all()[0].id
u'56194498e13823167dd43c64'
</pre>
<p>Set the id you get in the settings.py file &minus;</p>
<pre class="result notranslate">
SITE_ID = u'56194498e13823167dd43c64'
</pre>
<p>Sync db, to create all the comments table or collection &minus;</p>
<pre class="result notranslate">
python manage.py syncdb
</pre>
<p>Add the comment app’s URLs to your project’s urls.py &minus;</p>
<pre class="prettyprint notranslate">
from django.conf.urls import include
url(r'^comments/', include('django.contrib.comments.urls')),
</pre>
<p>Now that we have the framework installed, let's change our hello templates to tracks comments on our Dreamreal model. We will list, save comments for a specific Dreamreal entry whose name will be passed as parameter to the /myapp/hello URL.</p>
<h2>Dreamreal Model</h2>
<pre class="prettyprint notranslate">
class Dreamreal(models.Model):

   website = models.CharField(max_length = 50)
   mail = models.CharField(max_length = 50)
   name = models.CharField(max_length = 50)
   phonenumber = models.IntegerField()

   class Meta:
      db_table = "dreamreal"
</pre>
<h2>hello view</h2>
<pre class="prettyprint notranslate">
def hello(request, Name):
   today = datetime.datetime.now().date()
   daysOfWeek = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
   dreamreal = Dreamreal.objects.get(name = Name)
   return render(request, 'hello.html', locals())
</pre>
<h2>hello.html template</h2>
<pre class="prettyprint notranslate">
{% extends "main_template.html" %}
{% load comments %}
{% block title %}My Hello Page{% endblock %}
{% block content %}

&lt;p&gt;
   Our Dreamreal Entry:
   &lt;p&gt;&lt;strong&gt;Name :&lt;/strong&gt; {{dreamreal.name}}&lt;/p&gt;
   &lt;p&gt;&lt;strong&gt;Website :&lt;/strong&gt; {{dreamreal.website}}&lt;/p&gt;
   &lt;p&gt;&lt;strong&gt;Phone :&lt;/strong&gt; {{dreamreal.phonenumber}}&lt;/p&gt;
   &lt;p&gt;&lt;strong&gt;Number of comments :&lt;strong&gt; 
   {% get_comment_count for dreamreal as comment_count %} {{ comment_count }}&lt;/p&gt;
   &lt;p&gt;List of comments :&lt;/p&gt;
   {% render_comment_list for dreamreal %}
&lt;/p&gt;

{% render_comment_form for dreamreal %}
{% endblock %}
</pre>
<p>Finally the mapping URL to our hello view &minus;</p>
<pre class="result notranslate">
url(r'^hello/(?P&lt;Name&gt;\w&plus;)/', 'hello', name = 'hello'),
</pre>
<p>Now,</p>
<ul class="list">
<li><p>In our template (hello.html), load the comments framework with &minus; {% load comments %}</p></li>
<li><p>We get the number of comments for the Dreamreal object pass by the view &minus; {% get_comment_count for dreamreal as comment_count %}</p></li>
<li><p>We get the list of comments for the objects &minus; {% render_comment_list for dreamreal %}</p></li>
<li><p>We display the default comments form &minus; {% render_comment_form for dreamreal %}</p></li>
</ul>
<p>When accessing /myapp/hello/steve you will get the comments info for the Dreamreal entry whose name is Steve. Accessing that URL will get you &minus;</p>
<img src="/django/images/django_comments_example.jpg" alt="Django Comments Example" />
<p>On posting a comment, you will get redirected to the following page &minus;</p>
<img src="/django/images/comments_redirected_page.jpg" alt="Comments Redirected Page" />
<p>If you go to /myapp/hello/steve again, you will get to see the following page &minus;</p>
<img src="/django/images/number_of_comments.jpg" alt="Number of Comments" />
<p>As you can see, the number of comments is 1 now and you have the comment under the list of comments line.</p>
<h1>Django - RSS</h1>
<p>Django comes with a syndication feed generating framework. With it you can create RSS or Atom feeds just by subclassing <b><i>django.contrib.syndication.views.Feed class</i></b>.</p>
<p>Let's create a feed for the latest comments done on the app (Also see Django - Comments Framework chapter). For this, let's create a myapp/feeds.py and define our feed (You can put your feeds classes anywhere you want in your code structure).</p>
<pre class="prettyprint notranslate">
from django.contrib.syndication.views import Feed
from django.contrib.comments import Comment
from django.core.urlresolvers import reverse

class DreamrealCommentsFeed(Feed):
   title = "Dreamreal's comments"
   link = "/drcomments/"
   description = "Updates on new comments on Dreamreal entry."

   def items(self):
      return Comment.objects.all().order_by("-submit_date")[:5]
		
   def item_title(self, item):
      return item.user_name
		
   def item_description(self, item):
      return item.comment
		
   def item_link(self, item):
      return reverse('comment', kwargs = {'object_pk':item.pk})
</pre>
<ul class="list">
<li><p>In our feed class, <b>title</b>, <b>link</b>, and <b>description</b> attributes correspond to the standard RSS <b>&lt;title&gt;</b>, <b>&lt;link&gt;</b> and <b>&lt;description&gt;</b> elements.</p></li>
<li><p>The <b>items</b> method, return the elements that should go in the feed as item element. In our case the last five comments.</p></li>
<li><p>The <b>item_title</b> method, will get what will go as title for our feed item. In our case the title, will be the user name.</p></li>
<li><p>The <b>item_description</b> method, will get what will go as description for our feed item. In our case the comment itself.</p></li>
<li><p>The <b>item_link</b> method will build the link to the full item. In our case it will get you to the comment.</p></li>
</ul>
<p>Now that we have our feed, let's add a comment view in views.py to display our comment &minus;</p>
<pre class="prettyprint notranslate">
from django.contrib.comments import Comment

def comment(request, object_pk):
   mycomment = Comment.objects.get(object_pk = object_pk)
   text = '&lt;strong&gt;User :&lt;/strong&gt; %s &lt;p&gt;'%mycomment.user_name&lt;/p&gt;
   text &plus;= '&lt;strong&gt;Comment :&lt;/strong&gt; %s &lt;p&gt;'%mycomment.comment&lt;/p&gt;
   return HttpResponse(text)
</pre>
<p>We also need some URLs in our myapp urls.py for mapping &minus;</p>
<pre class="prettyprint notranslate">
from myapp.feeds import DreamrealCommentsFeed
from django.conf.urls import patterns, url

urlpatterns &plus;= patterns('',
   url(r'^latest/comments/', DreamrealCommentsFeed()),
   url(r'^comment/(?P\w&plus;)/', 'comment', name = 'comment'),
)
</pre>
<p>When accessing /myapp/latest/comments/ you will get our feed &minus;</p>
<img src="/django/images/django_rss_example.jpg" alt="Django RSS Example" />
<p>Then clicking on one of the usernames will get you to: /myapp/comment/comment_id as defined in our comment view before and you will get &minus;</p>
<img src="/django/images/django_rss_redirected_page.jpg" alt="Django RSS Redirected Page" />
<p>Thus, defining a RSS feed is just a matter of sub-classing the Feed class and making sure the URLs (one for accessing the feed and one for accessing the feed elements) are defined. Just as comment, this can be attached to any model in your app.</p>
<h1>Django - Ajax</h1>
<p>Ajax essentially is a combination of technologies that are integrated together to reduce the number of page loads. We generally use Ajax to ease end-user experience. Using Ajax in Django can be done by directly using an Ajax library like JQuery or others. Let's say you want to use JQuery, then you need to download and serve the library on your server through Apache or others. Then use it in your template, just like you might do while developing any Ajax-based application.</p>
<p>Another way of using Ajax in Django is to use the Django Ajax framework. The most commonly used is django-dajax which is a powerful tool to easily and super-quickly develop asynchronous presentation logic in web applications, using Python and almost no JavaScript source code. It supports four of the most popular Ajax frameworks: Prototype, jQuery, Dojo and MooTools.</p>
<h2>Using Django-dajax</h2>
<p>First thing to do is to install django-dajax. This can be done using easy_install or pip &minus;</p>
<pre class="result notranslate">
$ pip install django_dajax
$ easy_install django_dajax
</pre>
<p>This will automatically install django-dajaxice, required by django-dajax. We then need to configure both dajax and dajaxice.</p>
<p>Add dajax and dajaxice in your project settings.py in INSTALLED_APPS option &minus;</p>
<pre class="prettyprint notranslate">
INSTALLED_APPS &plus;= (
   'dajaxice',
   'dajax'
)
</pre>
<p>Make sure in the same settings.py file, you have the following &minus;</p>
<pre class="prettyprint notranslate">
TEMPLATE_LOADERS = (
   'django.template.loaders.filesystem.Loader',
   'django.template.loaders.app_directories.Loader',
   'django.template.loaders.eggs.Loader',
)

TEMPLATE_CONTEXT_PROCESSORS = (
   'django.contrib.auth.context_processors.auth',
   'django.core.context_processors.debug',
   'django.core.context_processors.i18n',
   'django.core.context_processors.media',
   'django.core.context_processors.static',
   'django.core.context_processors.request',
   'django.contrib.messages.context_processors.messages'
)

STATICFILES_FINDERS = (
   'django.contrib.staticfiles.finders.FileSystemFinder',
   'django.contrib.staticfiles.finders.AppDirectoriesFinder',
   'dajaxice.finders.DajaxiceFinder',
)

DAJAXICE_MEDIA_PREFIX = 'dajaxice'
</pre>
<p>Now go to the myapp/url.py file and make sure you have the following to set dajax URLs and to load dajax statics js files &minus;</p>
<pre class="prettyprint notranslate">
from dajaxice.core import dajaxice_autodiscover, dajaxice_config
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from django.conf import settings

Then dajax urls:

urlpatterns &plus;= patterns('',
   url(r'^%s/' % settings.DAJAXICE_MEDIA_PREFIX, include('dajaxice.urls')),)
	
urlpatterns &plus;= staticfiles_urlpatterns()
</pre>
<p>Let us create a simple form based on our Dreamreal model to store it, using Ajax (means no refresh).</p>
<p>At first, we need our Dreamreal form in myapp/form.py.</p>
<pre class="prettyprint notranslate">
class DreamrealForm(forms.Form):
   website = forms.CharField(max_length = 100)
   name = forms.CharField(max_length = 100)
   phonenumber = forms.CharField(max_length = 50)
   email = forms.CharField(max_length = 100)
</pre>
<p>Then we need an ajax.py file in our application: myapp/ajax.py. That's where is our logic, that's where we put the function that will be saving our form then return the popup &minus;</p>
<pre class="prettyprint notranslate">
from dajaxice.utils import deserialize_form
from myapp.form import DreamrealForm
from dajax.core import Dajax
from myapp.models import Dreamreal

@dajaxice_register
def send_form(request, form):
   dajax = Dajax()
   form = DreamrealForm(deserialize_form(form))
   
   if form.is_valid():
      dajax.remove_css_class('#my_form input', 'error')
      dr = Dreamreal()
      dr.website = form.cleaned_data.get('website')
      dr.name = form.cleaned_data.get('name')
      dr.phonenumber = form.cleaned_data.get('phonenumber')
      dr.save()
      
      dajax.alert("Dreamreal Entry %s was successfully saved." % 
         form.cleaned_data.get('name'))
   else:
      dajax.remove_css_class('#my_form input', 'error')
      for error in form.errors:
         dajax.add_css_class('#id_%s' % error, 'error')
			
   return dajax.json()
</pre>
<p>Now let's create the dreamreal.html template, which has our form &minus;</p>
<pre class="prettyprint notranslate">
&lt;html&gt;
   &lt;head&gt;&lt;/head&gt;
   &lt;body&gt;
   
      &lt;form action = "" method = "post" id = "my_form" accept-charset = "utf-8"&gt;
         {{ form.as_p }}
         &lt;p&gt;&lt;input type = "button" value = "Send" onclick = "send_form();"&gt;&lt;/p&gt;
      &lt;/form&gt;
      
   &lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Add the view that goes with the template in myapp/views.py &minus;</p>
<pre class="prettyprint notranslate">
def dreamreal(request):
   form = DreamrealForm()
   return render(request, 'dreamreal.html', locals())
</pre>
<p>Add the corresponding URL in myapp/urls.py &minus;</p>
<pre class="result notranslate">
url(r'^dreamreal/', 'dreamreal', name = 'dreamreal'),
</pre>
<p>Now let's add the necessary in our template to make the Ajax work &minus;</p>
<p>At the top of the file add &minus;</p>
<pre class="prettyprint notranslate">
{% load static %}
{% load dajaxice_templatetags %}
</pre>
<p>And in the &lt;head&gt; section of our dreamreal.html template add &minus;</p>
<p>We are using the JQuery library for this example, so add &minus;</p>
<pre class="prettyprint notranslate">
&lt;script src = "{% static '/static/jquery-1.11.3.min.js' %}" 
   type = "text/javascript" charset = "utf-8"&gt;&lt;/script&gt;
&lt;script src = "{% static '/static/dajax/jquery.dajax.core.js' %}"&gt;&lt;/script&gt;
</pre>
<p>The Ajax function that will be called on click &minus;</p>
<pre class="prettyprint notranslate">
&lt;script&gt;

   function send_form(){
      Dajaxice.myapp.send_form(Dajax.process,{'form':$('#my_form').serialize(true)});
   }
&lt;/script&gt;
</pre>
<p>Note that you need the “jquery-1.11.3.min.js” in your static files directory, and also the jquery.dajax.core.js. To make sure all dajax static files are served under your static directory, run &minus;</p>
<pre class="result notranslate">
$python manage.py collectstatic
</pre>
<p><b>Note</b> &minus; Sometimes the jquery.dajax.core.js can be missing, if that happens, just download the source and take that file and put it under your static folder.</p>
<p>You will get to see the following screen, upon accessing /myapp/dreamreal/ &minus;</p>
<img src="/django/images/using_django_dajax.jpg" alt="Using Django-dajax" />
<p>On submit, you will get the following screen &minus;</p>
<img src="/django/images/using_django_dajax_response.jpg" alt="Using Django-dajax Response" />
<div class="mui-container-fluid button-borders show">
<div class="pre-btn">
<a href="/django/django_ajax.htm"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="/django/django_useful_resources.htm">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>
<div class="google-bottom-ads">
<div>Advertisements</div>
<script><!--
var width = 580;
var height = 400;
var format = "580x400_as";
if( window.innerWidth < 468 ){
   width = 300;
   height = 250;
   format = "300x250_as";
}
google_ad_client = "pub-7133395778201029";
google_ad_width = width;
google_ad_height = height;
google_ad_format = format;
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<div class="space-bottom"></div>
</div>
</div>
<!-- Tutorial Content Ends Here -->
<!-- Right Column Starts Here -->
<div class="mui-col-md-2 google-right-ads">
<div class="space-top"></div>
<div class="google-right-ad" style="margin: 0px auto !important;margin-top:5px;">
<script><!--
google_ad_client = "pub-2537027957187252";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="google-right-ad">
<div class="adsbyvli" data-ad-slot="vi_9012177"></div>
<script>(vitag.Init = window.vitag.Init || []).push(function(){viAPItag.display("vi_9012177")})</script>
</div>
<div class="space-bottom"></div>
<div class="google-right-ad">
<div class="adsbyvli" data-ad-slot="vi_9013289"></div>
<script>(vitag.Init = window.vitag.Init || []).push(function(){viAPItag.display("vi_9013289")})</script>
</div>
<div class="space-bottom" style="margin-bottom:15px;"></div>
</div>
<!-- Right Column Ends Here -->
</div>
</div>
<div class="clear"></div>
<footer id="footer">
<div class="mui--text-center">
<div class="mui--text-caption mui--text-light">
<a href="/index.htm" class="logo"><img class="img-responsive" src="/images/logo-black.png" alt="Tutorials Point" title="Tutorials Point"></a>
</div>
<ul class="mui-list--inline mui--text-body2 mui--text-light">
<li><a href="/about/index.htm"><i class="fal fa-globe"></i> About us</a></li>
<li><a href="/about/about_terms_of_use.htm"><i class="fal fa-asterisk"></i> Terms of use</a></li>
<li><a href="/about/about_privacy.htm#cookies"> <i class="fal fa-shield-check"></i> Cookies Policy</a></li>
<li><a href="/about/faq.htm"><i class="fal fa-question-circle"></i> FAQ's</a></li>
<li><a href="/about/about_helping.htm"><i class="fal fa-hands-helping"></i> Helping</a></li>
<li><a href="/about/contact_us.htm"><i class="fal fa-map-marker-alt"></i> Contact</a></li>
</ul>
<div class="mui--text-caption mui--text-light bottom-copyright-text">&copy; Copyright 2019. All Rights Reserved.</div>
</div>
<div id="privacy-banner">
  <div>
    <p>
      We use cookies to provide and improve our services. By using our site, you consent to our Cookies Policy.
      <a id="banner-accept" href="#">Accept</a>
      <a id="banner-learn" href="/about/about_cookies.htm" target="_blank">Learn more</a>
    </p>
  </div>
</div>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-232293-17"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-232293-6');
</script>
</footer>
</body>
</html>
