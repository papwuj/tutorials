<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Symfony - Quick Guide</title>
<meta charset="utf-8">
<meta name="description" content="Symfony - Quick Guide - A PHP web framework is a collection of classes, which helps to develop a web application. Symfony is an open-source MVC framework for rapidly developing modern "/>
<meta name="keywords" content="C, C++, Python, Java, HTML, CSS, JavaScript, SQL, PHP, jQuery, XML, DOM, Bootstrap, Tutorials, Articles, Programming, training, learning, quiz, preferences, examples, code"/>
<link rel="canonical" href="https://www.tutorialspoint.com/symfony/symfony_quick_guide.htm" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
<script src="/theme/js/script-min-v2.js?v=3"></script>
<link rel="stylesheet" href="/theme/css/style-min-v2.css?v=6">
<script src="//services.bilsyndication.com/adv1/?d=901" defer="" async=""></script>
<script> var vitag = vitag || {};</script>
<script> vitag.outStreamConfig = { enablePC: false, enableMobile: false };</script>  
<style>
.right-menu .mui-btn {
    background-color:#0cadd5;
}
a.demo {
    background:#0cadd5;
}
li.heading {
    background:#0cadd5;
}
.course-box{background:#0cadd5}
.home-intro-sub p{color:#0cadd5}
</style>
</head>
<body>
<header id="header">
<!-- Top sub-menu Starts Here -->
<div class="mui-appbar mui-container-fulid top-menu">
<div class="mui-container">
<div class="top-menu-item home">
<a href="https://www.tutorialspoint.com/index.htm" target="_blank" title="TutorialsPoint - Home"><i class="fal fa-home"></i> <span>Home</span></a>
</div>
<div class="top-menu-item qa">
<a href="https://www.tutorialspoint.com/about/about_careers.htm" target="_blank" title="Job @ Tutorials Point"><i class="fa fa-suitcase"></i> <span>Jobs</span></a>
</div>
<div class="top-menu-item tools">
<a href="https://www.tutorialspoint.com/online_dev_tools.htm" target="_blank" title="Tools - Online Development and Testing Tools"><i class="fal fa-cogs"></i> <span>Tools</span></a>
</div>
<div class="top-menu-item coding-ground">
<a href="https://www.tutorialspoint.com/codingground.htm" target="_blank" title="Coding Ground - Free Online IDE and Terminal"><i class="fal fa-code"></i> <span>Coding Ground </span></a> 
</div>
<div class="top-menu-item current-affairs">
<a href="https://www.tutorialspoint.com/current_affairs.htm" target="_blank" title="Daily Current Affairs"><i class="fal fa-layer-plus"></i> <span>Current Affairs</span></a>
</div>
<div class="top-menu-item upsc-notes">
<a href="https://www.tutorialspoint.com/upsc_ias_exams.htm" target="_blank" title="UPSC IAS Exams Notes - TutorialsPoint"><i class="fal fa-user-tie"></i> <span>UPSC Notes</span></a>
</div>      
<div class="top-menu-item online-tutoris">
<a href="https://www.tutorialspoint.com/tutor_connect/index.php" target="_blank" title="Top Online Tutors - Tutor Connect"><i class="fal fa-user"></i> <span>Online Tutors</span></a>
</div>
<div class="top-menu-item whiteboard">
<a href="https://www.tutorialspoint.com/whiteboard.htm" target="_blank" title="Free Online Whiteboard"><i class="fal fa-chalkboard"></i> <span>Whiteboard</span></a>
</div>
<div class="top-menu-item net-meeting">
<a href="https://www.tutorialspoint.com/netmeeting.php" target="_blank" title="A free tool for online video conferencing"><i class="fal fa-chalkboard-teacher"></i> <span>Net Meeting</span></a> 
</div>
<div class="top-menu-item articles">
<a href="https://www.tutorix.com" target="_blank" title="Tutorx - The Best Learning App" rel="nofollow"><i class="fal fa-video"></i> <span>Tutorix</span></a> 
</div>        
<div class="social-menu-item">
<a href="https://www.facebook.com/tutorialspointindia" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Facebook"><i class="fab fa-facebook-f"></i></a> 
<a href="https://www.twitter.com/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Twitter"><i class="fab fa-twitter"></i></a>
<a href="https://www.linkedin.com/company/tutorialspoint" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint @ Linkedin"><i class="fab fa-linkedin-in"></i></a>
<a href="https://www.youtube.com/channel/UCVLbzhxVTiTLiVKeGV7WEBg" target="_blank" rel="nofollow" data-placement="bottom" title="tutorialspoint YouTube"><i class="fab fa-youtube"></i></a>
</div>        
</div>
</div>
<!-- Top sub-menu Ends Here -->
<!-- Top main-menu Starts Here -->
<div class="mui-appbar mui-container-fulid mui--appbar-line-height mui--z1" id="logo-menu">
<div class="mui-container">
<div class="left-menu">
<a href="https://www.tutorialspoint.com/index.htm" title="Tutorialspoint">
<img class="tp-logo" alt="tutorialspoint" src="/symfony/images/logo.png">
</a>
<div class="mui-dropdown">
<a class="mui-btn mui-btn--primary categories" data-mui-toggle="dropdown"><i class="fa fa-th-large"></i> 
<span>Categories <span class="mui-caret"></span></span></a>            
<ul class="mui-dropdown__menu cat-menu">
<li>
<ul>
<li><a href="/academic_tutorials.htm"><i class="fa fa-caret-right"></i> Academic Tutorials</a></li>
<li><a href="/big_data_tutorials.htm"><i class="fa fa-caret-right"></i> Big Data &amp; Analytics </a></li>
<li><a href="/computer_programming_tutorials.htm"><i class="fa fa-caret-right"></i> Computer Programming </a></li>
<li><a href="/computer_science_tutorials.htm"><i class="fa fa-caret-right"></i> Computer Science </a></li>
<li><a href="/database_tutorials.htm"><i class="fa fa-caret-right"></i> Databases </a></li>
<li><a href="/devops_tutorials.htm"><i class="fa fa-caret-right"></i> DevOps </a></li>
<li><a href="/digital_marketing_tutorials.htm"><i class="fa fa-caret-right"></i> Digital Marketing </a></li>
<li><a href="/engineering_tutorials.htm"><i class="fa fa-caret-right"></i> Engineering Tutorials </a></li>
<li><a href="/upsc_ias_exams.htm"><i class="fa fa-caret-right"></i> Exams Syllabus </a></li>
<li><a href="/famous_monuments.htm"><i class="fa fa-caret-right"></i> Famous Monuments </a></li>
<li><a href="/gate_exams_tutorials.htm"><i class="fa fa-caret-right"></i> GATE Exams Tutorials</a></li>
<li><a href="/latest_technologies.htm"><i class="fa fa-caret-right"></i> Latest Technologies </a></li>
<li><a href="/machine_learning_tutorials.htm"><i class="fa fa-caret-right"></i> Machine Learning </a></li>
<li><a href="/mainframe_tutorials.htm"><i class="fa fa-caret-right"></i> Mainframe Development </a></li>
<li><a href="/management_tutorials.htm"><i class="fa fa-caret-right"></i> Management Tutorials </a></li>
<li><a href="/maths_tutorials.htm"><i class="fa fa-caret-right"></i> Mathematics Tutorials</a></li>
<li><a href="/microsoft_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> Microsoft Technologies </a></li>
<li><a href="/misc_tutorials.htm"><i class="fa fa-caret-right"></i> Misc tutorials </a></li>
<li><a href="/mobile_development_tutorials.htm"><i class="fa fa-caret-right"></i> Mobile Development </a></li>
<li><a href="/java_technology_tutorials.htm"><i class="fa fa-caret-right"></i> Java Technologies </a></li>
<li><a href="/python_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> Python Technologies </a></li>
<li><a href="/sap_tutorials.htm"><i class="fa fa-caret-right"></i> SAP Tutorials </a></li>
<li><a href="/scripting_lnaguage_tutorials.htm"><i class="fa fa-caret-right"></i>Programming Scripts </a></li>
<li><a href="/selected_reading.htm"><i class="fa fa-caret-right"></i> Selected Reading </a></li>
<li><a href="/software_quality_tutorials.htm"><i class="fa fa-caret-right"></i> Software Quality </a></li>
<li><a href="/soft_skill_tutorials.htm"><i class="fa fa-caret-right"></i> Soft Skills </a></li>
<li><a href="/telecom_tutorials.htm"><i class="fa fa-caret-right"></i> Telecom Tutorials </a></li>
<li><a href="/upsc_ias_exams.htm"><i class="fa fa-caret-right"></i> UPSC IAS Exams </a></li>
<li><a href="/web_development_tutorials.htm"><i class="fa fa-caret-right"></i> Web Development </a></li>
<li><a href="/sports_tutorials.htm"><i class="fa fa-caret-right"></i> Sports Tutorials </a></li>
<li><a href="/xml_technologies_tutorials.htm"><i class="fa fa-caret-right"></i> XML Technologies </a></li>
<li><a href="/multi_language_tutorials.htm"><i class="fa fa-caret-right"></i> Multi-Language Tutorials</a></li>
<li><a href="/questions_and_answers.htm"><i class="fa fa-caret-right"></i> Interview Questions</a></li>
</ul>
</li>
</ul>
<div class="clear"></div>
</div> 
</div>
<div class="right-menu">
<div class="toc-toggle">
<a href="javascript:void(0);"><i class="fa fa-bars"></i></a>
</div>
<div class="mobile-search-btn">
<a href="https://www.tutorialspoint.com/search.htm"><i class="fal fa-search"></i></a>
</div>
<div class="search-box">
<form method="get" class="" name="searchform" action="https://www.google.com/search" target="_blank" novalidate="">
<input type="hidden" name="sitesearch" value="www.tutorialspoint.com" class="user-valid valid">
<input class="header-search-box" type="text" id="search-string" name="q" placeholder="Search your favorite tutorials..." onfocus="if (this.value == 'Search your favorite tutorials...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Search your favorite tutorials...';}" autocomplete="off">
<button><i class="fal fa-search"></i></button>
</form>
</div>
<div class="menu-btn library-btn">
<a href="https://www.tutorialspoint.com/tutorialslibrary.htm"><i class="fal fa-cubes"></i> <span>Library</span></a>
</div>
<div class="menu-btn videos-btn">
<a href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fal fa-video"></i> <span>Videos</span></a> 
</div>
<div class="menu-btn videos-btn">
<a href="https://www.tutorialspoint.com/questions/index.php"><i class="fa fa-location-arrow"></i> <span>Q/A</span></a>
</div>
<div class="menu-btn ebooks-btn">
<a href="https://store.tutorialspoint.com"><i class="fal fa-book"></i> <span>eBooks</span></a>
</div>
<div class="mui-dropdown">
<button class="mui-btn mui-btn--primary" data-mui-toggle="dropdown">
<span class="mui-caret"></span>
</button>
<ul class="mui-dropdown__menu">
<li><a href="https://www.tutorialspoint.com/tutorialslibrary.htm"><i class="fal fa-cubes"></i> <span>Library</span></a></li>
<li><a href="https://www.tutorialspoint.com/videotutorials/index.htm"><i class="fal fa-video"></i> <span>Videos</span></a></li>
<li><a href="https://store.tutorialspoint.com"><i class="fal fa-book"></i> <span>eBooks</span></a></li>
</ul>
</div>
</div>
</div>
</div>
<!-- Top main-menu Ends Here -->
</header>
<div class="mui-container-fluid content">
<div class="mui-container">
<!-- Tutorial ToC Starts Here -->
<div class="mui-col-md-3 tutorial-toc">
<div class="mini-logo">
<img src="/symfony/images/symfony-mini-logo.jpg" alt="Symfony Tutorial" />
</div>
<ul class="toc chapters">
<li class="heading">Symfony Tutorial</li>
<li><a href="/symfony/index.htm">Symfony - Home</a></li>
<li><a href="/symfony/symfony_introduction.htm">Symfony - Introduction</a></li>
<li><a href="/symfony/symfony_installation.htm">Symfony - Installation</a></li>
<li><a href="/symfony/symfony_architecture.htm">Symfony - Architecture</a></li>
<li><a href="/symfony/symfony_components.htm">Symfony - Components</a></li>
<li><a href="/symfony/symfony_service_container.htm">Symfony - Service Container</a></li>
<li><a href="/symfony/symfony_events_eventlistener.htm">Symfony - Events &amp; EventListener</a></li>
<li><a href="/symfony/symfony_expression.htm">Symfony - Expression</a></li>
<li><a href="/symfony/symfony_bundles.htm">Symfony -  Bundles</a></li>
<li><a href="/symfony/symfony_creating_simple_web_application.htm">Creating a Simple Web Application</a></li>
<li><a href="/symfony/symfony_controllers.htm">Symfony - Controllers</a></li>
<li><a href="/symfony/symfony_routing.htm">Symfony - Routing</a></li>
<li><a href="/symfony/symfony_view_engine.htm">Symfony - View Engine</a></li>
<li><a href="/symfony/symfony_doctrine_orm.htm">Symfony - Doctrine ORM</a></li>
<li><a href="/symfony/symfony_forms.htm">Symfony - Forms </a></li>
<li><a href="/symfony/symfony_validation.htm">Symfony - Validation</a></li>
<li><a href="/symfony/symfony_file_uploading.htm">Symfony - File Uploading</a></li>
<li><a href="/symfony/symfony_ajax_control.htm">Symfony - Ajax Control</a></li>
<li><a href="/symfony/symfony_cookies_session_management.htm">Cookies &amp; Session Management</a></li>
<li><a href="/symfony/symfony_internationalization.htm">Symfony - Internationalization</a></li>
<li><a href="/symfony/symfony_logging.htm">Symfony - Logging</a></li>
<li><a href="/symfony/symfony_email_management.htm">Symfony - Email Management</a></li>
<li><a href="/symfony/symfony_unit_testing.htm">Symfony - Unit Testing</a></li>
<li><a href="/symfony/symfony_advanced_concepts.htm">Symfony - Advanced Concepts</a></li>
<li><a href="/symfony/symfony_rest_edition.htm">Symfony - REST Edition</a></li>
<li><a href="/symfony/symfony_cmf_edition.htm">Symfony - CMF Edition</a></li>
<li><a href="/symfony/symfony_complete_working_example.htm">Complete Working Example</a></li>
</ul>
<ul class="toc chapters">
<li class="heading">Symfony Useful Resources</li>
<li><a href="/symfony/symfony_quick_guide.htm">Symfony - Quick Guide</a></li>
<li><a href="/symfony/symfony_useful_resources.htm">Symfony - Useful Resources</a></li>
<li><a href="/symfony/symfony_discussion.htm">Symfony - Discussion</a></li>
</ul>
<ul class="toc reading">
<li class="sreading">Selected Reading</li>
<li><a target="_top" href="/upsc_ias_exams.htm">UPSC IAS Exams Notes</a></li>
<li><a target="_top" href="/developers_best_practices/index.htm">Developer's Best Practices</a></li>
<li><a target="_top" href="/questions_and_answers.htm">Questions and Answers</a></li>
<li><a target="_top" href="/effective_resume_writing.htm">Effective Resume Writing</a></li>
<li><a target="_top" href="/hr_interview_questions/index.htm">HR Interview Questions</a></li>
<li><a target="_top" href="/computer_glossary.htm">Computer Glossary</a></li>
<li><a target="_top" href="/computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div>
<!-- Tutorial ToC Ends Here -->
<!-- Tutorial Content Starts Here -->
<div class="mui-col-md-6 tutorial-content">
<h1>Symfony - Quick Guide</h1>
<hr />
<div class="top-ad-heading">Advertisements</div>
<div style="text-align: center;">
<script><!--
google_ad_client = "pub-7133395778201029";
var width = document.getElementsByClassName("tutorial-content")[0].clientWidth - 40;
google_ad_width = width;
google_ad_height = 150;
google_ad_format = width + "x150_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="mui-container-fluid button-borders">
<div class="pre-btn">
<a href="/symfony/symfony_complete_working_example.htm"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="/symfony/symfony_useful_resources.htm">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>
<div class="clearer"></div>
<h1>Symfony - Introduction</h1>
<p>A PHP web framework is a collection of classes, which helps to develop a web application. Symfony is an open-source MVC framework for rapidly developing modern web applications. Symfony is a full-stack web framework. It contains a set of reusable PHP components. You can use any Symfony components in applications, independently from the framework.</p>  
<p>Symfony has a huge amount of functionality and active community. It has a flexible configuration using YAML, XML, or annotations. Symfony integrates with an independent library and PHP Unit. Symfony is mainly inspired by Ruby on Rails, Django, and Spring web application frameworks. Symfony components are being used by a lot of open source projects that include Composer, Drupal, and phpBB.</p>  
<p>The Symfony framework consists of several components, such as the HttpFoundation component that understands HTTP and offers a nice request and response object used by the other components. Others are merely helper components, such as the Validator, that helps to validate data. Kernel component is the heart of the system. Kernel is basically the ‘main class’ that manages the environment and has the responsibility of handling a http request.</p>  
<p>Symfony’s well-organized structure, clean code, and good programming practices make web development easier. Symfony is very flexible, used to build micro-sites and handle enterprise applications with billions of connections.</p>
<h2>Symfony Framework - Features</h2>
<p>Symfony is designed to optimize the development of web applications and grows in features with every release.</p>
<p>Some of the salient features of Symfony Framework is as follows &minus;</p>
<ul class="list">
<li>Model-View-Controller based system</li>
<li>High-performance PHP framework</li>
<li>Flexible URI routing</li>
<li>Code reusable and easier to maintain</li>
<li>Session management</li>
<li>Error logging</li>
<li>Full-featured database classes with support for several platforms</li>
<li>Supports a huge and active community</li>
<li>Set of decoupled and reusable components</li>
<li>Standardization and interoperability of applications</li>
<li>Security against cross-site request forgery and other attacks</li>
<li>Twig template engine</li>
</ul>
<p>Symfony offers a lot of flexibility to developers. It has great features for debugging, code readability, and developing extensible programs.</p>
<p>Symfony is a full-stack web framework; it is a very effective tool for creating web applications. Numerous companies offer Symfony services to clients.</p>
<p>Following are some of the benefits that you get by using the Symfony Framework.</p>
<ul class="list">
<li><p><b>Microframework</b> &minus; Symfony can be used to develop a specific functionality. You don’t need to redevelop or install the entire framework.</p></li>
<li><p>Reduces development time overhead.</p></li>
<li><p>Extremely mature templating engine and quickly delivers content to the users.</p></li>
<li><p><b>Compatible and extensible</b> &minus; Programmers can easily extend all framework classes.</p></li>
</ul>
<h2>Symfony Framework - Applications</h2>
<p>Symfony components can be used as a part of other applications such as Drupal, Laravel, phpBB, Behat, Doctrine, and Joomla.</p>
<ul class="list">
<li><p><b>Drupal 8</b> &minus; Drupal is an open source content management PHP framework. Drupal 8 uses core layers of Symfony and extends it to provide support for Drupal modules.</p></li>
<li><p><b>Thelia</b> &minus; Thelia is a Symfony-based e-commerce solution. Initially, Thelia was written in PHP code and MySQL, however, it was lagging to produce faster applications. To overcome this drawback, Thelia integrated with Symfony to develop the applications in a customizable way.</p></li>
<li><p><b>Dailymotion</b> &minus; Dailymotion is one of the world's largest independent video entertainment website based in France. Once they decided to migrate open source framework with a large community, Dailymotion developers decided to use Symfony components features for its flexibility.</p></li>
</ul>
<h1>Symfony - Installation</h1>
<p>This chapter explains how to install Symfony framework on your machine. Symfony framework installation is very simple and easy. You have two methods to create applications in Symfony framework. First method is using Symfony Installer, an application to create a project in Symfony framework. Second method is composer-based installation. Let’s go through each of the methods one by one in detail in the following sections.</p>
<h2>System Requirements</h2>
<p>Before moving to installation, you require the following system requirements.</p>
<ul class="list">
<li>Web server (Any one of the following)
<ul class="list">
<li>WAMP (Windows)</li>
<li>LAMP (Linux)</li>
<li>XAMP (Multi-platform)</li>
<li>MAMP (Macintosh)</li>
<li>Nginx (Multi-platform)</li>
<li>Microsoft IIS (Windows)</li>
<li>PHP built-in development web server (Multi-platform)</li>
</ul>
</li>
<li>Operating System: Cross-platform</li>
<li>Browser Support:  IE (Internet Explorer 8+), Firefox, Google Chrome, Safari, Opera</li>
<li>PHP Compatibility: PHP 5.4 or later. To get the maximum benefit, use the latest version.</li>
</ul>
<p>We will use PHP built-in development web server for this tutorial.</p>
<h2>Symfony Installer</h2>
<p>Symfony Installer is used to create web applications in Symfony framework. Now, let’s configure the Symfony installer using the following command.</p>
<pre class="result notranslate">
$ sudo mkdir -p /usr/local/bin 
$ sudo curl -LsS https://symfony.com/installer -o /usr/local/bin/symfony 
$ sudo chmod a+x /usr/local/bin/symfony
</pre>
<p>Now, you have installed Symfony installer on your machine.</p>
<h3>Create Your First Symfony Application</h3>
<p>Following syntax is used to create a Symfony application in the latest version.</p>
<h3>Syntax</h3>
<pre class="result notranslate">
symfony new app_name
</pre>
<p>Here, app_name is your new application name. You can specify any name you want.</p>
<h3>Example</h3>
<pre class="prettyprint notranslate">
symfony new HelloWorld
</pre>
<p>After executing the above command, you will see the following response.</p>
<pre class="result notranslate">
Downloading Symfony...  

0 B/5.5 MiB ░░░░░░░░░░░  
……………………………………………………………  
……………………………………………………………   
Preparing project...  
✔  Symfony 3.2.7 was successfully installed. Now you can:  
   * Change your current directory to /Users/../workspace/firstapp  
   * Configure your application in app/config/parameters.yml file.  
   * Run your application: 
      1. Execute the php bin/console server:run command. 
      2. Browse to the http://localhost:8000 URL.  
   * Read the documentation at http://symfony.com/doc 
</pre>
<p>This command creates a new directory called “firstapp/“ that contains an empty project of Symfony framework latest version.</p>
<h3>Install Specific Version</h3>
<p>If you need to install a specific Symfony version, use the following command.</p>
<pre class="result notranslate">
symfony new app_name 2.8 
symfony new app_name 3.1
</pre>
<h2>Composer-based Installation</h2>
<p>You can create Symfony applications using the Composer. Hopefully, you have installed the composer on your machine. If the composer is not installed, download and install it.</p>
<p>The following command is used to create a project using the composer.</p>
<pre class="result notranslate">
$ composer create-project symfony/framework-standard-edition app_name
</pre>
<p>If you need to specify a specific version, you can specify in the above command.</p>
<h2>Running the Application</h2>
<p>Move to the project directory and run the application using the following command.</p>
<pre class="result notranslate">
cd HelloWorld 
php bin/console server:run 
</pre>
<p>After executing the above command, open your browser and request the url <b>http://localhost:8000/</b>. It produces the following result.</p>
<h3>Result</h3>
<img src="/symfony/images/running_application.jpg" alt="Running Application" />
<h1>Symfony - Architecture</h1>
<p>Symfony is basically a collection of high quality components and bundles. Components are collection of classes providing a single core functionality. For example, <b>Cache component</b> provides cache functionality, which can be added to any application. Components are building blocks of a Symfony application. Symfony has 30+ high quality components, which are used in many PHP framework such as Laravel, Silex, etc.</p>
<p>Bundles are similar to plugin but easy to create and easy to use. Actually, a Symfony application is itself a bundle composed of other bundles. A single bundle can use any number of Symfony component and also third-party components to provide features such as Webframework, database access, etc. Symfony core web-framework is a bundle called FrameworkBundle and there is a bundle called FrameworkExtraBundle, which provides more sophisticated options to write a web application.</p>
<p>The relationship between the Components, Bundles, and Symfony application is specified in the following diagram.</p>
<img src="/symfony/images/architecture.jpg" alt="Architecture" />
<h2>Web Framework</h2>
<p>Symfony is mainly designed to write high-quality web application with relative ease. It provides various options to write different types of web application from simple web site to advanced REST based web services. Symfony provides web framework as separate bundles. The common bundles used in Symfony web framework are as follows &minus;</p>
<ul class="list">
<li>FrameworkBundle</li>
<li>FrameworkExtraBundle</li>
<li>DoctrineBundle</li>
</ul>
<p>Symfony web framework is based on Model-View-Controller (MVC) architecture. <b>Model</b> represents the structure of our business entities. <b>View</b> shows the models to the user in the best possible way depending on the situation. <b>Controller</b> handles all the request from the user, does the actual work by interacting with Model and finally provides the View with the necessary data to show it to the user.</p>
<p>Symfony web framework provides all the high-level features required for an enterprisegrade application. Following is a simple workflow of Symfony web application.</p>
<img src="/symfony/images/symfony_web_application.jpg" alt="Web Application" />
<p>The workflow consists of the following steps.</p>
<p><b>Step 1</b> &minus; The user sends a request to the application through the browser, say http://www.symfonyexample.com/index.</p>
<p><b>Step 2</b> &minus; The browser will send a request to the web server, say Apache web server.</p>
<p><b>Step 3</b> &minus; The web server will forward the request to the underlying PHP, which in turn sends it to Symfony web framework.</p>
<p><b>Step 4</b> &minus; HttpKernel is the core component of the Symfony web framework. HttpKernel resolves the controller of the given request using Routing component and forward the request to the target controller.</p>
<p><b>Step 5</b> &minus; All the business logic takes place in the target controller.</p>
<p><b>Step 6</b> &minus; The controller will interact with Model, which in turn interacts with Datasource through Doctrine ORM.</p>
<p><b>Step 7</b> &minus; Once the controller completes the process, it either generates the response itself or through View Engine, and sends it back to the web server.</p>
<p><b>Step 8</b> &minus; Finally, the response will be sent to the requested browser by the web server.</p>
<h1>Symfony - Components</h1>
<p>As discussed earlier, Symfony components are standalone PHP library providing a specific feature, which can be used in any PHP application. Useful new components are being introduced in each and every release of Symfony. Currently, there are 30+ high quality components in Symfony framework. Let us learn about the usage of Symfony components in this chapter.</p>
<h2>Installing a Symfony Component</h2>
<p>Symfony components can be installed easily using the composer command. Following generic command can be used to install any Symfony component.</p>
<pre class="result notranslate">
cd /path/to/project/dir 
composer require symfony/&lt;component_name&gt; 
</pre>
<p>Let us create a simple php application and try to install <b>Filesystem</b> component.</p>
<p><b>Step 1</b> &minus; Create a folder for the application, <b>filesystem-example</b></p>
<pre class="result notranslate">
cd /path/to/dev/folder 
mdkir filesystem-example 
cd filesystem-example 
</pre>
<p><b>Step 2</b> &minus; Install Filesystem component using the following command.</p>
<pre class="result notranslate">
composer require symfony/filesystem  
</pre>
<p><b>Step 3</b> &minus; Create a file <b>main.php</b> and enter the following code.</p>
<pre class="result notranslate">
&lt;?php 
   require_once __DIR__ . '/vendor/autoload.php'; 
   use Symfony\Component\Filesystem\Filesystem; 
   use Symfony\Component\Filesystem\Exception\IOExceptionInterface; 
   
   $fs = new Filesystem(); 
   try { 
      $fs-&gt;mkdir('./sample-dir'); 
      $fs-&gt;touch('./sample-dir/text.txt'); 
   } catch (IOExceptionInterface $e) { 
      echo $e; 
   } 
?&gt;  
</pre>
<p>The first line is very important, which loads all the necessary classes from all the components installed using the Composer command. The next lines use the Filesystem class.</p>
<p><b>Step 4</b> &minus; Run the application using the following command and it will create a new folder <b>sample-dir</b> and a file <b>test.txt</b> under it.</p>
<pre class="result notranslate">
php main.php
</pre>
<h2>Details of Symfony Components</h2>
<p>Symfony provides components ranging from simple feature, say file system to advanced feature, say events, container technology, and dependency injection. Let us know about all the components one by one in the following sections.</p>
<h3>Filesystem</h3>
<p>Filesystem component provides a basic system command related to files and directories such as file creation, folder creation, file existence, etc. Filesystem component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/filesystem
</pre>
<h3>Finder</h3>
<p>Finder component provides fluent classes to find files and directories in a specified path. It provides an easy way to iterate over the files in a path. Finder component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/finder
</pre>
<h3>Console</h3>
<p>Console component provides various options to easily create commands, which can be executed in a terminal. Symfony uses the <b>Command</b> component extensively to provide various functionalities such as creating a new application, creating a bundle, etc. Even the PHP build in web server can be invoked using Symfony command, <b>php bin/console server:run</b> as seen in the installation section. The <b>Console</b> component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/console
</pre>
<p>Let us create a simple application and create a command, <b>HelloCommand</b> using the <b>Console</b> component and invoke it.</p>
<p><b>Step 1</b> &minus; Create a project using the following command.</p>
<pre class="result notranslate">
cd /path/to/project 
composer require symfony/console 
</pre>
<p><b>Step 2</b> &minus; Create a file <b>main.php</b> and include the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   require __DIR__ . '/vendor/autoload.php'; 
   use Symfony\Component\Console\Application; 
   
   $app = new Application(); 
   $app-&gt;run(); 
?&gt; 
</pre>
<p><b>Application</b> class sets up the necessary functionality of a bare-bone console application.</p>
<p><b>Step 3</b> &minus; Run the application, <b>php main.php</b>, which will produce the following result.</p>
<pre class="result notranslate">
Console Tool  
Usage: 
   command [options] [arguments]  
Options: 
   -h, --help            Display this help message 
   -q, --quiet           Do not output any message 
   -V, --version         Display this application version 
         --ansi            Force ANSI output 
         --no-ansi         Disable ANSI output 
   -n, --no-interaction  Do not ask any interactive question 
   -v|vv|vvv, --verbose  Increase the verbosity of messages: 1 for normal output, 
      2 for more verbose output and 3 for debug  
Available commands: 
   help  Displays help for a command 
   list  Lists commands
</pre>
<p><b>Step 4</b> &minus; Create a class called <b>HelloCommand</b> extending <b>Command</b> class in the <b>main.php</b> itself.</p>
<pre class="result notranslate">
use Symfony\Component\Console\Command\Command; 
use Symfony\Component\Console\Input\InputInterface; 
use Symfony\Component\Console\Output\OutputInterface; 
use Symfony\Component\Console\Input\InputArgument;

class HelloCommand extends Command { 
}
</pre>
<p>The application uses following four classes available in <b>Command</b> component.</p>
<ul class="list">
<li><p><b>Command</b> &minus; Used to create a new command</p></li>
<li><p><b>InputInterface</b> &minus; Used to set user inputs</p></li>
<li><p><b>InputArgument</b> &minus; Used to get user inputs</p></li>
<li><p><b>OutputInterface</b> &minus; Used to print output to the console</p></li>
</ul>
<p><b>step 5</b> &minus; Create a function <b>configure()</b> and set name, description, and help text.</p>
<pre class="prettyprint notranslate">
protected function configure() { 
   $this 
      -&gt;setName('app:hello') 
      -&gt;setDescription('Sample command, hello') 
      -&gt;setHelp('This command is a sample command') 
} 
</pre>
<p><b>step 6</b> &minus; Create an input argument, <b>user</b> for the command and set as mandatory.</p>
<pre class="prettyprint notranslate">
protected function configure() { 
   $this 
      -&gt;setName('app:hello') 
      -&gt;setDescription('Sample command, hello') 
      -&gt;setHelp('This command is a sample command') 
      -&gt;addArgument('name', InputArgument::REQUIRED, 'name of the user'); 
}
</pre>
<p><b>step 7</b> &minus; Create a function <b>execute()</b> with two arguments <b>InputArgument</b> and <b>OutputArgument</b>.</p>
<pre class="prettyprint notranslate">
protected function execute(InputInterface $input, OutputInterface $output) { 
}
</pre>
<p><b>step 8</b> &minus; Use <b>InputArgument</b> to get the user details entered by the user and print it to the console using <b>OutputArgument</b>.</p>
<pre class="prettyprint notranslate">
protected function execute(InputInterface $input, OutputInterface $output) { 
   $name = $input-&gt;getArgument('name'); 
   $output-&gt;writeln('Hello, ' . $name); 
}
</pre>
<p><b>step 9</b> &minus; Register the <b>HelloCommand</b> into the application using the <b>add</b> method of <b>Application</b> class.</p>
<pre class="result notranslate">
$app-&gt;add(new HelloCommand()); 
</pre>
<p>The complete application is as follows.</p>
<pre class="prettyprint notranslate">
&lt;?php 
   require __DIR__ . '/vendor/autoload.php'; 
   use Symfony\Component\Console\Application; 
   use Symfony\Component\Console\Command\Command; 
   use Symfony\Component\Console\Input\InputInterface; 
   use Symfony\Component\Console\Output\OutputInterface; 
   use Symfony\Component\Console\Input\InputArgument;  
   
   class HelloCommand extends Command { 
      protected function configure() { 
         $this 
            -&gt;setName('app:hello') 
            -&gt;setDescription('Sample command, hello') 
            -&gt;setHelp('This command is a sample command') 
            -&gt;addArgument('name', InputArgument::REQUIRED, 'name of the user'); 
      }  
      protected function execute(InputInterface $input, OutputInterface $output) { 
         $name = $input-&gt;getArgument('name'); 
         $output-&gt;writeln('Hello, ' . $name);
      }  
      $app = new Application(); 
      $app-&gt;add(new HelloCommand()); 
      $app-&gt;run(); 
   }         
?&gt;      
</pre>
<p><b>Step 10</b> &minus; Now, execute the application using the following command and the result will be Hello, Jon as expected.</p>
<pre class="result notranslate">
php main.php app:hello Jon
</pre>
<p>Symfony comes with a pre-built binary called <b>console</b> in the bin directory of any Symfony web application, which can be used to invoke the commands in an application.</p>
<h3>Process</h3>
<p>Process component provides options to run any system command in a sub-process, in a safe and efficient manner. Process component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/process
</pre>
<h3>ClassLoader</h3>
<p>ClassLoader component provides implementation for both <b>PSR-0</b> and <b>PSR-4</b> class loader standard. It can be used to auto-load the classes. It will be depreciated in the near future. Composer-based class loader is preferred over this component. ClassLoader component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/class-loader
</pre>
<h3>PropertyAccess</h3>
<p>PropertyAccess component provides various options to read and write an object and array details using the string notation. For example, an array <b>Product</b> with key <b>price</b> can be accessed dynamically using <b>[price]</b> string.</p>
<pre class="prettyprint notranslate">
$product = array( 
   'name' =&gt; 'Cake' 
   'price' =&gt; 10 
);  
var priceObj = $propertyAccesserObj-&gt;getValue($product, '[price]');
</pre>
<p>PropertyAccess component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/property-access 
</pre>
<h3>PropertyInfo</h3>
<p>PropertyInfo component is similar to PropertyAccess component, however it only works with PHP objects and provides much more functionality.</p>
<pre class="prettyprint notranslate">
class Product { 
   private $name = 'Cake'; 
   private $price = 10;  
   
   public function getName() { 
      return $this-&gt;name; 
   }  
   public function getPrice() { 
      return $this-&gt;price; 
   } 
}  
$class = Product::class; 
$properties = $propertyInfoObj->getProperties($class);  
/* 
   Example Result 
   -------------- 
   array(2) { 
      [0] =&gt; string(4) "name" 
      [1] =&gt; string(5) "price" 
   } 
*/
</pre>
<p>PropertyInfo component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/property-info
</pre>
<h3>EventDispatcher</h3>
<p>EventDispatcher component provides an event-based programming in PHP. It enables the objects to communicate with each other by dispatching events and listening to them. We will learn how to create event and listen to them in the Events and Event Listener chapter.</p>
<p>EventDispatcher component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/event-dispatcher
</pre>
<h3>DependencyInjection</h3>
<p>DependencyInjection component provides an easy and efficient mechanism to create an object with its dependency. When a project grows, it features a lot of classes with deep dependency, which needs to be handled correctly. Otherwise, the project fails. DependencyInjection provides a simple and robust container to handle the dependency. We will learn about the containers and the dependency injection concept in Service Container chapter.</p>
<p>DependencyInjection component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/dependency-injection
</pre>
<h3>Serializer</h3>
<p>Serializer component provides an option to convert a PHP object into a specific format such as XML, JSON, Binary, etc., and then allows it to convert it back into an original object without any data loss.</p>
<p>Serializer component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/serializer
</pre>
<h3>Config</h3>
<p>Config component provides options to load, parse, read, and validate configurations of type XML, YAML, PHP and ini. It provides various options to load configuration details from database as well. This is one of the important components useful in configuring web application in a clear and concise manner. Config component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/config
</pre>
<h3>ExpressionLanguage</h3>
<p>ExpessionLanguage component provides a full-fledged expression engine. Expressions are one-liner intended to return a value. The expression engine enables to easily compile, parse, and get the value from an expression. It enables one or more expression to be used in a configuration environment (file) by a non-PHP programmer, say a system administrator. ExpressionLanguage component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/expression-language
</pre>
<h3>OptionsResolver</h3>
<p>OptionsResolver component provides a way to validate the option system used in our system. For example, database setting is placed in an array, dboption with host, username, password, etc., as keys. You need to validate the entries before using it to connect to a database. OptionsResolver simplifies this task by providing a simple class OptionsResolver and a method resolver, which resolves the database setting and if there is any validation issue, it will report it.</p>
<pre class="prettyprint notranslate">
$options = array( 
   'host'     =&gt; '&lt;db_host&gt;', 
   'username' =&gt; '&lt;db_user&gt;', 
   'password' =&gt; '&lt;db_password&gt;', 
);  
$resolver = new OptionsResolver(); 
$resolver-&gt;setDefaults(array( 
   'host'     =&gt; '&lt;default_db_host&gt;', 
   'username' =&gt; '&lt;default_db_user&gt;', 
   'password' =&gt; '&lt;default_db_password&gt;', 
)); 
$resolved_options = $resolver-&gt;resolve($options);
</pre>
<p>OptionsResolver component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/options-resolver 
</pre>
<h3>Dotenv</h3>
<p>Dotenv component provides various options to parse .env files and the variable defined in them to be accessible via <b>getenv(), $_ENV</b>, or <b>$_SERVER</b>. Dotenv component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/dotenv
</pre>
<h3>Cache</h3>
<p>Cache component provides an extended <b>PSR-6</b> implementation. It can be used to add cache functionality to our web application. Since it follows <b>PSR-6</b>, it is easy to get started and it can be easily used in place of another PSR-6 based cache component. Cache component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/cache 
</pre>
<h3>Intl</h3>
<p>Intl component is the replacement library for C Intl extension. Intl component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/intl
</pre>
<h3>Translation</h3>
<p>Translation component provides various options to internationalize our application. Normally, the translation details of different languages will be stored in a file, one file per language, and it will be loaded dynamically during runtime of the application. There are different formats to write a translation file. Translation component provides various options to load any type of format, such as plain PHP file, CSV, ini, Json, Yaml, ICU Resource file, etc. Translation component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/translation
</pre>
<h3>Workflow</h3>
<p>Workflow component provides advanced tools to process a finite state machine. By providing this functionality in a simple and object-oriented way, Workflow component enables advanced programming in PHP with relative ease. We will learn about it in detail in the Advanced Concept chapter.</p>
<p>Workflow component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/workflow 
</pre>
<h3>Yaml</h3>
<p>Yaml component provides an option that parses the YAML file format and converts it into PHP arrays. It also able to write YAML file from plain php array. Yaml component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/yaml
</pre>
<h3>Ldap</h3>
<p>Ldap component provides PHP classes to connect to a LDAP or Active directory server and authenticate the user against it. It provides an option to connect to a Windows domain controller. Ldap component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/ldap
</pre>
<h3>Debug</h3>
<p>Debug component provides various options to enable debugging in PHP environment. Normally, debugging PHP code is hard but the debug component provides simple classes to ease the process of debugging and make it clean and structured. Debug component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/debug
</pre>
<h3>Stopwatch</h3>
<p>Stopwatch component provides Stopwatch class to profile our PHP code. A simple usage is as follows.</p>
<pre class="prettyprint notranslate">
use Symfony\Component\Stopwatch\Stopwatch; 
$stopwatch = new Stopwatch(); 
$stopwatch-&gt;start('somename');  

// our code to profile 
$profiled_data = $stopwatch-&gt;stop('somename');  
echo $profiled_data-&gt;getPeriods()
</pre>
<p>Stopwatch component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/stopwatch
</pre>
<h3>VarDumper</h3>
<p>VarDumper component provides better <b>dump()</b> function. Just include the VarDumper component and use the dump function to get the improved functionality. VarDumper component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/var-dumper
</pre>
<h3>BrowserKit</h3>
<p>BrowserKit component provides an abstract browser client interface. It can be used to test web application programmatically. For example, it can request a form, enter the sample data and submit it to find any issue in the form programmatically. BrowserKit component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/browser-kit
</pre>
<h3>PHPUnit Bridge</h3>
<p>PHPUnit Bridge component provides many options to improve the PHPUnit testing environment. PHPUnit Bridge component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/phpunit-bridge
</pre>
<h3>Asset</h3>
<p>Asset component provides a generic asset handling in a web application. It generates URL for the assets such as CSS, HTML, JavaScript and also performs version maintenance. We will check the asset component in detail in View Engine chapter. Asset component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/asset
</pre>
<h3>CssSelector</h3>
<p>CssSelector component provides an option to convert CSS based Selectors into XPath expression. A web developer knows the CSS based Selectors expression more than XPath expression, but the most efficient expression to find an element in HTML and XML document is <b>XPath Expression</b>.</p>
<p>CssSelector enables the developer to write the expression in <i>CSS Selectors</i>, however, the component converts it to XPath expression before executing it. Thus, the developer has an advantage of simplicity of CSS Selectors and efficiency of XPath expression.</p>
<p>CssSelector component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/css-selector
</pre>
<h3>DomCrawler</h3>
<p>DomCrawler component provides various options to find the element in HTML and XML document using DOM concept. It also provides option to use XPath expression to find an element. DomCrawler component can be used along with CssSelector component to use CSS selectors instead of XPath expression. DomCrawler component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/dom-crawler
</pre>
<h3>Form</h3>
<p>Form component enables easy creation of form in a web application. We will learn form programming in detail in Form chapter. Form component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/form
</pre>
<h3>HttpFoundation</h3>
<p>HttpFoundation component provides an object-oriented layer to the HTTP specification. By default, PHP provides HTTP request and response details as array-based object such as <b>$_GET, $_POST, $_FILES, $_SESSION</b>, etc. HTTP based functionality such as setting a cookie can be done using simple, plain old function <b>setCookie()</b>. HttpFoundation provides all HTTP related functionality in a small set of classes like Request, Response, RedirectResponse, etc., We will learn about these classes in the later chapters.</p>
<p>HttpFoundation component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/http-foundation
</pre>
<h3>HttpKernel</h3>
<p>HttpKernel component is the core component in the Symfony web setup. It provides all the functionalities required for a web application - from receiving the <b>Request</b> object to sending back the <b>Response</b> object. The complete architecture of the Symfony web application is provided by HttpKernel as discussed in the architecture of a Symfony web framework.</p>
<p>HttpKernel component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/http-kernel
</pre>
<h3>Routing</h3>
<p>Routing component maps the HTTP request to a pre-defined set of configuration variables. Routing decides which part of our application should handle a request. We will learn more about the routing in Routing chapter.</p>
<p>Routing component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/filesystem
</pre>
<h3>Templating</h3>
<p>Templating component provides the necessary infrastructure to build an efficient template system. Symfony uses the Templating component for its View engine implementation. We will learn more about Templating component in View engine chapter.</p>
<p>Templating component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/templating
</pre>
<h3>Validator</h3>
<p>Validator component provides an implementation of <b>JSR-303 Bean Validation Specification</b>. It can be used to validate a form in a web environment. We will learn more about Validator in Validation chapter.</p>
<p>Validator component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/validator
</pre>
<h3>Security</h3>
<p>Security component provides complete security system for our web application, be it HTTP basic authentication, HTTP digest authentication, interactive form based authentication, X.509 certification login, etc. It also provides authorization mechanism based on the user role through in-built ACL system. We will learn more in detail in the Advanced Concept chapter.</p>
<p>Security component can be installed using the following command.</p>
<pre class="result notranslate">
composer require symfony/security
</pre>
<h1>Symfony - Service Container</h1>
<p>In any application, objects tend to increase as the application grows. As objects increase, the dependency between the objects also increases. Object dependency needs to be handled properly for a successful application.</p>
<p>As discussed in the Components chapter, Symfony provides an easy and efficient component, <b>DependencyInjection</b> to handle object dependency. A service container is a container of objects with properly resolved dependency between them. Let us learn how to use DependencyInjection component in this chapter.</p>
<p>Let us create a <b>Greeter</b> class. The purpose of the Greeter class is to greet the user as shown in the following example.</p>
<pre class="result notranslate">
$greeter = new Greeter('Hi'); 
$greeter-&gt;greet('Jon'); // print "Hi, Jon" 
</pre>
<p>The complete code of the Greeter class is as follows.</p>
<pre class="prettyprint notranslate">
class Greeter { 
   private $greetingText; 
   
   public function __construct($greetingText) { 
      $this-&gt;greetingText = $greetingText; 
   }  
   public function greet($name) { 
      echo $this-&gt;greetingText . ", " . $name . "\r\n"; 
   } 
}
</pre>
<p>Now, let us add Greeter class to the service container. Symfony provides <b>ContainerBuilder</b> to create a new container. Once the container is created, Greeter class can be registered into it using the container's register method.</p>
<pre class="prettyprint notranslate">
use Symfony\Component\DependencyInjection\ContainerBuilder; 
$container = new ContainerBuilder(); 
$container 
   -&gt;register('greeter', 'Greeter') 
   -&gt;addArgument('Hi');
</pre>
<p>Here, we have used static argument to specify the greeting text, Hi. Symfony provides a dynamic setting of parameter as well. To use a dynamic parameter, we need to choose a name and specify it between % and the parameter can be set using container's <b>setParameter</b> method.</p>
<pre class="prettyprint notranslate">
$container = new ContainerBuilder(); 
$container 
   -&gt;register('greeter', 'Greeter') 
   -&gt;addArgument('%greeter.text%');  
$container-&gt;setParameter('greeter.text', 'Hi');
</pre>
<p>We have registered a Greeter class with proper setting. Now, we can ask the container to provide a properly configured Greeter object using the container <b>get</b> method.</p>
<pre class="prettyprint notranslate">
$greeter = $container-&gt;get('greeter'); 
$greeter-&gt;greet('Jon'); // prints "Hi, Jon" 
</pre>
<p>We have successfully registered a class, Greeter into container, fetched it from the container and used it. Now, let us create another class <b>User</b>, which use Greeter class and see how to register it.</p>
<pre class="prettyprint notranslate">
class User { 
   private $greeter;  
   public $name; 
   public $age;  
   
   public function setGreeter(\Greeter $greeter) { 
      $this-&gt;greeter = $greeter; 
   }  
   public function greet() { 
      $this-&gt;greeter-&gt;greet($this-&gt;name); 
   } 
}
</pre>
<p>The User class gets the <i>Greeter</i> class using one of its setter method, <b>setGreeter</b>. For this scenario, Symfony provides a method, <b>addMethodCall</b> and a class, <b>Reference</b> to refer another class as shown in the following code.</p>
<pre class="prettyprint notranslate">
use Symfony\Component\DependencyInjection\Reference;  
$container 
   -&gt;register('user', 'User') 
   -&gt;addMethodCall('setGreeter', array(new Reference('greeter'))); 
</pre>
<p>Finally, we have registered two classes, <b>Greeter</b> and <b>User</b> having a strong relation between them. Now, we can safely fetch the User object with properly configured Greeter class from the container as shown in the following code.</p>
<pre class="prettyprint notranslate">
$container-&gt;setParameter('greeter.text', 'Hi'); 
$user = $container-&gt;get('user'); 
$user-&gt;name = "Jon"; 
$user-&gt;age = 20; 
$user-&gt;greet(); // Prints "Hi, Jon"
</pre>
<p>We have seen how to configure an object in a container using PHP itself. Symfony provides other mechanisms as well. They are XML and YAML configuration files. Let us see how to configure a container using YAML. For this, install <b>symfony/config</b> and <b>symfony/yaml</b> components along with <b>symfony/dependency-injection</b> components.</p>
<pre class="result notranslate">
cd /path/to/dir 
mkdir dependency-injection-example 
cd dependency-injection-example 
composer require symfony/dependency-injection 
composer require symfony/config 
composer require symfony/yaml
</pre>
<p>YAML configuration will be written in a separate file, <b>services.yml</b>. YAML configuration consists of two sections, <b>parameters</b> and <b>services</b>. Parameters section defines all required parameters. Services section defines all objects. Services section is further divided into multiple sections namely, <b>class, arguments,</b> and <b>calls</b>. Class specifies the actual class. Arguments specifies the constructor's arguments. Finally, calls specify the setter methods. Another class can be referred using @ symbol, @greeter.</p>
<pre class="prettyprint notranslate">
parameters: 
   greeter.text: 'Hello' 
services: 
   greeter: 
      class: Greeter
      arguments: ['%greeter.text%'] 
   user: 
      class: User 
      calls: 
         - [setGreeter, ['@greeter']] 
</pre>
<p>Now, <b><i>services.yml</i></b> can be loaded and configured using <b>FileLoader</b> and <b>YamlFileLoader</b> as shown in the following code.</p>
<pre class="prettyprint notranslate">
use Symfony\Component\Config\FileLocator; 
use Symfony\Component\DependencyInjection\Loader\YamlFileLoader;  

$yamlContainer = new ContainerBuilder(); 
$loader = new YamlFileLoader($yamlContainer, new FileLocator(__DIR__)); 
$loader-&gt;load('services.yml');  

$yamlUser = $yamlContainer-&gt;get('user'); 
$yamlUser-&gt;name = "Jon"; 
$yamlUser-&gt;age = 25; 
$yamlUser-&gt;greet(); 
</pre>
<p>The complete code listing is as follows.</p>
<h3>main.php</h3>
<pre class="prettyprint notranslate">
&lt;?php  
   require __DIR__ . '/vendor/autoload.php';  
   use Symfony\Component\DependencyInjection\ContainerBuilder; 
   use Symfony\Component\Config\FileLocator; 
   use Symfony\Component\DependencyInjection\Loader\YamlFileLoader; 
   use Symfony\Component\DependencyInjection\Reference;  
   
   class Greeter { 
      private $greetingText; 
      
      public function __construct($greetingText) {
         $this-&gt;greetingText = $greetingText; 
      }  
      public function greet($name) { 
         echo $this-&gt;greetingText . ", " . $name . "\r\n"; 
      } 
   }  
   class User { 
      private $greeter;  
      public $name; 
      public $age;  
      
      public function setGreeter(\Greeter $greeter) { 
         $this-&gt;greeter = $greeter; 
      }  
      public function greet() { 
         $this-&gt;greeter-&gt;greet($this-&gt;name); 
      } 
   }  
   $container = new ContainerBuilder(); 
   $container 
      -&gt;register('greeter', 'Greeter') 
      -&gt;addArgument('%greeter.text%');  
   $container 
      -&gt;register('user', 'User') 
      -&gt;addMethodCall('setGreeter', array(new Reference('greeter')));
   
   $container-&gt;setParameter('greeter.text', 'Hi'); 
   $greeter = $container-&gt;get('greeter'); 
   $greeter-&gt;greet('Jon'); 
   
   $user = $container-&gt;get('user'); 
   $user-&gt;name = "Jon"; 
   $user-&gt;age = 20; 
   $user-&gt;greet();  
   
   $yamlContainer = new ContainerBuilder(); 
   $loader = new YamlFileLoader($yamlContainer, new FileLocator(__DIR__)); 
   $loader-&gt;load('services.yml');  

   $yamlHello = $yamlContainer-&gt;get('greeter'); 
   $yamlHello-&gt;greet('Jon'); 
   
   $yamlUser = $yamlContainer-&gt;get('user'); 
   $yamlUser-&gt;name = "Jon"; 
   $yamlUser-&gt;age = 25; 
   $yamlUser-&gt;greet();  
?&gt;
</pre>
<h3>services.yml</h3>
<pre class="prettyprint notranslate">
parameters: 
   greeter.text: 'Hello' 
services: 
   greeter: 
      class: Greeter 
      arguments: ['%greeter.text%'] 
   user: 
      class: User 
      calls: 
         - [setGreeter, ['@greeter']] 
</pre>
<p>Symfony web framework uses the dependency injection component extensively. All the components are bound by the centralized service container. Symfony web framework exposes the container in all its <b>Controller</b> through <b>container</b> property. We can get all object registered in it, say logger, mailer, etc., through it.</p>
<pre class="result notranslate">
$logger = $this-&gt;container-&gt;get('logger'); 
$logger-&gt;info('Hi'); 
</pre>
<p>To find the object registered in the container, use the following command.</p>
<pre class="result notranslate">
cd /path/to/app 
php bin/console debug:container
</pre>
<p>There are around 200+ objects in the <b>hello</b> web app created in the installation chapter.</p>
<h1>Symfony - Events and EventListener</h1>
<p>Symfony provides event-based programming through its <b>EventDispatcher</b> component. Any enterprise application needs event-based programming to create a highly customizable application. Events is one of the main tools for the objects to interact with each other. Without events, an object does not interact efficiently.</p>
<p>The process of event based programming can be summarized as - An object, called <b>Event source</b> asks the central dispatcher object to register an event, say user.registered. One or more objects, called listener asks the central dispatcher object that it wants to listen to a specific event, say user.registered. At some point of time, the Event source object asks the central dispatcher object to dispatch the event, say user.registered along with an Event object with the necessary information. The central dispatcher informs all listener objects about the event, say user.registered and its Event* object.</p>
<p>In event-based programming, we have four types of objects: Event Source, Event Listener, Even Dispatcher, and the Event itself.</p>
<p>Let us write a simple application to understand the concept.</p>
<p><b>Step 1</b> &minus; Create a project, <b>event-dispatcher-example</b>.</p>
<pre class="prettyprint notranslate">
cd /path/to/dir 
mkdir event-dispatcher-example 
cd event-dispatcher-example 
composer require symfony/event-dispatcher 
</pre>
<p><b>Step 2</b> &minus; Create a class, <b>.User</b>.</p>
<pre class="prettyprint notranslate">
class User { 
   public $name; 
   public $age; 
}  

$user = new User(); 
$user-&gt;name = "Jon"; 
$user-&gt;age = 25
</pre>
<p><b>Step 3</b> &minus; Create an event, <b>UserRegisteredEvent</b>.</p>
<pre class="prettyprint notranslate">
use Symfony\Component\EventDispatcher\Event;  
class UserRegisteredEvent extends Event {
   const NAME = 'user.registered';  
   protected $user;  
   
   public function __construct(User $user) { 
      $this-&lt;user = $user; 
   }  
   public function getUser() { 
      return $this-&lt;user; 
   } 
}  
$event = new UserRegisteredEvent($user);
</pre>
<p>Here, <b>UserRegisteredEvent</b> has access to <b>User</b> object. The name of the event is <b>user.registered</b>.</p>
<p><b>Step 4</b> &minus; Create a listener, <b>UserListener</b>.</p>
<pre class="prettyprint notranslate">
class UserListener { 
   public function onUserRegistrationAction(Event $event) { 
      $user = $event-&gt;getUser(); 
         echo $user-&gt;name . "\r\n"; 
         echo $user-&gt;age . "\r\n"; 
   } 
}  
$listener = new UserListener(); 
</pre>
<p><b>Step 5</b> &minus; Create an event dispatcher object.</p>
<pre class="result notranslate">
use Symfony\Component\EventDispatcher\EventDispatcher;  
$dispatcher = new EventDispatcher(); 
</pre>
<p><b>Step 6</b> &minus; Connect listener and event using dispatcher object and its method, <b>addListener</b>.</p>
<pre class="result notranslate">
$dispatcher 
   -&gt;addListener( 
      UserRegisteredEvent::NAME,  
      array($listener, 'onUserRegistrationAction'));  
</pre>
<p>We can also add an anonymous function as event listener as shown in the following code.</p>
<pre class="prettyprint notranslate">
$dispatcher 
   -&gt;addListener( 
      UserRegisteredEvent::NAME,  
      
      function(Event $event) { 
         $user = $event-&gt;getUser(); 
         echo $user-&gt;name . "\r\n"; 
      }); 
</pre>
<p><b>Step 7</b> &minus; Finally, fire / dispatch the event using event dispatcher's method, <b>dispatch</b>.</p>
<pre class="result notranslate">
 $dispatcher-&gt;dispatch(UserRegisteredEvent::NAME, $event);
</pre>
<p>The complete code listing is as follows.</p>
<h3>main.php</h3>
<pre class="prettyprint notranslate">
&lt;?php  
   require __DIR__ . '/vendor/autoload.php';  
   use Symfony\Component\EventDispatcher\EventDispatcher; 
   use Symfony\Component\EventDispatcher\Event;  

   class User { 
      public $name; 
      public $age; 
   }  
   class UserRegisteredEvent extends Event { 
      const NAME = 'user.registered';  
      protected $user;  
      
      public function __construct(User $user) { 
         $this->user = $user; 
      }  
      public function getUser() { 
         return $this->user; 
      } 
   }  
   class UserListener { 
      public function onUserRegistrationAction(Event $event) { 
         $user = $event->getUser(); 
         echo $user->name . "\r\n"; 
         echo $user->age . "\r\n"; 
      } 
   } 
   $user = new User(); 
   $user-&gt;name = "Jon"; 
   $user-&gt;age = 25;  

   $event = new UserRegisteredEvent($user); 
   $listener = new UserListener();  

   $dispatcher = new EventDispatcher();  
   $dispatcher 
      ->addListener( 
         UserRegisteredEvent::NAME, 
         
         function(Event $event) { 
            $user = $event->getUser(); 
            echo $user->name . "\r\n"; 
         });  
   $dispatcher 
      ->addListener( 
         UserRegisteredEvent::NAME, array($listener, 'onUserRegistrationAction'));

   $dispatcher->dispatch(UserRegisteredEvent::NAME, $event); 
?&gt;
</pre>
<h3>Result</h3>
<pre class="result notranslate">
Jon 
Jon 
25
</pre>
<p>Symfony web framework has a lot of events and one can register listener for those events and program it accordingly. One of the sample event is kernel.exception and the corresponding event is <b>GetResponseForExceptionEvent</b>, which holds the response object (the output of a web request). This is used to catch the exception and modify the response with generic error information instead of showing runtime error to the users.</p>
<h1>Symfony - Expression</h1>
<p>As we discussed earlier, expression language is one of the salient features of Symfony application. Symfony expression is mainly created to be used in a configuration environment. It enables a non-programmer to configure the web application with little effort. Let us create a simple application to test an expression.</p>
<p><b>Step 1</b> &minus; Create a project, <b>expression-language-example</b>.</p>
<pre class="result notranslate">
cd /path/to/dir 
mkdir expression-language-example 
cd expression-language-example 
composer require symfony/expression-language 
</pre>
<p><b>Step 2</b> &minus; Create an expression object.</p>
<pre class="result notranslate">
use Symfony\Component\ExpressionLanguage\ExpressionLanguage; 
$language = new ExpressionLanguage();
</pre>
<p><b>Step 3</b> &minus; Test a simple expression.</p>
<pre class="result notranslate">
echo "Evaluated Value: " . $language-&gt;evaluate('10 + 12') . "\r\n" ; 
echo "Compiled Code: " . $language-&gt;compile('130 % 34') . "\r\n" ;
</pre>
<p><b>Step 4</b> &minus; Symfony expression is powerful such that it can intercept a PHP object and its property as well in the expression language.</p>
<pre class="result notranslate">
class Product { 
   public $name; 
   public $price; 
} 
$product = new Product(); 
$product-&gt;name = 'Cake'; 
$product-&gt;price = 10;  

echo "Product price is " . $language 
   -&gt;evaluate('product.price', array('product' =&gt; $product,)) . "\r\n";  
echo "Is Product price higher than 5: " . $language 
   -&gt;evaluate('product.price &gt; 5', array('product' =&gt; $product,)) . "\r\n"; 
</pre>
<p>Here, the expression <b>product.price</b> and <b>product.price &gt; 5</b> intercept <b>$product</b> object's property <b>price</b> and evaluate the result.</p>
<p>The complete coding is as follows.</p>
<h3>main.php</h3>
<pre class="prettyprint notranslate">
&lt;?php 
   require __DIR__ . '/vendor/autoload.php'; 
   use Symfony\Component\ExpressionLanguage\ExpressionLanguage; 
   $language = new ExpressionLanguage();  

   echo "Evaluated Value: " . $language-&gt;evaluate('10 + 12') . "\r\n" ; 
   echo "Compiled Code: " . $language-&gt;compile('130 % 34') . "\r\n" ;  
   
   class Product { 
      public $name; 
      public $price; 
   }  
   $product = new Product(); 
   $product-&gt;name = 'Cake'; 
   $product-&gt;price = 10;  

   echo "Product price is " . $language 
      -&gt;evaluate('product.price', array('product' =&gt; $product,)) . "\r\n"; 
   echo "Is Product price higher than 5: " . $language 
      -&gt;evaluate('product.price &gt; 5', array('product' =&gt; $product,)) . "\r\n"; 
?&gt; 
</pre>
<h3>Result</h3>
<pre class="result notranslate">
Evaluated Value: 22 
Compiled Code: (130 % 34) 
Product price is 10 
Is Product price higher than 5: 1
</pre>
<h1>Symfony - Bundles</h1>
<p>A Symfony bundle is a collection of files and folders organized in a specific structure. The bundles are modeled in such a way that it can be reused in multiple applications. The main application itself is packaged as a bundle and it is generally called <b>AppBundle</b>.</p>
<p>A bundle may be packaged specific to an application such as AdminBundle (admin section), BlogBundle (site's blog), etc. Such bundles cannot be shared between an application. Instead, we can model a certain part of the application such as blogs as generic bundle so that we can simply copy the bundle from one application to another application to reuse the blog functionality.</p>
<h2>Structure of a Bundle</h2>
<p>The basic structure of a bundle is as follows.</p>
<ul class="list">
<li><p><b>Controller</b> &minus; All controller need to be placed here.</p></li>
<li><p><b>DependencyInjection</b> &minus; All dependency injection related code and configuration need to be placed here.</p></li>
<li><p><b>Resources/config</b> &minus; Bundle related configurations are placed here.</p></li>
<li><p><b>Resources/view</b> &minus; Bundle related view templates are placed here.</p></li>
<li><p><b>Resources/public</b> &minus; Bundle related stylesheets, JavaScripts, images, etc., are placed here.</p></li>
<li><p><b>Tests</b> &minus; Bundle related unit test files are placed here.</p></li>
</ul>
<h2>Creating a Bundle</h2>
<p>Let us create a simple bundle, <b>TutorialspointDemoBundle</b> in our <b>HelloWorld</b> application.</p>
<p><b>Step 1</b> &minus; Choose a namespace. Namespace of a bundle should include vendor name and bundle name. In our case, it is <b>Tutorialspoint\DemoBundle</b>.</p>
<p><b>Step 2</b> &minus; Create an empty class, <b>TutorialspointDemoBundle</b> by extending <b>Bundle</b> class and place it under <b>src/Tutorialspoint/DemoBundle</b>.</p>
<pre class="prettyprint notranslate">
namespace Tutorialspoint\DemoBundle; 
use Symfony\Component\HttpKernel\Bundle\Bundle;  

class TutorialspointDemoBundle extends Bundle { 
}
</pre>
<p><b>Step 3</b> &minus; Register the class in the list of bundle supported by the application in <b>AppKernel</b> class.</p>
<pre class="prettyprint notranslate">
public function registerBundles() { 
   $bundles = array( 
      // ... 
      // register your bundle 
      new Tutorialspoint\DemoBundle\TutorialspointDemoBundle(), 
   ); 
   return $bundles; 
}
</pre>
<p>This is all is needed to create an empty bundle and all other concepts are the same as that of the application. Symfony also provides a console command <b>generate:bundle</b> to simplify the process of creating a new bundle, which is as follows.</p>
<pre class="result notranslate">
php bin/console generate:bundle --namespace = Tutorialspoint/DemoBundle
</pre>
<h3>Result</h3>
<pre class="result notranslate">
Welcome to the Symfony bundle generator!

Are you planning on sharing this bundle across multiple applications? [no]: no  

Your application code must be written in bundles. This command helps 
you generate them easily.  

Give your bundle a descriptive name, like BlogBundle. 
Bundle name [Tutorialspoint/DemoBundle]:   

In your code, a bundle is often referenced by its name. It can be the 
concatenation of all namespace parts but it's really up to you to come 
up with a unique name (a good practice is to start with the vendor name). 
Based on the namespace, we suggest TutorialspointDemoBundle.  

Bundle name [TutorialspointDemoBundle]:  
Bundles are usually generated into the src/ directory. Unless you're 
doing something custom, hit enter to keep this default!
Target Directory [src/]:   

What format do you want to use for your generated configuration?  

Configuration format (annotation, yml, xml, php) [annotation]:

Bundle generation

&gt; Generating a sample bundle skeleton into app/../src/Tutorialspoint/DemoBundle 
   created ./app/../src/Tutorialspoint/DemoBundle/ 
   created ./app/../src/Tutorialspoint/DemoBundle/TutorialspointDemoBundle.php 
   created ./app/../src/Tutorialspoint/DemoBundle/Controller/ 
   created ./app/../src/Tutorialspoint/DemoBundle/Controller/DefaultController.php 
   created ./app/../tests/TutorialspointDemoBundle/Controller/   
   created ./app/../tests/TutorialspointDemoBundle/Controller/DefaultControllerTest.php 
   created ./app/../src/Tutorialspoint/DemoBundle/Resources/views/Default/   
   created ./app/../src/Tutorialspoint/DemoBundle/Resources/views/Default/index.html.twig 
   created ./app/../src/Tutorialspoint/DemoBundle/Resources/config/ 
   created ./app/../src/Tutorialspoint/DemoBundle/Resources/config/services.yml 
&gt; Checking that the bundle is autoloaded 
&gt; Enabling the bundle inside app/AppKernel.php 
   updated ./app/AppKernel.php 
&gt; Importing the bundle's routes from the app/config/routing.yml file 
   updated ./app/config/routing.yml 
&gt; Importing the bundle's services.yml from the app/config/config.yml file 
   updated ./app/config/config.yml 
Everything is OK! Now get to work :).  
</pre>
<h1>Creating a Simple Web Application</h1>
<p>This chapter explains how to create a simple application in Symfony framework. As discussed earlier, you know how to create a new project in Symfony.</p>
<p>We can take an example of “student” details. Let’s start by creating a project named “student” using the following command.</p>
<pre class="result notranslate">
symfony new student
</pre>
<p>After executing the command, an empty project is created.</p>
<h2>Controller</h2>
<p>Symfony is based on the Model-View-Controller (MVC) development pattern. MVC is a software approach that separates application logic from presentation. Controller plays an important role in the Symfony Framework. All the webpages in an application need to be handled by a controller.</p>
<p><b>DefaultController</b> class is located at <b>“src/AppBundle/Controller”</b>. You can create your own Controller class there.</p>
<p>Move to the location <b>“src/AppBundle/Controller”</b> and create a new <b>StudentController</b> class.</p>
<p>Following is the basic syntax for <b>StudentController</b> class.</p>
<h3>StudentController.php</h3>
<pre class="result notranslate">
namespace AppBundle\Controller; 
use Symfony\Component\HttpFoundation\Response;  
class StudentController { 
} 
</pre>
<p>Now, you have created a StudentController. In the next chapter, we will discuss more about the Controller in detail.</p>
<h3>Create a Route</h3>
<p>Once the Controller has been created, we need to route for a specific page. Routing maps request URI to a specific controller's method.</p>
<p>Following is the basic syntax for routing.</p>
<pre class="prettyprint notranslate">
namespace AppBundle\Controller;  
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route; 
use Symfony\Component\HttpFoundation\Response; 
use Symfony\Bundle\FrameworkBundle\Controller\Controller;  

class StudentController { 
   /** 
      * @Route("/student/home") 
   */ 
   public function homeAction() { 
      return new Response('Student details application!'); 
   } 
}
</pre>
<p>In the above syntax, <b>@Route(“/student/home”)</b> is the route. It defines the URL pattern for the page.</p>
<p><b>homeAction()</b> is the action method, where you can build the page and return a Response object.</p>
<p>We will cover routing in detail in the upcoming chapter. Now, request the url “http://localhost:8000/student/home” and it produces the following result.</p>
<h3>Result</h3>
<img src="/symfony/images/symfony_framework.jpg" alt="Symfony Framework" />
<h1>Symfony - Controllers</h1>
<p>Controller is responsible for handling each request that comes into Symfony application. Controller reads an information from the request. Then, creates and returns a response object to the client.</p>
<p>According to Symfony, <b>DefaultController</b> class is located at <b>“src/AppBundle/Controller”</b>. It is defined as follows.</p>
<h3>DefaultController.php</h3>
<pre class="prettyprint notranslate">
&lt;?php 
namespace AppBundle\Controller; 
use Symfony\Bundle\FrameworkBundle\Controller\Controller; 
use Symfony\Component\HttpFoundation\Response;  

class DefaultController extends Controller {  
} 
</pre>
<p>Here, the <b>HttpFoundation</b> component defines an object-oriented layer for the HTTP specification, and the <b>FrameworkBundle</b> contains most of the “base” framework functionality.</p>
<h2>Request Object</h2>
<p>The Request class is an object-oriented representation of the HTTP request message.</p>
<h3>Creating a Request Object</h3>
<p>Request can be created using <b>createFromGlobals()</b> method.</p>
<pre class="result notranslate">
use Symfony\Component\HttpFoundation\Request; 
$request = Request::createFromGlobals();
</pre>
<p>You can simulate a request using Globals. Instead of creating a request based on the PHP globals, you can also simulate a request.</p>
<pre class="prettyprint notranslate">
$request = Request::create( 
   '/student', 
   'GET', 
   array('name' =&gt; 'student1') 
);
</pre>
<p>Here, the <b>create()</b> method creates a request based on a URI, a method, and some parameters.</p>
<h3>Overriding a Request Object</h3>
<p>You can override the PHP global variables using the <b>overrideGlobals()</b> method. It is defined as follows.</p>
<pre class="result notranslate">
$request-&gt;overrideGlobals();
</pre>
<h3>Accessing a Request Object</h3>
<p>Request of a web page can be accessed in a controller (action method) using <b>getRequest()</b> method of the base controller.</p>
<pre class="result notranslate">
$request = $this-&gt;getRequest();
</pre>
<h3>Identifying a Request Object</h3>
<p>If you want to identify a request in your application, <b>“PathInfo"</b> method will return the unique identity of the request url. It is defined as follows.</p>
<pre class="result notranslate">
$request-&gt;getPathInfo();
</pre>
<h2>Response Object</h2>
<p>The only requirement for a controller is to return a Response object. A Response object holds all the information from a given request and sends it back to the client.</p>
<p>Following is a simple example.</p>
<h3>Example</h3>
<pre class="prettyprint notranslate">
use Symfony\Component\HttpFoundation\Response; 
$response = new Response(‘Default'.$name, 10);
</pre>
<p>You can define the Response object in JSON as follows.</p>
<pre class="prettyprint notranslate">
$response = new Response(json_encode(array('name' =&gt; $name))); 
$response-&gt;headers-&gt;set('Content-Type', 'application/json');
</pre>
<h3>Response Constructor</h3>
<p>The constructor contains three arguments &minus;</p>
<ul class="list">
<li>The response content</li>
<li>The status code</li>
<li>An array of HTTP headers</li>
</ul>
<p>Following is the basic syntax.</p>
<pre class="result notranslate">
use Symfony\Component\HttpFoundation\Response;  
$response = new Response( 
   'Content', 
   Response::HTTP_OK, 
   array('content-type' =&gt; 'text/html') 
); 
</pre>
<p>For example, you can pass the content argument as,</p>
<pre class="result notranslate">
$response-&gt;setContent(’Student details’);
</pre>
<p>Similarly, you can pass other arguments as well.</p>
<h3>Sending Response</h3>
<p>You can send a response to the client using the <b>send()</b> method. It is defined as follows.</p>
<pre class="result notranslate">
$response-&gt;send();
</pre>
<p>To redirect the client to another URL, you can use the <b>RedirectResponse</b> class.</p>
<p>It is defined as follows.</p>
<pre class="result notranslate">
use Symfony\Component\HttpFoundation\RedirectResponse;  
$response = new RedirectResponse('http://tutorialspoint.com/'); 
</pre>
<h2>FrontController</h2>
<p>A single PHP file that handles every request coming into your application. FrontController executes the routing of different URLs to internally different parts of the application.</p>
<p>Following is the basic syntax for FrontController.</p>
<pre class="result notranslate">
use Symfony\Component\HttpFoundation\Request; 
use Symfony\Component\HttpFoundation\Response;  

$request = Request::createFromGlobals();  
$path = $request-&gt;getPathInfo(); // the URI path being requested 

if (in_array($path, array('', '/')))  { 
   $response = new Response(’Student home page.'); 
} elseif (‘/about’ === $path) { 
   $response = new Response(’Student details page’); 
} else { 
   $response = new Response('Page not found.', Response::HTTP_NOT_FOUND); 
} 
$response-&gt;send();
</pre>
<p>Here, the <b>in_array()</b> function searches an array for a specific value.</p>
<h1>Symfony - Routing</h1>
<p>Routing maps request URI to a specific controller's method. In general, any URI has the following three parts &minus;</p>
<ul class="list">
<li>Hostname segment</li>
<li>Path segment</li>
<li>Query segment</li>
</ul>
<p>For example, in URI / URL, <b>http://www.tutorialspoint.com/index?q=data, www.tutorialspoint.com</b> is the host name segment, index is the path segment and q=data is the query segment. Generally, routing checks the page segment against a set of constraints. If any constraint matches, then it returns a set of values. One of the main value is the controller.</p>
<h2>Annotations</h2>
<p>Annotation plays an important role in the configuration of Symfony application. Annotation simplifies the configuration by declaring the configuration in the coding itself. Annotation is nothing but providing meta information about class, methods, and properties. Routing uses annotation extensively. Even though routing can be done without annotation, annotation simplifies routing to a large extent.</p>
<p>Following is a sample annotation.</p>
<pre class="result notranslate">
/** 
   * @Route(“/student/home”) 
*/ 
public function homeAction() { 
   // ... 
} 
</pre>
<h2>Routing Concepts</h2>
<p>Consider the <i>StudentController</i> class created in “student” project.</p>
<h3>StudentController.php</h3>
<pre class="prettyprint notranslate">
// src/AppBundle/Controller/StudentController.php 
namespace AppBundle\Controller;  

use Symfony\Bundle\FrameworkBundle\Controller\Controller; 
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route; 

class StudentController extends Controller { 
   /** 
      * @Route(“/student/home”) 
   */ 
   public function homeAction() { 
      // ... 
   }  
    
   /** 
      * @Route(“/student/about”) 
   */ 
   public function aboutAction() { 
   } 
} 
</pre>
<p>Here, the routing performs two steps. If you go to <b>/student/home</b>, the first route is matched then <b>homeAction()</b> is executed. Otherwise, If you go to <b>/student/about</b>, the second route is matched and then <b>aboutAction()</b> is executed.</p>
<h3>Adding Wildcard Formats</h3>
<p>Consider, you have a paginated list of student records with URLs like <i>/student/2 and /student/3</i> for page 2 and 3 correspondingly. Then, if you want to change the route's path, you can use wildcard formats.</p>
<h3>Example</h3>
<pre class="prettyprint notranslate">
// src/AppBundle/Controller/BlogController.php 
namespace AppBundle\Controller;  

use Symfony\Bundle\FrameworkBundle\Controller\Controller; 
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;  

class StudentController extends Controller {
   /**      
      * @Route(“/student/{page}", name = “student_about”, requirements = {"page": "\d+"})
   */ 
   public function aboutAction($page) { 
      // ... 
   } 
} 
</pre>
<p>Here, the <b>\d+</b> is a regular expression that matches a digit of any length.</p>
<h3>Assign Placeholder</h3>
<p>You can assign a placeholder value in routing. It is defined as follows.</p>
<pre class="prettyprint notranslate">
// src/AppBundle/Controller/BlogController.php 
namespace AppBundle\Controller;  

use Symfony\Bundle\FrameworkBundle\Controller\Controller; 
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;  

class StudentController extends Controller { 
   /**      
      * @Route(“/student/{page}", name = “student_about”, requirements = {"page": "\d+"})
   */ 
    
   public function aboutAction($page = 1) { 
      // ... 
   } 
}
</pre>
<p>Here, if you go to /student, the <b>student_about route</b> will match and <b>$page</b> will default to a value of 1.</p>
<h2>Redirecting to a Page</h2>
<p>If you want to redirect the user to another page, use the <b>redirectToRoute()</b> and <b>redirect()</b> methods.</p>
<pre class="prettyprint notranslate">
public function homeAction() { 
   // redirect to the "homepage" route 
   return $this-&gt;redirectToRoute('homepage');  
   
   // redirect externally 
   \return $this-&gt;redirect('http://example.com/doc'); 
}
</pre>
<h3>Generating URLs</h3>
<p>To generate a URL, consider a route name, <b>student_name</b> and wildcard name, <b>student-names</b> used in the path for that route. The complete listing for generating a URL is defined as follows.</p>
<pre class="result notranslate">
class StudentController extends Controller { 
   public function aboutAction($name) { 
      // ...  
      // /student/student-names 
      $url = $this-&gt;generateUrl( 
         ‘student_name’, 
         array(‘name’ =&gt;
         ’student-names’) 
      ); 
   } 
}
</pre>
<h3>StudentController</h3>
<p>Consider a simple example for routing in StudentController class as follows.</p>
<h3>StudentController.php</h3>
<pre class="prettyprint notranslate">
&lt;?php  
namespace AppBundle\Controller;  

use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route; 
use Symfony\Component\HttpFoundation\Response; 
use Symfony\Bundle\FrameworkBundle\Controller\Controller;  

class StudentController  { 
   /** 
      * @Route("/student/home") 
   */ 
   
   public function homeAction() { 
      $name = 'Student details application'; 
      return new Response( 
         '&lt;html&gt;&lt;body&gt;Project: '.$name.'&lt;/body&gt;&lt;/html&gt;' 
      ); 
   } 
}
</pre>
<p>Now, request the url,<b>”http://localhost:8000/student/home”</b> and it produces the following result.</p>
<img src="/symfony/images/student_controller.jpg" alt="Student Controller" />
<p>Similarly, you can create another route for <b>aboutAction()</b> as well.</p>
<h1>Symfony - View Engine</h1>
<p>A View Layer is the presentation layer of the MVC application. It separates the application logic from the presentation logic.</p>
<p>When a controller needs to generate HTML, CSS, or any other content then, it forwards the task to the templating engine.</p>
<h2>Templates</h2>
<p>Templates are basically text files used to generate any text-based documents such as HTML, XML, etc. It is used to save time and reduce errors.</p>
<p>By default, templates can reside in two different locations &minus;</p>
<p><b>app/Resources/views/</b> &minus; The application's views directory can contain your application's layouts and templates of the application bundle. It also overrides third party bundle templates.</p>
<p><b>vendor/path/to/Bundle/Resources/views/</b> &minus; Each third party bundle contains its templates in it's “Resources/views/” directory.</p>
<h2>Twig Engine</h2>
<p>Symfony uses a powerful templating language called <b>Twig</b>. Twig allows you to write concise and readable templates in a very easy manner. Twig templates are simple and won't process PHP tags. Twig performs whitespace control, sandboxing, and automatic HTML escaping.</p>
<h3>Syntax</h3>
<p>Twig contains three types of special syntax &minus;</p>
<ul class="list">
<li><p><b>{{ ... }}</b> &minus; Prints a variable or the result of an expression to the template.</p></li>
<li><p><b>{% ... %} </b> &minus; A tag that controls the logic of the template. It is mainly used to execute a function.</p></li>
<li><p><b>{# ... #}</b> &minus; Comment syntax. It is used to add a single or multi-line comments.</p></li>
</ul>
<p>The twig base template is located at <b>“app/Resources/views/base.html.twig”</b>.</p>
<h3>Example</h3>
<p>Let’s go through a simple example using twig engine. </p>
<h3>StudentController.php</h3>
<pre class="prettyprint notranslate">
&lt;?php  
namespace AppBundle\Controller;  

use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route; 
use Symfony\Component\HttpFoundation\Response; 
use Symfony\Bundle\FrameworkBundle\Controller\Controller;  

class StudentController extends Controller { 
   /** 
      * @Route("/student/home") 
   */ 
   public function homeAction() { 
      return $this-&gt;render('student/home.html.twig'); 
   } 
}
</pre>
<p>Here, the <b>render()</b> method renders a template and puts that content into a Response object.</p>
<p>Now move to the “views” directory and create a folder “student” and inside that folder create a file “home.html.twig”. Add the following changes in the file.</p>
<h3>home.html.twig</h3>
<pre class="result notranslate">
//app/Resources/views/student/home.html.twig  
&lt;h3&gt;Student application!&lt;/h3&gt; 
</pre>
<p>You can obtain the result by requesting the url “http://localhost:8000/student/home”.</p>
<p>By default, Twig comes with a long list of tags, filters, and functions. Let’s go through one by one in detail.</p>
<h3>Tags</h3>
<p>Twig supports the following important tags &minus;</p>
<h3>Do</h3>
<p>The <b>do</b> tag performs similar functions as regular expression with the exception that it doesn't print anything. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
{% do 5 + 6 %} 
</pre>
<h3>Include</h3>
<p>The include statement includes a template and returns the rendered content of that file into the current namespace. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
{% include 'template.html' %}
</pre>
<h3>Extends</h3>
<p>The extends tag can be used to extend a template from another one. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
{% extends "template.html" %}
</pre>
<h3>Block</h3>
<p>Block acts as a placeholder and replaces the contents. Block names consists of alphanumeric characters and underscores. For example,</p>
<pre class="result notranslate">
&lt;title&gt;{% block title %}{% endblock %}&lt;/title&gt;
</pre>
<h3>Embed</h3>
<p>The <b>embed</b> tag performs a combination of both include and extends. It allows you to include another template's contents. It also allows you to override any block defined inside the included template, such as when extending a template. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
{% embed “new_template.twig” %} 
   {# These blocks are defined in “new_template.twig" #} 
   {% block center %} 
      Block content 
   {% endblock %} 
{% endembed %} 
</pre>
<h3>Filter</h3>
<p>Filter sections allow you to apply regular Twig filters on a block of template data. For example,</p>
<pre class="prettyprint notranslate">
{% filter upper %} 
   symfony framework 
{% endfilter %} 
</pre>
<p>Here, the text will be changed to upper case.</p>
<h3>For</h3>
<p><b>For</b> loop fetches each item in a sequence. For example,</p>
<pre class="prettyprint notranslate">
{% for x in 0..10 %} 
   {{ x }} 
{% endfor %}
</pre>
<h3>If</h3>
<p>The <b>if</b> statement in Twig is similar to PHP. The expression evaluates to true or false. For example,</p>
<pre class="prettyprint notranslate">
{% if value == true %} 
   &lt;p&gt;Simple If statement&lt;/p&gt; 
{% endif %}
</pre>
<h3>Filters</h3>
<p>Twig contains filters. It is used to modify content before being rendered. Following are some of the notable filters.</p>
<h3>Length</h3>
<p>The length filter returns the length of a string. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
{% if name|length &gt; 5 %} 
   ... 
{% endif %} 
</pre>
<h3>Lower</h3>
<p>The lower filter converts a value to lowercase. For example,</p>
<pre class="prettyprint notranslate">
{{ 'SYMFONY'|lower }}
</pre>
<p>It would produce the following result &minus;</p>
<pre class="result notranslate">
symfony
</pre>
<p>Similarly, you can try for upper case.</p>
<h3>Replace</h3>
<p>The replace filter formats a given string by replacing the placeholders. For example,</p>
<pre class="prettyprint notranslate">
{{ "tutorials point site %si% and %te%."|replace({'%si%': web, '%te%': "site"}) }} 
</pre>
<p>It will produce the following result &minus;</p>
<pre class="result notranslate">
tutorials point website 
</pre>
<h3>Title</h3>
<p>The title filter returns a titlecase version of the value. For example,</p>
<pre class="prettyprint notranslate">
{{ 'symfony framework '|title }}
</pre>
<p>It will produce the following result &minus;</p>
<pre class="result notranslate">
 Symfony Framework
</pre>
<h3>Sort</h3>
<p>The sort filter sorts an array. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
{% for user in names|sort %} 
   ... 
{% endfor %}
</pre>
<h3>Trim</h3>
<p>The trim filter trims whitespace (or other characters) from the beginning and the end of a string. For example,</p>
<pre class="prettyprint notranslate">
{{ '  Symfony!  '|trim }} 
</pre>
<p>It will produce the following result &minus;</p>
<pre class="result notranslate">
Symfony!
</pre>
<h3>Functions</h3>
<p>Twig supports functions. It is used to obtain a particular result. Following are some of the important Twig functions.</p>
<h3>Attribute</h3>
<p>The <b>attribute</b> function can be used to access a “dynamic” attribute of a variable. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
{{ attribute(object, method) }} 
{{ attribute(object, method, arguments) }} 
{{ attribute(array, item) }} 
</pre>
<p>For example,</p>
<pre class="prettyprint notranslate">
{{ attribute(object, method) is defined ? 'Method exists' : 'Method does not exist' }}
</pre>
<h3>Constant</h3>
<p>Constant function returns the constant value for a specified string. For example,</p>
<pre class="prettyprint notranslate">
{{ constant('Namespace\\Classname::CONSTANT_NAME') }}
</pre>
<h3>Cycle</h3>
<p>The cycle function cycles on an array of values. For example,</p>
<pre class="prettyprint notranslate">
{% set months = [‘Jan’, ‘Feb’, ‘Mar’] %}  
{% for x in 0..12 %} 
   { cycle(months, x) }} 
{% endfor %}
</pre>
<h3>Date</h3>
<p>Converts an argument to a date to allow date comparison. For example,</p>
<pre class="prettyprint notranslate">
&lt;p&gt;Choose your location before {{ 'next Monday'|date('M j, Y') }}&lt;/p&gt; 
</pre>
<p>It will produce the following result &minus;</p>
<pre class="result notranslate">
Choose your location before May 15, 2017
</pre>
<p>The argument must be in one of PHP’s supported date and time formats.</p>
<p>You can pass a timezone as the second argument.</p>
<h3>Dump</h3>
<p>The dump function dumps information about a template variable. For example,</p>
<pre class="prettyprint notranslate">
{{ dump(user) }}
</pre>
<h3>Max</h3>
<p>The max function returns the largest value of a sequence. For example,</p>
<pre class="prettyprint notranslate">
{{ max(1, 5, 9, 11, 15) }}
</pre>
<h3>Min</h3>
<p>The min function returns the smallest value of a sequence. For example,</p>
<pre class="prettyprint notranslate">
{{ min(1, 3, 2) }}
</pre>
<h3>Include</h3>
<p>The include function returns the rendered content of a template. For example,</p>
<pre class="prettyprint notranslate">
{{ include('template.html') }}
</pre>
<h3>Random</h3>
<p>The random function generates a random value. For example,</p>
<pre class="prettyprint notranslate">
{{ random([‘Jan’, ‘Feb’, ‘Mar’, ‘Apr’]) }} 
{# example output: Jan #} 
</pre>
<h3>Range</h3>
<p>Range function returns a list containing an arithmetic progression of integers. For example,</p>
<pre class="prettyprint notranslate">
{% for x in range(1, 5) %} 
   {{ x }}, 
{% endfor %} 
</pre>
<p>It will produce the following result &minus;</p>
<pre class="result notranslate">
1,2,3,4,5
</pre>
<h2>Layouts</h2>
<p>A Layout represents the common parts of multiple views, i.e. for example, page header, and footer.</p>
<h3>Template Inheritance</h3>
<p>A template can be used by another one. We can achieve this using template inheritance concept. Template inheritance allows you to build a base “layout” template that contains all the common elements of web site defined as blocks.</p>
<p>Let’s take a simple example to understand more about template inheritance.</p>
<h3>Example</h3>
<p>Consider the base template located at “app/Resources/views/base.html.twig”. Add the following changes in the file.</p>
<p><b>base.html.twig</b></p>
<pre class="prettyprint notranslate">
&lt;!DOCTYPE html&gt; 
&lt;html&gt; 
   &lt;head&gt; 
      &lt;meta charset = "UTF-8"&gt; 
      &lt;title&gt;{% block title %}Parent template Layout{% endblock %}&lt;/title&gt; 
   &lt;/head&gt; 
&lt;/html&gt;
</pre>
<p>Now move to the index template file located at <i>“app/Resources/views/default/index.html.twig“</i>. Add the following changes in it.</p>
<p><b>index.html.twig</b></p>
<pre class="prettyprint notranslate">
{% extends 'base.html.twig' %}  
{% block title %}Child template Layout{% endblock %}
</pre>
<p>Here, the <b>{% extends %}</b> tag informs the templating engine to first evaluate the base template, which sets up the layout and defines the block. The child template is then rendered. A child template can extend the base layout and override the title block. Now, request the url “http://localhost:8000” and you can obtain its result.</p>
<h2>Assets</h2>
<p>The Asset manages URL generation and versioning of web assets such as CSS stylesheets, JavaScript files, and image files.</p>
<h3>JavaScript</h3>
<p>To include JavaScript files, use the <b>javascripts</b> tag in any template.</p>
<pre class="prettyprint notranslate">
{# Include javascript #} 
{% block javascripts %} 
   {% javascripts '@AppBundle/Resources/public/js/*' %} 
      &lt;script src="{{ asset_url }}"&gt;&lt;/script&gt; 
   {% endjavascripts %} 
{% endblock %} 
</pre>
<h3>Stylesheets</h3>
<p>To include stylesheet files, use the <b>stylesheets</b> tag in any template</p>
<pre class="prettyprint notranslate">
{# include style sheet #} 
{% block stylesheets %} 
   {% stylesheets 'bundles/app/css/*' filter = 'cssrewrite' %} 
      &lt;link rel = "stylesheet" href="{{ asset_url }}" /&gt;
   {% endstylesheets %} 
{% endblock %}
</pre>
<h3>Images</h3>
<p>To include an image, you can use the image tag. It is defined as follows.</p>
<pre class="result notranslate">
{% image '@AppBundle/Resources/public/images/example.jpg' %} 
   &lt;img src = "{{ asset_url }}" alt = "Example" /&gt; 
{% endimage %} 
</pre>
<h3>Compound Assets</h3>
<p>You can combine many files into one. This helps to reduce the number of HTTP requests, and produces greater front-end performance.</p>
<pre class="prettyprint notranslate">
{% javascripts 
   '@AppBundle/Resources/public/js/*' 
   '@AcmeBarBundle/Resources/public/js/form.js' 
   '@AcmeBarBundle/Resources/public/js/calendar.js' %} 
   &lt;script src = "{{ asset_url }}"&gt;&lt;/script&gt; 
{% endjavascripts %}
</pre>
<h1>Symfony - Doctrine ORM</h1>
<p>In Symfony web framework, model plays an important role. They are the business entities. They are either provided by customers or fetched from back-end database, manipulated according to business rules and persisted back into the database. They are the data presented by Views. Let us learn about models and how they interact with back-end system in this chapter.</p>
<h2>Database Model</h2>
<p>We need to map our models to the back-end relational database items to safely and efficiently fetch and persist the models. This mapping can be done with an Object Relational Mapping (ORM) tool. Symfony provides a separate bundle, <b>DoctrineBundle</b>, which integrates Symfony with third party PHP database ORM tool, <b>Doctrine</b>.</p>
<h2>Doctrine ORM</h2>
<p>By default, Symfony framework doesn't provide any component to work with databases. But, it integrates tightly with <b>Doctrine ORM</b>. Doctrine contains several PHP libraries used for database storage and object mapping.</p>
<p>Following example will help you understand how Doctrine works, how to configure a database and how to save and retrieve the data.</p>
<h2>Doctrine ORM Example</h2>
<p>In this example, we will first configure the database and create a Student object, then perform some operations in it.</p>
<p>To do this we need to adhere to the following steps.</p>
<h3>Step 1: Create a Symfony Application</h3>
<p>Create a Symfony application, <b>dbsample</b> using the following command.</p>
<pre class="result noranslate">
symfony new dbsample
</pre>
<h3>Step 2: Configure a Database</h3>
<p>Generally, the database information is configured in “app/config/parameters.yml” file.</p>
<p>Open the file and add the following changes.</p>
<p><b>parameter.yml</b></p>
<pre class="prettyprint notranslate">
parameters: 
   database_host: 127.0.0.1 
   database_port: null
   database_name: studentsdb 
   database_user: &lt;user_name&gt; 
   database_password: &lt;password&gt; 
   mailer_transport: smtp 
   mailer_host: 127.0.0.1 
   mailer_user: null 
   mailer_password: null 
   secret: 037ab82c601c10402408b2b190d5530d602b5809 
   
   doctrine: 
      dbal: 
      driver:   pdo_mysql 
      host:     '%database_host%' 
      dbname:   '%database_name%' 
      user:     '%database_user%' 
      password: '%database_password%' 
      charset: utf8mb4 
</pre>
<p>Now, Doctrine ORM can connect to the database.</p>
<h3>Step 3: Create a Database</h3>
<p>Issue the following command to generate “studentsdb” database. This step is used to bind the database in Doctrine ORM.</p>
<pre class="result notranslate">
php bin/console doctrine:database:create
</pre>
<p>After executing the command, it automatically generates an empty “studentsdb” database. You can see the following response on your screen.</p>
<pre class="result notranslate">
Created database `studentsdb` for connection named default
</pre>
<h3>Step 4: Map Information</h3>
<p>Mapping information is nothing but "metadata”. It is a collection of rules that informs Doctrine ORM exactly how the Student class and its properties are mapped to a specific database table.</p>
<p>Well, this metadata can be specified in a number of different formats, including YAML, XML or you can directly pass Student class using annotations. It is defined as follows.</p>
<h3>Student.php</h3>
<p>Add the following changes in the file.</p>
<pre class="prettyprint notranslate">
&lt;?php  
namespace AppBundle\Entity;  

use Doctrine\ORM\Mapping as ORM;  
/** 
   * @ORM\Entity 
   * @ORM\Table(name = "students") 
*/ 
class Student { 
   /** 
      * @ORM\Column(type = "integer") 
      * @ORM\Id 
      * @ORM\GeneratedValue(strategy = "AUTO") 
   */ 
   private $id;  
    
   /** 
      * @ORM\Column(type = "string", length = 50) 
   */ 
   private $name;  
   
   /** 
     * @ORM\Column(type = "text") 
     */ 
   private $address; 
}
</pre>
<p>Here, the table name is optional. If the table name is not specified, then it will be determined automatically based on the name of the entity class.</p>
<h3>Step 5: Bind an Entity</h3>
<p>Doctrine creates simple entity classes for you. It helps you build any entity.</p>
<p>Issue the following command to generate an entity.</p>
<pre class="result notranslate">
php bin/console doctrine:generate:entities AppBundle/Entity/Student
</pre>
<p>Then you will see the following result and the entity will be updated.</p>
<pre class="result notranslate">
Generating entity "AppBundle\Entity\Student" 
   &gt; backing up Student.php to Student.php~ 
   &gt; generating AppBundle\Entity\Student
</pre>
<h3>Student.php</h3>
<pre class="prettyprint notranslate">
&lt;?php 
namespace AppBundle\Entity; 

use Doctrine\ORM\Mapping as ORM;  
/** 
   * @ORM\Entity 
   * @ORM\Table(name="students") 
*/ 
class Student { 
   /** 
      * @ORM\Column(type="integer") 
      * @ORM\Id 
      * @ORM\GeneratedValue(strategy="AUTO") 
   */ 
   private $id;  
    
   /** 
      * @ORM\Column(type = "string", length = 50) 
   */ 
   private $name; 
    
   /** 
      * @ORM\Column(type = "text") 
   */
   private $address; 
    
   /** 
      * Get id 
      * 
      * @return integer 
   */ 
   public function getId() { 
      return $this-&gt;id; 
   }  
    
   /** 
      * Set name 
      * 
      * @param string $name 
      * 
      * @return Student 
   */ 
    
   public function setName($name) { 
      $this-&gt;name = $name;  
      return $this; 
   }  
    
   /** 
      * Get name 
      * 
      * @return string 
   */ 
    
   public function getName() { 
      return $this-&gt;name; 
   }  
    
   /**
      * Set address 
      * 
      * @param string $address 
      * 
      * @return Student 
   */ 
    
   public function setAddress($address) { 
      $this-&gt;address = $address;  
      return $this; 
   }  
    
   /** 
      * Get address 
      * 
      * @return string 
   */ 
   
   public function getAddress() { 
      return $this-&gt;address; 
   } 
}    
</pre>
<h3>Step 6: Map Validation</h3>
<p>After creating entities, you should validate the mappings using the following command.</p>
<pre class="result notranslate">
php bin/console doctrine:schema:validate
</pre>
<p>It will produce the following result &minus;</p>
<pre class="result notranslate">
[Mapping]  OK - The mapping files are correct. 
[Database] FAIL - The database schema is not in sync with the current mapping file
</pre>
<p>Since we have not created the students table, the entity is out of sync. Let us create the students table using the Symfony command in the next step.</p>
<h3>Step 7: Create a Schema</h3>
<p>Doctrine can automatically create all the database tables needed for Student entity. This can be done using the following command.</p>
<pre class="result notranslate">
php bin/console doctrine:schema:update --force 
</pre>
<p>After executing the command, you can see the following response.</p>
<pre class="result notranslate">
Updating database schema... 
Database schema updated successfully! "1" query was executed
</pre>
<p>This command compares what your database should look like with how it actually looks, and executes the SQL statements needed to update the database schema to where it should be.</p>
<p>Now, again validate the schema using the following command.</p>
<pre class="result notranslate">
php bin/console doctrine:schema:validate 
</pre>
<p>It will produce the following result &minus;</p>
<pre class="result notranslate">
[Mapping]  OK - The mapping files are correct. 
[Database] OK - The database schema is in sync with the mapping files
</pre>
<h3>Step 8: Getter and setter</h3>
<p>As seen in the Bind an Entity section, the following command generates all the getters and setters for the Student class.</p>
<pre class="result notranslate">
$ php bin/console doctrine:generate:entities AppBundle/Entity/Student
</pre>
<h3>Step 9: Persist Objects to the Database</h3>
<p>Now, we have mapped the Student entity to its corresponding Student table. We should now be able to persist Student objects to the database. Add the following method to the StudentController of the bundle.</p>
<h3>StudentController.php</h3>
<pre class="prettyprint notranslate">
&lt;?php  
namespace AppBundle\Controller; 

use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route; 
use Symfony\Bundle\FrameworkBundle\Controller\Controller; 
use Symfony\Component\HttpFoundation\Response;  
use AppBundle\Entity\Student; 

class StudentController extends Controller { 
   /** 
      * @Route("/student/add") 
   */ 
   public function addAction() { 
      $stud = new Student(); 
      $stud-&gt;setName('Adam'); 
      $stud-&gt;setAddress('12 north street'); 
      $doct = $this-&gt;getDoctrine()-&gt;getManager();
      
      // tells Doctrine you want to save the Product 
      $doct-&gt;persist($stud);
      
      //executes the queries (i.e. the INSERT query) 
      $doct-&gt;flush(); 
      
      return new Response('Saved new student with id ' . $stud-&gt;getId()); 
   } 
} 
</pre>
<p>Here, we accessed the doctrine manager using getManager() method through getDoctrine() of base controller and then persist the current object using persist() method of doctrine manager. <b>persist()</b> method adds the command to the queue, but the <b>flush()</b> method does the actual work (persisting the student object).</p>
<h3>Step 10: Fetch Objects from the Database</h3>
<p>Create a function in StudentController that will display the student details.</p>
<p><b>StudentController.php</b></p>
<pre class="prettyprint notranslate">
/** 
   * @Route("/student/display") 
*/ 
public function displayAction() { 
   $stud = $this-&gt;getDoctrine() 
   -&gt;getRepository('AppBundle:Student') 
   -&gt;findAll();
   return $this-&gt;render('student/display.html.twig', array('data' =&gt; $stud)); 
}            
</pre>
<h3>Step 11: Create a View</h3>
<p>Let’s create a view that points to display action. Move to the views directory and create a file “display.html.twig”. Add the following changes in the file.</p>
<p><b>display.html.twig</b></p>
<pre class="prettyprint notranslate">
&lt;style&gt; 
   .table { border-collapse: collapse; } 
   .table th, td { 
      border-bottom: 1px solid #ddd; 
      width: 250px; 
      text-align: left; 
      align: left; 
   } 
&lt;/style&gt; 

&lt;h2&gt;Students database application!&lt;/h2&gt;  
&lt;table class = "table"&gt;  
   &lt;tr&gt;  
      &lt;th&gt;Name&lt;/th&gt;  
      &lt;th&gt;Address&lt;/th&gt;  
   &lt;/tr&gt;  
   {% for x in data %} 
   &lt;tr&gt;  
      &lt;td&gt;{{ x.Name }}&lt;/td&gt;   
      &lt;td&gt;{{ x.Address }}&lt;/td&gt;   
   &lt;/tr&gt;  
   {% endfor %} 
&lt;/table&gt; 
</pre>
<p>You can obtain the result by requesting the URL “http://localhost:8000/student/display” in a browser.</p>
<p>It will produce the following output on screen &minus;</p>
<img src="/symfony/images/create_view.jpg" alt="Create View" />
<h3>Step 12: Update an Object</h3>
<p>To update an object in StudentController, create an action and add the following changes.</p>
<pre class="prettyprint notranslate">
/** 
   * @Route("/student/update/{id}") 
*/ 
public function updateAction($id) { 
   $doct = $this-&gt;getDoctrine()-&gt;getManager(); 
   $stud = $doct-&gt;getRepository('AppBundle:Student')-&gt;find($id);  
   
   if (!$stud) { 
      throw $this-&gt;createNotFoundException( 
         'No student found for id '.$id 
      ); 
   } 
   $stud-&gt;setAddress('7 south street'); 
   $doct-&gt;flush(); 
   
   return new Response('Changes updated!'); 
}
</pre>
<p>Now, request the URL “http://localhost:8000/Student/update/1” and it will produce the following result.</p>
<p>It will produce the following output on screen &minus;</p>
<img src="/symfony/images/update_object.jpg" alt="Update Object" />
<h3>Step 13: Delete an Object</h3>
<p>Deleting an object is similar and it requires a call to the remove() method of the entity (doctrine) manager.</p>
<p>This can be done using the following command.</p>
<pre class="prettyprint notranslate">
/** 
   * @Route("/student/delete/{id}") 
*/ 
public function deleteAction($id) { 
   $doct = $this-&gt;getDoctrine()-&gt;getManager(); 
   $stud = $doct-&gt;getRepository('AppBundle:Student')-&gt;find($id);  
    
   if (!$stud) { 
      throw $this-&gt;createNotFoundException('No student found for id '.$id); 
   }  
    
   $doct-&gt;remove($stud); 
   $doct-&gt;flush();  
   
   return new Response('Record deleted!'); 
}
</pre>
<h1>Symfony - Forms</h1>
<p>Symfony provides various in-built tags to handle HTML forms easily and securely. Symfony’s Form component performs form creation and validation process. It connects the model and the view layer. It provides a set of form elements to create a full-fledged html form from pre-defined models. This chapter explains about Forms in detail.</p>
<h2>Form Fields</h2>
<p>Symfony framework API supports large group of field types. Let’s go through each of the field types in detail.</p>
<h3>FormType</h3>
<p>It is used to generate a form in Symfony framework. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\TextType; 
use Symfony\Component\Form\Extension\Core\Type\EmailType; 
use Symfony\Component\Form\Extension\Core\Type\FormType; 
// ...  

$builder = $this-&gt;createFormBuilder($studentinfo); 
$builder 
   -&gt;add('title', TextType::class);
</pre>
<p>Here, $<b>studentinfo</b> is an entity of type Student. <b>createFormBuilder</b> is used to create a HTML form. add method is used to <b>add</b> input elements inside the form. <b>title</b> refers to student title property. <b>TextType::class</b> refers to html text field. Symfony provides classes for all html elements.</p>
<h3>TextType</h3>
<p>The TextType field represents the most basic input text field. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\TextType; 
$builder-&gt;add(‘name’, TextType::class); 
</pre>
<p>Here, the name is mapped with an entity.</p>
<h3>TextareaType</h3>
<p>Renders a textarea HTML element. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\TextareaType; 
$builder-&gt;add('body', TextareaType::class, array( 
   'attr' =&gt; array('class' =&gt; 'tinymce'), 
));
</pre>
<h3>EmailType</h3>
<p>The EmailType field is a text field that is rendered using the HTML5 email tag. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\EmailType; 
$builder-&gt;add('token', EmailType::class, array( 
   'data' =&gt; 'abcdef', )); 
</pre>
<h3>PasswordType</h3>
<p>The PasswordType field renders an input password text box. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\PasswordType; 
$bulder-&gt;add('password', PasswordType::class); 
</pre>
<h3>RangeType</h3>
<p>The RangeType field is a slider that is rendered using the HTML5 range tag. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\RangeType; 
// ...  
$builder-&gt;add('name', RangeType::class, array( 
   'attr' =&gt; array( 
      'min' =&gt; 100, 
      'max' =&gt; 200 
   ) 
));
</pre>
<h3>PercentType</h3>
<p>The PercentType renders an input text field and specializes in handling percentage data. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\PercentType; 
// ... 
$builder-&gt;add('token', PercentType::class, array( 
   'data' =&gt; 'abcdef', 
));
</pre>
<h3>DateType</h3>
<p>Renders a date format. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\DateType; 
// ... 
$builder-&gt;add(‘joined’, DateType::class, array( 
   'widget' =&gt; 'choice', 
)); 
</pre>
<p>Here, Widget is the basic way to render a field.</p>
<p>It performs the following function.</p>
<ul class="list">
<li><p><b>choice</b> &minus; Renders three select inputs. The order of the selects is defined in the format option.</p></li>
<li><p><b>text</b> &minus; Renders a three field input of type text (month, day, year).</p></li>
<li><p><b>single_text</b> &minus; Renders a single input of type date. The user's input is validated based on the format option.</p></li>
</ul>
<h3>CheckboxType</h3>
<p>Creates a single input checkbox. This should always be used for a field that has a boolean value. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\CheckboxType; 
// ...  
$builder-&lt;add(‘sports’, CheckboxType::class, array( 
   'label'    =&lt; ‘Are you interested in sports?’, 
   'required' =&lt; false, 
));
</pre>
<h3>RadioType</h3>
<p>Creates a single radio button. If the radio button is selected, the field will be set to the specified value. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\RadioType; 
// ...  
$builder-&gt;add('token', RadioType::class, array( 
   'data' =&gt; 'abcdef', 
));
</pre>
<p>Note that, Radio buttons cannot be unchecked, the value only changes when another radio button with the same name gets checked.</p>
<h3>RepeatedType</h3>
<p>This is a special field “group”, that creates two identical fields whose values must match. Its syntax is as follows &minus;</p>
<pre class="prettyprint notranslate">
use Symfony\Component\Form\Extension\Core\Type\RepeatedType; 
use Symfony\Component\Form\Extension\Core\Type\PasswordType; 

// ...  
$builder-&gt;add('password', RepeatedType::class, array( 
   'type' =&gt; PasswordType::class, 
   'invalid_message' =&gt; 'The password fields must match.', 
   'options' =&gt; array('attr' =&gt; array('class' =&gt; 'password-field')), 
   'required' =&gt; true, 
   'first_options'  =&gt; array('label' =&gt; 'Password'), 
   'second_options' =&gt; array('label' =&gt; 'Repeat Password'), 
));
</pre>
<p>This is mostly used to check the user’s password or email.</p>
<h3>ButtonType</h3>
<p>A simple clickable button. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\ButtonType; 
// ...  
$builder-&gt;add('save', ButtonType::class, array(
   'attr' =&gt; array('class' =&gt; 'save'), 
));
</pre>
<h3>ResetType</h3>
<p>A button that resets all fields to its initial values. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\ResetType; 
// ...  
$builder-&gt;add('save', ResetType::class, array( 
   'attr' =&gt; array('class' =&gt; 'save'), 
));
</pre>
<h3>ChoiceType</h3>
<p>A multi-purpose field is used to allow the user to “choose” one or more options. It can be rendered as a select tag, radio buttons, or checkboxes. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\ChoiceType; 
// ...  
$builder-&gt;add(‘gender’, ChoiceType::class, array( 
   'choices'  =&gt; array( 
      ‘Male’ =&gt; true, 
      ‘Female’ =&gt; false, 
   ), 
));
</pre>
<h3>SubmitType</h3>
<p>A submit button is used to submit form-data. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
use Symfony\Component\Form\Extension\Core\Type\SubmitType; 
// ...  
$builder-&gt;add('save', SubmitType::class, array( 
   'attr' =&gt; array('class' =&gt; 'save'), 
))
</pre>
<h2>Form Helper Function</h2>
<p>Form helper functions are twig functions used to create forms easily in templates.</p>
<h3>form_start</h3>
<p>Returns an HTML form tag that points to a valid action, route, or URL. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
{{ form_start(form, {'attr': {'id': 'form_person_edit'}}) }} 
</pre>
<h3>form_end</h3>
<p>Closes the HTML form tag created using form_start. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
{{ form_end(form) }} 
</pre>
<h3>textarea</h3>
<p>Returns a textarea tag, optionally wrapped with an inline rich-text JavaScript editor.</p>
<h3>checkbox</h3>
<p>Returns an XHTML compliant input tag with type=“checkbox”. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
echo checkbox_tag('choice[]', 1);  
echo checkbox_tag('choice[]', 2);  
echo checkbox_tag('choice[]', 3);  
echo checkbox_tag('choice[]', 4); 
</pre>
<h3>input_password_tag</h3>
<p>Returns an XHTML compliant input tag with type = “password”. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
echo input_password_tag('password');  
echo input_password_tag('password_confirm');
</pre>
<h3>input_tag</h3>
<p>Returns an XHTML compliant input tag with type = “text”. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
echo input_tag('name'); 
</pre>
<h3>label</h3>
<p>Returns a label tag with the specified parameter.</p>
<h3>radiobutton</h3>
<p>Returns an XHTML compliant input tag with type = “radio”. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
echo ' Yes '.radiobutton_tag(‘true’, 1);  
echo ' No '.radiobutton_tag(‘false’, 0); 
</pre>
<h3>reset_tag</h3>
<p>Returns an XHTML compliant input tag with type = “reset”. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
echo reset_tag('Start Over'); 
</pre>
<h3>select</h3>
<p>Returns a select tag populated with all the countries in the world. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
echo select_tag(
   'url', options_for_select($url_list), 
   array('onChange' =&gt; 'Javascript:this.form.submit();')); 
</pre>
<h3>submit</h3>
<p>Returns an XHTML compliant input tag with type = “submit”. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
echo submit_tag('Update Record');  
</pre>
<p>In the next section, we will learn how to create a form using form fields.</p>
<h2>Student Form Application</h2>
<p>Let’s create a simple Student details form using Symfony Form fields. To do this, we should adhere to the following steps &minus;</p>
<h3>Step 1: Create a Symfony Application</h3>
<p>Create a Symfony application, <b>formsample</b>, using the following command.</p>
<pre class="result notranslate">
symfony new formsample
</pre>
<p>Entities are usually created under the “src/AppBundle/Entity/“ directory.</p>
<h3>Step 2: Create an Entity</h3>
<p>Create the file “StudentForm.php” under the “src/AppBundle/Entity/” directory. Add the following changes in the file.</p>
<h3>StudentForm.php</h3>
<pre class="prettyprint notranslate">
&lt;?php 
namespace AppBundle\Entity;  

class StudentForm {    
   private $studentName; 
   private $studentId; 
   public $password; 
   private $address; 
   public $joined; 
   public $gender; 
   private $email; 
   private $marks; 
   public $sports;  
   
   public function getStudentName() { 
      return $this-&gt;studentName; 
   }  
   public function setStudentName($studentName) { 
      $this-&gt;studentName = $studentName; 
   }  
   public function getStudentId() { 
      return $this-&gt;studentId; 
   }  
   public function setStudentId($studentid) { 
      $this-&gt;studentid = $studentid; 
   }
   public function getAddress() { 
      return $this-&gt;address; 
   }  
   public function setAddress($address) { 
      $this-&gt;address = $address; 
   }  
   public function getEmail() { 
      return $this-&gt;email; 
   }  
   public function setEmail($email) { 
      $this-&gt;email = $email; 
   }  
   public function getMarks() { 
      return $this-&gt;marks; 
   }  
   public function setMarks($marks) { 
      $this-&gt;marks = $marks; 
   } 
}     
</pre>
<h3>Step 3: Add a StudentController</h3>
<p>Move to the directory “src/AppBundle/Controller”, create “StudentController.php” file, and add the following code in it.</p>
<h3>StudentController.php</h3>
<pre class="prettyprint notranslate">
&lt;?php  
namespace AppBundle\Controller;  

use AppBundle\Entity\StudentForm; 
use AppBundle\Form\FormValidationType; 

use Symfony\Bundle\FrameworkBundle\Controller\Controller; 
use Symfony\Component\HttpFoundation\Request; 
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route; 

use Symfony\Component\HttpFoundation\Response; 
use Symfony\Component\Form\Extension\Core\Type\TextType; 
use Symfony\Component\Form\Extension\Core\Type\DateType; 
use Symfony\Component\Form\Extension\Core\Type\SubmitType; 
use Symfony\Component\Form\Extension\Core\Type\ChoiceType; 
use Symfony\Component\Form\Extension\Core\Type\PasswordType; 
use Symfony\Component\Form\Extension\Core\Type\RangeType; 
use Symfony\Component\Form\Extension\Core\Type\EmailType; 
use Symfony\Component\Form\Extension\Core\Type\CheckboxType; 
use Symfony\Component\Form\Extension\Core\Type\ButtonType; 
use Symfony\Component\Form\Extension\Core\Type\TextareaType; 
use Symfony\Component\Form\Extension\Core\Type\PercentType; 
use Symfony\Component\Form\Extension\Core\Type\RepeatedType;  

class StudentController extends Controller {    
   /** 
      * @Route("/student/new") 
   */ 
   public function newAction(Request $request) {  
      $stud = new StudentForm(); 
      $form = $this-&gt;createFormBuilder($stud) 
         -&gt;add('studentName', TextType::class)
         -&gt;add('studentId', TextType::class) 
         -&gt;add('password', RepeatedType::class, array( 
            'type' =&gt; PasswordType::class, 
            'invalid_message' =&gt; 'The password fields 
            must match.', 'options' =&gt; array('attr' =&gt; array('class' =&gt; 'password-field')), 
            'required' =&gt; true, 'first_options'  =&gt; array('label' =&gt; 'Password'), 
            'second_options' =&gt; array('label' =&gt; 'Re-enter'), 
         )) 
         
         -&gt;add('address', TextareaType::class) 
         -&gt;add('joined', DateType::class, array( 
               'widget' =&gt; 'choice', 
         )) 
            
         -&gt;add('gender', ChoiceType::class, array( 
            'choices'  =&gt; array( 
               'Male' =&gt; true, 
               'Female' =&gt; false, 
            ), 
         )) 
         
         -&gt;add('email', EmailType::class) 
         -&gt;add('marks', PercentType::class) 
         -&gt;add('sports', CheckboxType::class, array( 
            'label'    =&gt; 'Are you interested in sports?', 'required' =&gt; false, 
         )) 
         
         -&gt;add('save', SubmitType::class, array('label' =&gt; 'Submit')) 
         -&gt;getForm();  
         return $this-&gt;render('student/new.html.twig', array( 
            'form' =&gt; $form-&gt;createView(), 
         )); 
   } 
}              
</pre>
<h3>Step 4: Render the View</h3>
<p>Move to the directory “app/Resources/views/student/“, create “new.html.twig” file and add the following changes in it.</p>
<pre class="prettyprint notranslate">
{% extends 'base.html.twig' %} 
{% block stylesheets %} 
&lt;style&gt; 
   #simpleform { 
      width:600px; 
      border:2px solid grey; 
      padding:14px; 
   }  
   #simpleform label { 
      font-size:14px; 
      float:left; 
      width:300px; 
      text-align:right; 
      display:block; 
   }  
   #simpleform span { 
      font-size:11px; 
      color:grey; 
      width:100px; 
      text-align:right; 
      display:block; 
   }  
   #simpleform input { 
      border:1px solid grey; 
      font-family:verdana; 
      font-size:14px;
      color:light blue; 
      height:24px; 
      width:250px; 
      margin: 0 0 10px 10px; 
   }  
   #simpleform textarea { 
      border:1px solid grey; 
      font-family:verdana; 
      font-size:14px; 
      color:light blue; 
      height:120px; 
      width:250px; 
      margin: 0 0 20px 10px; 
   }  
   #simpleform select { 
      margin: 0 0 20px 10px; 
   }  
   #simpleform button { 
      clear:both; 
      margin-left:250px; 
      background: grey; 
      color:#FFFFFF; 
      border:solid 1px #666666; 
      font-size:16px; 
   } 
&lt;/style&gt; 

{% endblock %}  
   {% block body %} 
   &lt;h3&gt;Student details:&lt;/h3&gt; 
   &lt;div id="simpleform"&gt; 
      {{ form_start(form) }} 
      {{ form_widget(form) }} 
      {{ form_end(form) }} 
   &lt;/div&gt; 
{% endblock %}     
</pre>
<p>Now request the url, “http://localhost:8000/student/new” and it produces the following result.</p>
<h3>Result</h3>
<img src="/symfony/images/rendering_view.jpg" alt="Rendering View" />
<h1>Symfony - Validation</h1>
<p>Validation is the most important aspect while designing an application. It validates the incoming data. This chapter explains about form validation in detail.</p>
<h2>Validation Constraints</h2>
<p>The validator is designed to validate objects against constraints. If you validate an object, simply map one or more constraints to its class and then pass it to the validator service. By default, when validating an object all constraints of the corresponding class will be checked to see whether or not they actually pass. Symfony supports the following notable validation constraints.</p>
<h3>NotBlank</h3>
<p>Validates that a property is not blank. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
namespace AppBundle\Entity; 
use Symfony\Component\Validator\Constraints as Assert; 

class Student { 
   /** 
      * @Assert\NotBlank() 
   */ 
   protected $studentName; 
} 
</pre>
<p>This NotBlank constraint ensures that studentName property should not blank.</p>
<h3>NotNull</h3>
<p>Validates that a value is not strictly equal to null. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
namespace AppBundle\Entity; 
use Symfony\Component\Validator\Constraints as Assert; 

class Student { 
   /** 
      * @Assert\NotNull() 
   */ 
   protected $studentName; 
} 
</pre>
<h3>Email</h3>
<p>Validates that a value is a valid email address. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
namespace AppBundle\Entity; 
use Symfony\Component\Validator\Constraints as Assert; 

class Student { 
   /** 
      * @Assert\Email( 
         * message = "The email '{{ value }}' is not a valid email.", 
         * checkMX = true 
      * ) 
   */ 
   protected $email; 
}
</pre>
<h3>IsNull</h3>
<p>Validates that a value is exactly equal to null. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
namespace AppBundle\Entity; 
use Symfony\Component\Validator\Constraints as Assert; 

class Student { 
   /** 
      * @Assert\IsNull() 
   */ 
   protected $studentName; 
}
</pre>
<h3>Length</h3>
<p>Validates that a given string length is between some minimum and maximum value. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
namespace AppBundle\Entity; 
use Symfony\Component\Validator\Constraints as Assert; 

class Student { 
   /**
      * @Assert\Length( 
         * min = 5, 
         * max = 25, 
         * minMessage = "Your first name must be at least {{ limit }} characters long", 
         * maxMessage = "Your first name cannot be longer than {{ limit }} characters" 
      * ) 
   */ 
   protected $studentName; 
}
</pre>
<h3>Range</h3>
<p>Validates that a given number is between some minimum and maximum number. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
namespace AppBundle\Entity; 
use Symfony\Component\Validator\Constraints as Assert; 
class Student { 
   /** 
      * @Assert\Range( 
         * min = 40, 
         * max = 100, 
         * minMessage = "You must be at least {{ limit }} marks”, 
         * maxMessage = "Your maximum {{ limit }} marks” 
      * ) 
   */ 
   protected $marks; 
} 
</pre>
<h3>Date</h3>
<p>Validates that a value is a valid date. It follows a valid YYYY-MM-DD format. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
namespace AppBundle\Entity; 
use Symfony\Component\Validator\Constraints as Assert; 

class Student { 
   /** 
      * @Assert\Date() 
   */ 
   protected $joinedAt; 
} 
</pre>
<h3>Choice</h3>
<p>This constraint is used to ensure that the given value is one of a given set of valid choices. It can also be used to validate that each item in an array of items is one of those valid choices. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
namespace AppBundle\Entity;  
use Symfony\Component\Validator\Constraints as Assert;  

class Student { 
   /** 
      * @Assert\Choice(choices = {"male", "female"}, message = "Choose a valid gender.") 
   */ 
   protected $gender; 
}
</pre>
<h3>UserPassword</h3>
<p>This validates that an input value is equal to the current authenticated user's password. This is useful in a form where users can change their password, but need to enter their old password for security. Its syntax is as follows &minus;</p>
<pre class="result notranslate">
namespace AppBundle\Form\Model; 
use Symfony\Component\Security\Core\Validator\Constraints as SecurityAssert; 

class ChangePassword { 
   /** 
      * @SecurityAssert\UserPassword( 
         * message = "Wrong value for your current password" 
      * ) 
   */ 
   protected $oldPassword;
} 
</pre>
<p>This constraint validates that the old password matches the user's current password.</p>
<h2>Validation Example</h2>
<p>Let us write a simple application example to understand the validation concept.</p>
<p><b>Step 1</b> &minus; Create a validation application.</p>
<p>Create a Symfony application, <b>validationsample</b>, using the following command.</p>
<pre class="result notranslate">
symfony new validationsample 
</pre>
<p><b>Step 2</b> &minus; Create an entity named, <b>FormValidation</b> in file <b>“FormValidation.php”</b> under the <b>“src/AppBundle/Entity/”</b> directory. Add the following changes in the file.</p>
<h3>FormValidation.php</h3>
<pre class="prettyprint notranslate">
&lt;?php 
namespace AppBundle\Entity; 
use Symfony\Component\Validator\Constraints as Assert; 

class FormValidation {       
   /** 
      * @Assert\NotBlank() 
   */ 
   protected $name;  
      
   /** 
      * @Assert\NotBlank() 
   */ 
   protected $id;  
   protected $age;  
      
   /** 
      * @Assert\NotBlank() 
   */ 
   protected $address;  
   public $password;
      
   /** 
      * @Assert\Email( 
         * message = "The email '{{ value }}' is not a valid email.", 
         * checkMX = true 
      * ) 
   */ 
   protected $email;  
      
   public function getName() { 
      return $this-&gt;name; 
   }  
   public function setName($name) { 
      $this-&gt;name = $name; 
   }  
   public function getId() { 
      return $this-&gt;id; 
   } 
   public function setId($id) { 
      $this-&gt;id = $id; 
   }  
   public function getAge() { 
      return $this-&gt;age; 
   }  
   public function setAge($age) { 
      $this-&gt;age = $age;
   }  
   public function getAddress() { 
      return $this-&gt;address; 
   }  
   public function setAddress($address) { 
      $this-&gt;address = $address; 
   }  
   public function getEmail() { 
      return $this-&gt;email; 
   }  
   public function setEmail($email) { 
      $this-&gt;email = $email; 
   } 
}
</pre>
<p><b>Step 3</b> &minus; Create a <b>validateAction</b> method in StudentController. Move to the directory <b>“src/AppBundle/Controller”</b>, create <b>“studentController.php”</b> file, and add the following code in it.</p>
<h3>StudentController.php</h3>
<pre class="prettyprint notranslate">
use AppBundle\Entity\FormValidation; 
/** 
   * @Route("/student/validate") 
*/ 
public function validateAction(Request $request) { 
   $validate = new FormValidation(); 
   $form = $this-&gt;createFormBuilder($validate) 
      -&gt;add('name', TextType::class)
      -&gt;add('id', TextType::class) 
      -&gt;add('age', TextType::class) 
      -&gt;add('address', TextType::class) 
      -&gt;add('email', TextType::class) 
      -&gt;add('save', SubmitType::class, array('label' =&gt; 'Submit')) 
      -&gt;getForm();  
      
   $form-&gt;handleRequest($request);  
   if ($form-&gt;isSubmitted() && $form-&gt;isValid()) { 
      $validate = $form-&gt;getData(); 
      return new Response('Form is validated.'); 
   }  
   return $this-&gt;render('student/validate.html.twig', array( 
      'form' =&gt; $form-&gt;createView(), 
   )); 
}   
</pre>
<p>Here, we have created the form using Form classes and then handled the form. If the form is submitted and is valid, a form validated message is shown. Otherwise, the default form is shown.</p>
<p><b>Step 4</b> &minus; Create a view for the above created action in StudentController. Move to the directory <b>“app/Resources/views/student/”</b>. Create <b>“validate.html.twig”</b> file and add the following code in it.</p>
<pre class="prettyprint notranslate">
{% extends 'base.html.twig' %} 
{% block stylesheets %} 
   &lt;style&gt; 
      #simpleform { 
         width:600px; 
         border:2px solid grey; 
         padding:14px; 
      }  
      #simpleform label {
         font-size:14px; 
         float:left; 
         width:300px; 
         text-align:right; 
         display:block; 
      }  
      #simpleform span { 
         font-size:11px; 
         color:grey; 
         width:100px; 
         text-align:right; 
         display:block; 
      }  
      #simpleform input { 
         border:1px solid grey; 
         font-family:verdana; 
         font-size:14px; 
         color:light blue; 
         height:24px; 
         width:250px; 
         margin: 0 0 10px 10px; 
      }  
      #simpleform textarea { 
         border:1px solid grey; 
         font-family:verdana; 
         font-size:14px; 
         color:light blue; 
         height:120px; 
         width:250px; 
         margin: 0 0 20px 10px;
      }  
      #simpleform select { 
         margin: 0 0 20px 10px; 
      }  
      #simpleform button { 
         clear:both; 
         margin-left:250px; 
         background: grey; 
         color:#FFFFFF; 
         border:solid 1px #666666; 
         font-size:16px; 
      } 
   &lt;/style&gt; 
{% endblock %}  

{% block body %} 
   &lt;h3&gt;Student form validation:&lt;/h3&gt; 
   &lt;div id = "simpleform"&gt; 
      {{ form_start(form) }} 
      {{ form_widget(form) }} 
      {{ form_end(form) }} 
   &lt;/div&gt;   
{% endblock %}       
</pre>
<p>Here, we have used form tags to create the form.</p>
<p><b>Step 5</b> &minus; Finally, run the application, <b>http://localhost:8000/student/validate</b>.</p>
<h3>Result: Initial Page</h3>
<img src="/symfony/images/initial_page.jpg" alt="Initial Page" />
<h3>Result: Final Page</h3>
<img src="/symfony/images/final_page.jpg" alt="Final Page" />
<h1>Symfony - File Uploading</h1>
<p>Symfony Form component provides <b>FileType</b> class to handle file input element. It enables easy uploading of images, documents, etc. Let us learn how to create a simple application using FileType feature.</p>
<p><b>Step 1</b> &minus; Create a new application, <b>fileuploadsample</b> using the following command.</p>
<pre class="result notranslate">
symfony new fileuploadsample
</pre>
<p><b>Step 2</b> &minus; Create an entity, <b>Student</b>, having name, age and photo as shown in the following code.</p>
<h3>src/AppBundle/Entity/Student.php</h3>
<pre class="prettyprint notranslate">
&lt;?php 
namespace AppBundle\Entity; 
use Symfony\Component\Validator\Constraints as Assert;  class Student { 
   /** 
      * @Assert\NotBlank() 
   */ 
   private $name;  
      
   /** 
      * @Assert\NotBlank() 
   */ 
   private $age;  
      
   /** 
      * @Assert\NotBlank(message="Please, upload the photo.") 
      * @Assert\File(mimeTypes={ "image/png", "image/jpeg" }) 
   */ 
   private $photo; 
      
   public function getName() { 
      return $this-&gt;name; 
   } 
   public function setName($name) { 
      $this-&gt;name = $name; 
      return $this; 
   } 
   public function getAge() { 
      return $this-&gt;age; 
   } 
   public function setAge($age) { 
      $this-&gt;age = $age; 
      return $this; 
   } 
   public function getPhoto() { 
      return $this-&gt;photo; 
   } 
   public function setPhoto($photo) { 
      $this-&gt;photo = $photo; 
      return $this; 
   } 
} 
</pre>
<p>Here, we have specified File for photo property.</p>
<p><b>Step 3</b> &minus; Create student controller, StudentController and a new method, addAction as shown in the following code.</p>
<pre class="prettyprint notranslate">
&lt;?php 
namespace AppBundle\Controller; 

use AppBundle\Entity\Student; 
use AppBundle\Form\FormValidationType; 
use Symfony\Bundle\FrameworkBundle\Controller\Controller; 
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route; 

use Symfony\Component\HttpFoundation\Request; 
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Form\Extension\Core\Type\TextType; 
use Symfony\Component\Form\Extension\Core\Type\FileType; 
use Symfony\Component\Form\Extension\Core\Type\SubmitType;  

class StudentController extends Controller {    
   /** 
      * @Route("/student/new") 
   */ 
   public function newAction(Request $request) { 
      $student = new Student(); 
      $form = $this-&gt;createFormBuilder($student) 
         -&gt;add('name', TextType::class) 
         -&gt;add('age', TextType::class) 
         -&gt;add('photo', FileType::class, array('label' =&gt; 'Photo (png, jpeg)')) 
         -&gt;add('save', SubmitType::class, array('label' =&gt; 'Submit')) 
         -&gt;getForm(); 
         
      $form-&gt;handleRequest($request); 
      if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) { 
         $file = $student-&gt;getPhoto(); 
         $fileName = md5(uniqid()).'.'.$file-&gt;guessExtension(); 
         $file-&gt;move($this-&gt;getParameter('photos_directory'), $fileName); 
         $student-&gt;setPhoto($fileName); 
         return new Response("User photo is successfully uploaded."); 
      } else { 
         return $this-&gt;render('student/new.html.twig', array( 
            'form' =&gt; $form-&gt;createView(), 
         )); 
      } 
   }   
}  
</pre>
<p>Here, we have created the form for student entity and handled the request. When the form is submitted by the user and it is valid, then we have moved the uploaded file to our upload directory using parameter, <b>photos_directory</b>.</p>
<p><b>Step 4</b> &minus; Create the view, <b>new.html.twig</b>, using the following form tags.</p>
<pre class="prettyprint notranslate">
{% extends 'base.html.twig' %} 
{% block javascripts %} 
   &lt;script language = "javascript" src = "https://code.jquery.com/jquery-2.2.4.min.js"&gt;&lt;/script&gt; 
{% endblock %} 
{% block stylesheets %} 
   &lt;style&gt; 
      #simpleform { 
         width:600px; 
         border:2px solid grey; 
         padding:14px; 
      }  
      #simpleform label { 
         font-size:12px; 
         float:left; 
         width:300px; 
         text-align:right; 
         display:block; 
      } 
      #simpleform span { 
         font-size:11px; 
         color:grey; 
         width:100px; 
         text-align:right; 
         display:block; 
      }  
      #simpleform input { 
         border:1px solid grey; 
         font-family:verdana; 
         font-size:14px; 
         color:grey; 
         height:24px; 
         width:250px; 
         margin: 0 0 20px 10px; 
      }  
      #simpleform button { 
         clear:both; 
         margin-left:250px; 
         background:grey; 
         color:#FFFFFF; 
         border:solid 1px #666666; 
         font-size:16px; 
      } 
   &lt;/style&gt; 
{% endblock %} 
{% block body %} 
   &lt;h3&gt;Student form&lt;/h3&gt; 
   &lt;div id="simpleform"&gt; 
      {{ form_start(form) }} 
      {{ form_widget(form) }} 
      {{ form_end(form) }} 
   &lt;/div&gt;   
{% endblock %}  
</pre>
<p><b>Step 5</b> &minus; Set the parameter, <b>photos_directory</b> in the parameter config file as follows.</p>
<h3>app/config/config.xml</h3>
<pre class="result notranslate">
parameters: photos_directory: '%kernel.root_dir%/../web/uploads/photos'
</pre>
<p><b>Step 6</b> &minus; Now, run the application and open http://localhost:8000/student/new and upload a photo. The uploaded photo will be uploaded to the photos_directory and a successful message will be shown.</p>
<h3>Result: Initial Page</h3>
<img src="/symfony/images/file_uploading_initial_page.jpg" alt="File Uploading Initial Page" />
<h3>Result: File Upload Page</h3>
<img src="/symfony/images/file_uploading_final_page.jpg" alt="File Uploading Final Page" />
<h1>Symfony - Ajax Control</h1>
<p>AJAX is a modern technology in web programming. It provides options to send and receive data in a webpage asynchronously, without refreshing the page. Let us learn Symfony AJAX programming in this chapter.</p>
<p>Symfony framework provides options to identity whether the request type is AJAX or not. Request class of Symfony HttpFoundation component has a method, isXmlHttpRequest() for this purpose. If an AJAX request is made, the current request object's isXmlHttpRequest() method returns true, otherwise false.</p>
<p>This method is used to handle an AJAX request properly in the server side.</p>
<pre class="result notranslate">
if ($request-&gt;isXmlHttpRequest()) {  
   // Ajax request  
} else {  
   // Normal request  
} 
</pre>
<p>Symfony also provides a JSON based Response class, JsonResponse to create the response in JSON format. We can combine these two methods to create a simple and clean AJAX based web application.</p>
<h2>AJAX - Working Example</h2>
<p>Let us add a new page, <b>student/ajax</b> in student application and try to fetch the student information asynchronously.</p>
<p><b>Step 1</b> &minus; Add ajaxAction method in StudentController(src/AppBundle/Controller/StudentController.php).</p>
<pre class="prettyprint notranslate">
/** 
   * @Route("/student/ajax") 
*/ 
public function ajaxAction(Request $request) {  
   $students = $this-&gt;getDoctrine() 
      -&gt;getRepository('AppBundle:Student') 
      -&gt;findAll();  
      
   if ($request-&gt;isXmlHttpRequest() || $request-&gt;query-&gt;get('showJson') == 1) {  
      $jsonData = array();  
      $idx = 0;  
      foreach($students as $student) {  
         $temp = array(
            'name' =&gt; $student-&gt;getName(),  
            'address' =&gt; $student-&gt;getAddress(),  
         );   
         $jsonData[$idx++] = $temp;  
      } 
      return new JsonResponse($jsonData); 
   } else { 
      return $this-&gt;render('student/ajax.html.twig'); 
   } 
}         
</pre>
<p>Here, if the request is AJAX, we fetch student information, encode it as JSON and return it using <b>JsonResponse</b> object. Otherwise, we just render the corresponding view.</p>
<p><b>Step 2</b> &minus; Create a view file <b>ajax.html.twig</b> in Student views directory, <b>app/Resources/views/student/</b> and add the following code.</p>
<pre class="prettyprint notranslate">
{% extends 'base.html.twig' %} 
{% block javascripts %} 
   &lt;script language = "javascript" 
      src = "https://code.jquery.com/jquery-2.2.4.min.js"&gt;&lt;/script&gt; 
   
   &lt;script language = "javascript"&gt;  
      $(document).ready(function(){   
         $("#loadstudent").on("click", function(event){  
            $.ajax({  
               url:        '/student/ajax',  
               type:       'POST',   
               dataType:   'json',  
               async:      true,  
               
               success: function(data, status) {  
                  var e = $('&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Address&lt;/th&gt;&lt;/tr&gt;');  
                  $('#student').html('');  
                  $('#student').append(e);  
                  
                  for(i = 0; i &lt; data.length; i++) {  
                     student = data[i];  
                     var e = $('&lt;tr&gt;&lt;td id = "name"&gt;&lt;/td&gt;&lt;td id = "address"&gt;&lt;/td&gt;&lt;/tr&gt;');
                     
                     $('#name', e).html(student['name']);  
                     $('#address', e).html(student['address']);  
                     $('#student').append(e);  
                  }  
               },  
               error : function(xhr, textStatus, errorThrown) {  
                  alert('Ajax request failed.');  
               }  
            });  
         });  
      });  
   &lt;/script&gt; 
{% endblock %}  

{% block stylesheets %} 
   &lt;style&gt; 
      .table { border-collapse: collapse; } 
      .table th, td { 
         border-bottom: 1px solid #ddd; 
         width: 250px; 
         text-align: left; 
         align: left; 
      } 
   &lt;/style&gt; 
{% endblock %} 

{% block body %} 
   &lt;a id = "loadstudent" href = "#"&gt;Load student information&lt;/a&gt;  
   &lt;/br&gt; 
   &lt;/br&gt;  
   
   &lt;table class = "table"&gt;  
      &lt;tbody id = "student"&gt;&lt;/tbody&gt;  
   &lt;/table&gt;     
{% endblock %} 
</pre>
<p>Here, we have created an anchor tag (id: loadstudent) to load the student information using AJAX call. The AJAX call is done using JQuery. Event attached to loadstudent tag activates when a user clicks it. Then, it will fetch the student information using AJAX call and generate the required HTML code dynamically.</p>
<p><b>Step 3</b>&minus; Finally, run the application, <b>http://localhost:8000/student/ajax</b> and click the Load student information anchor tab.</p>
<h3>Result: Initial Page</h3>
<img src="/symfony/images/ajax_control_initial_page.jpg" alt="Ajax Control Initial Page" />
<h3>Result: Page with Student Information</h3>
<img src="/symfony/images/ajax_control_final_page.jpg" alt="Ajax Control Final Page" />
<h1>Symfony - Cookies and Session Management</h1>
<p>Symfony HttpFoundation component provides cookie and session management in an object-oriented manner. <b>Cookie</b> provides client-side data storage and it only supports a small amount of data. Usually, it is 2KB per domain and it depends on the browser. <b>Session</b> provides server-side data storage and it supports a large amount of data. Let us see how to create a cookie and session in a Symfony web application.</p>
<h2>Cookie</h2>
<p>Symfony provides Cookie class to create a cookie item. Let us create a cookie color, which expires in 24 hours with value <b>blue</b>. The constructor parameter of the cookie class is as follows.</p>
<ul class="list">
<li>name (type: string) - cookie name</li>
<li>value (type: string) - cookie value</li>
<li>expire (type: integer / string / datetime) - expiry information</li>
<li>path (type: string) - the server path in which the cookie is available</li>
<li>domain (type: string) – the domain address in which the cookie is available</li>
<li>secure (type: boolean) - whether the cookie needs to be transmitted in HTTPS connection</li>
<li>httpOnly (type: boolean) - whether the cookie is available only in HTTP protocol</li>
</ul>
<pre class="result notranslate">
use Symfony\Component\HttpFoundation\Cookie;  
$cookie = new Cookie('color', 'green', strtotime('tomorrow'), '/', 
   'somedomain.com', true, true);
</pre>
<p>Symfony also provides the following string-based cookie creation option.</p>
<pre class="result notranslate">
$cookie = Cookie::fromString('color = green; expires = Web, 4-May-2017 18:00:00 +0100; 
path=/; domain = somedomain.com; secure; httponly');
</pre>
<p>Now, the created cookie needs to be attached to the http response object's header as follows.</p>
<pre class="result notranslate">
$response-&gt;headers-&gt;setCookie($cookie);
</pre>
<p>To get the cookie, we can use Request object as follows.</p>
<pre class="result notranslate">
$cookie = $request-&gt;cookie-&gt;get('color'); 
</pre>
<p>Here, <b>request-&gt;cookie</b> is of type <b>PropertyBag</b> and we can manipulate it using PropertyBag methods.</p>
<h2>Session</h2>
<p>Symfony provides a Session class implementing SessionInterface interface. The important session API are as follows,</p>
<p><b>start</b> &minus; Starts the session.</p>
<pre class="result notranslate">
Session $session = new Session(); 
$session-&gt;start(); 
</pre>
<p><b>invalidate</b> &minus; Clears all session data and regenerates the session ID.</p>
<p><b>set</b> &minus; Stores data in the session using a key.</p>
<pre class="result notranslate">
$session-&gt;set('key', 'value');
</pre>
<p>We can use any data in the session value, be in simple integer to complex objects.</p>
<p><b>get</b> &minus; Gets data from the session using the key.</p>
<pre class="result notranslate">
$val = $session-&gt;get('key');
</pre>
<p><b>remove</b> &minus; Removes a key from the session.</p>
<p><b>clear</b> &minus; Removes a session data.</p>
<h3>FlashBag</h3>
<p>Session provides another useful feature called <b>FlashBag</b>. It is a special container inside the session holding the data only during page redirection. It is useful in http redirects. Before redirecting to a page, data can be saved in FlashBag instead of a normal session container and the saved data will be available in the next request (the redirected page). Then, the data will be invalidated automatically.</p>
<pre class="result notranslate">
$session-&gt;getFlashBag()-&gt;add('key', 'value');  
$session-&gt;getFlashBag()-&gt;get('key'); 
</pre>
<h1>Symfony - Internationalization</h1>
<p><b>Internationalization (i18n)</b> and <b>Localization (l10n)</b> help to increase the customer coverage of a web application. Symfony provides an excellent Translation component for this purpose. Let us learn how to use the Translation component in this chapter.</p>
<h3>Enable Translation</h3>
<p>By default, Symfony web framework disables Translation component. To enable it, add the translator section in the configuration file, app/config/config.yml.</p>
<pre class="result notranslate">
framework: translator: { fallbacks: [en] }
</pre>
<h3>Translation File</h3>
<p>Translation component translates the text using the translation resource file. The resource file may be written in PHP, XML, and YAML. The default location of the resource file is <b>app/Resources/translations</b>. It needs one resource file per language. Let us write a resource file, <b>messages.fr.yml</b> for French language.</p>
<pre class="result notranslate">
I love Symfony: J'aime Symfony 
I love %name%: J'aime %name%
</pre>
<p>The left side text is in English and the right side text is in French. The second line shows the use of a placeholder. The placeholder information can be added dynamically while using translation.</p>
<h3>Usage</h3>
<p>By default, the default locale of the user's system will be set by the Symfony web framework. If the default locale is not configured in the web application, it will fallback to English. The locale can be set in the URL of the web page as well.</p>
<pre class="result notranslate">
http://www.somedomain.com/en/index 
http://www.somedomain.com/fr/index
</pre>
<p>Let us use URL-based locale in our example to easily understand the translation concept. Create a new function, <b>translationSample</b> with route <b>/{_locale}/translation/sample</b> in DefaultController (src/AppBundle/Controller/DefaultController.php). {_locale} is a special keyword in Symfony to specify the default locale.</p>
<pre class="prettyprint notranslate">
/** 
   * @Route("/{_locale}/translation/sample", name="translation_sample") 
*/ 
public function translationSample() { 
   $translated = $this-&gt;get('translator')-&gt;trans('I love Symfony'); 
   return new Response($translated); 
}
</pre>
<p>Here, we have used translation method, <b>trans</b>, which translates the content to the current locale. In this case, the current locale is the first part of the URL. Now, run the application and load the page, <b>http://localhost:8000/en/translation/sample</b> in the browser.</p>
<p>The result will be "I love Symfony" in English language. Now, load the page <b>http://localhost:8000/fr/translation/sample</b> in the browser. Now, the text will be translated to French as follows.</p>
<img src="/symfony/images/i_love_symfony.jpg" alt="I love Symfony" />
<p>Similarly, twig template has <b>{% trans %}</b> block to enable translation feature in views as well. To check it, add a new function, <b>translationTwigSample</b> and the corresponding view at <b>app/Resources/views/translate/index.html.twig</b>.</p>
<pre class="prettyprint notranslate">
/** 
   * @Route("/{_locale}/translation/twigsample", name="translation_twig_sample") 
*/ 
public function translationTwigSample() { 
   return $this-&gt;render('translate/index.html.twig'); 
} 
</pre>
<h3>View</h3>
<pre class="prettyprint notranslate">
{% extends 'base.html.twig' %}  
{% block body %} 
   {% trans with {'%name%': 'Symfony'} from "app" into "fr" %}I love %name% {% endtrans %} 
{% endblock %} 
</pre>
<p>Here, the trans block specifies the placeholder as well. The page result is as follows.</p>
<img src="/symfony/images/placeholder.jpg" alt="Place Holder" />
<h1>Symfony - Logging</h1>
<p>Logging is very important for a web application. Web applications are used by hundreds to thousands of users at a time. To get sneak preview of happenings around a web application, Logging should be enabled. Without logging, the developer will not be able to find the status of the application. Let us consider that an end customer reports an issue or a project stackholder reports performance issue, then the first tool for the developer is Logging. By checking the log information, one can get some idea about the possible reason of the issue.</p>
<p>Symfony provides an excellent logging feature by integrating Monolog logging framework. <b>Monolog</b> is a de-facto standard for logging in PHP environment. Logging is enabled in every Symfony web application and it is provided as a Service. Simply get the logger object using base controller as follows.</p>
<pre class="result notranslate">
$logger = $this-&gt;get('logger'); 
</pre>
<p>Once the logger object is fetched, we can log information, warning, and error using it.</p>
<pre class="result notranslate">
$logger-&gt;info('Hi, It is just a information. Nothing to worry.'); 
$logger-&gt;warn('Hi, Something is fishy. Please check it.'); 
$logger-&gt;error('Hi, Some error occured. Check it now.'); 
$logger-&gt;critical('Hi, Something catastrophic occured. Hurry up!');
</pre>
<p>Symfony web application configuration file <b>app/config/config.yml</b> has a separate section for the logger framework. It can be used to update the working of the logger framework.</p>
<h1>Symfony - Email Management</h1>
<p>Email functionality is the most requested feature in a web framework. Even a simple application will have a contact form and the details will be sent to the system administration through email. Symfony integrates <b>SwiftMailer</b>, the best PHP email module available in the market. SwiftMailer is an excellent email library providing an option to send email using old-school sendmail to the latest cloud-based mailer application.</p>
<p>Let us understand the concept of mailing in Symfony by sending a simple email. Before writing the mailer functionality, set the mailer configuration details in <b>app/config/parameters.yml</b>. Then, create a new function, <b>MailerSample</b> in <b>DefaultController</b> and add the following code.</p>
<pre class="prettyprint notranslate">
/** 
   * @Route("/mailsample/send", name="mail_sample_send") 
*/ 
public function MailerSample() { 
   $message = \Swift_Message::newInstance() 
      -&gt;setSubject('Hello Email') 
      -&gt;setFrom('someone@gmail.com') 
      -&gt;setTo('anotherone@gmail.com') 
      -&gt;setBody( 
      $this-&gt;renderView('Emails/sample.html.twig'), 'text/html' );  
      
   $this-&gt;get('mailer')-&gt;send($message);  
   return new Response("Mail send"); 
}
</pre>
<p>Here, we have simply created a message using <b>SwiftMailer</b> component and rendered the body of the message using <b>Twig</b> template. Then, we fetched the mailer component from the controller's <b>get</b> method with the key ‘mailer’. Finally, we sent the message using <b>send</b> method and printed the <b>Mail send</b> message.</p>
<p>Now, run the page, <b>http://localhost:8000/mailsample/send</b> and the result would be as follows.</p>
<img src="/symfony/images/mail_send.jpg" alt="Mail Send" />
<h1>Symfony - Unit Testing</h1>
<p>Unit test is essential for ongoing development in large projects. Unit tests will automatically test your application’s components and alert you when something is not working. Unit testing can be done manually but is often automated.</p>
<h2>PHPUnit</h2>
<p>Symfony framework integrates with the PHPUnit unit testing framework. To write a unit test for the Symfony framework, we need to set up the PHPUnit. If PHPUnit is not installed, then download and install it. If it is installed properly, then you will see the following response.</p>
<pre class="result notranslate">
phpunit 
PHPUnit 5.1.3 by Sebastian Bergmann and contributors
</pre>
<h2>Unit test</h2>
<p>A unit test is a test against a single PHP class, also called as a unit.</p>
<p>Create a class Student in the Libs/ directory of the AppBundle. It is located at <b>“src/AppBundle/Libs/Student.php”</b>.</p>
<h3>Student.php</h3>
<pre class="prettyprint notranslate">
namespace AppBundle\Libs; 

class Student { 
   public function show($name) { 
      return $name. “ , Student name is tested!”; 
   } 
}
</pre>
<p>Now, create a StudentTest file in the “tests/AppBundle/Libs” directory.</p>
<h3>StudentTest.php</h3>
<pre class="prettyprint notranslate">
namespace Tests\AppBundle\Libs; 
use AppBundle\Libs\Student;  

class StudentTest extends \PHPUnit_Framework_TestCase { 
   public function testShow() { 
      $stud = new Student(); 
      $assign = $stud-&gt;show(‘stud1’); 
      $check = “stud1 , Student name is tested!”; 
      $this-&gt;assertEquals($check, $assign); 
   } 
}
</pre>
<h3>Run test</h3>
<p>To run the test in the directory, use the following command.</p>
<pre class="result notranslate">
$ phpunit
</pre>
<p>After executing the above command, you will see the following response.</p>
<pre class="result notranslate">
PHPUnit 5.1.3 by Sebastian Bergmann and contributors.  
Usage: phpunit [options] UnitTest [UnitTest.php] 
   phpunit [options] &lt;directory&gt;  
Code Coverage Options:  
   --coverage-clover &lt;file&gt;  Generate code coverage report in Clover XML format. 
   --coverage-crap4j &lt;file&gt;  Generate code coverage report in Crap4J XML format. 
   --coverage-html &lt;dir&gt;     Generate code coverage report in HTML format. 
</pre>
<p>Now, run the tests in the Libs directory as follows.</p>
<pre class="result notranslate">
$ phpunit tests/AppBundle/Libs
</pre>
<h3>Result</h3>
<pre class="result notranslate">
Time: 26 ms, Memory: 4.00Mb 
OK (1 test, 1 assertion)
</pre>
<h1>Symfony - Advanced Concepts</h1>
<p>In this chapter, we will learn about some advanced concepts in Symfony framework.</p>
<h2>HTTP Cache</h2>
<p>Caching in a web application improves performance. For example, hot products in a shopping cart web application can be cached for a limited time, so that it can be presented to the customer in a speedy manner without hitting the database. Following are some basic components of Cache.</p>
<h3>Cache Item</h3>
<p>Cache Item is a single unit of information stored as a key/value pair. The <b>key</b> should be string and <b>value</b> can be any PHP object. PHP objects are stored as string by serialization and converted back into objects while reading the items.</p>
<h3>Cache Adapter</h3>
<p>Cache Adapter is the actual mechanism to store the item in a store. The store may be a memory, file system, database, redis, etc. Cache component provides an <b>AdapterInterface</b> through which an adapter can store cache item in a back-end store. There are lot of built-in cache adapters available. Few of them are as follows &minus;</p>
<ul class="list">
<li><p>Array Cache adapter - Cache items are stored in PHP array.</p></li>
<li><p>Filesystem Cache adapter - Cache items are stored in files.</p></li>
<li><p>PHP Files Cache Adapter - Cache items are stored as php files.</p></li>
<li><p>APCu Cache Adapter - Cache items are stored in shared memory using PHP APCu extenstion.</p></li>
<li><p>Redis Cache Adapter - Cache items are stored in Redis server.</p></li>
<li><p>PDO and Doctrine DBAL Cache Adapter - Cache items are stored in the database.</p></li>
<li><p>Chain Cache Adapter - Combines multiple cache adapters for replication purpose.</p></li>
<li><p>Proxy Cache Adapter - Cache items are stored using third party adapter, which implements CacheItemPoolInterface.</p></li>
</ul>
<h3>Cache Pool</h3>
<p>Cache Pool is a logical repository of cache items. Cache pools are implemented by cache adapters.</p>
<h3>Simple Application</h3>
<p>Let us create a simple application to understand the cache concept.</p>
<p><b>Step 1</b> &minus; Create a new application, <b>cache-example</b>.</p>
<pre class="result notranslate">
cd /path/to/app 
mkdir cache-example 
cd cache-example
</pre>
<p><b>Step 2</b> &minus; Install cache component.</p>
<pre class="result notranslate">
composer require symfony/cache
</pre>
<p><b>Step 3</b> &minus; Create a file system adapter.</p>
<pre class="result notranslate">
require __DIR__ . '/vendor/autoload.php';  
use Symfony\Component\Cache\Adapter\FilesystemAdapter;  
$cache = new FilesystemAdapter(); 
</pre>
<p><b>Step 4</b> &minus; Create a cache item using <b>getItem</b> and <b>set</b> method of adapter. getItem fetches the cache item using its key. if the key is not persent, it creates a new item. set method stores the actual data.</p>
<pre class="result notranslate">
$usercache = $cache-&gt;getitem('item.users'); 
$usercache-&gt;set(['jon', 'peter']); 
$cache-&gt;save($usercache); 
</pre>
<p><b>Step 5</b> &minus; Access the cache item using <b>getItem, isHit</b> and <b>get</b> method. isHit informs the availability of the cache item and get method provides the actual data.</p>
<pre class="result notranslate">
$userCache = $cache-&gt;getItem('item.users'); 
if(!$userCache-&gt;isHit()) { 
   echo "item.users is not available"; 
} else { 
   $users = $userCache-&gt;get(); 
   var_dump($users); 
} 
</pre>
<p><b>Step 6</b> &minus; Delete the cache item using <b>deleteItem</b> method.</p>
<pre class="result notranslate">
$cache-&gt;deleteItem('item.users');
</pre>
<p>The complete code listing is as follows.</p>
<pre class="prettyprint notranslate">
&lt;?php  
   require __DIR__ . '/vendor/autoload.php'; 
   use Symfony\Component\Cache\Adapter\FilesystemAdapter;  

   $cache = new FilesystemAdapter();  
   $usercache = $cache-&gt;getitem('item.users'); 
   $usercache-&gt;set(['jon', 'peter']); 
   $cache-&gt;save($usercache);  
   $userCache = $cache-&gt;getItem('item.users'); 
   
   if(!$userCache-&gt;isHit()) { 
      echo "item.users is not available"; 
   } else { 
      $users = $userCache-&gt;get(); 
      var_dump($users); 
   }  
   $cache-&gt;deleteItem('item.users');  
?&gt; 
</pre>
<h3>Result</h3>
<pre class="result notranslate">
array(2) { 
   [0]=&gt; 
   string(3) "jon" 
   [1]=&gt; 
   string(5) "peter" 
} 
</pre>
<h2>Debug</h2>
<p>Debugging is one of the most frequent activity while developing an application. Symfony provides a separate component to ease the process of debugging. We can enable Symfony debugging tools by just calling the <b>enable</b> method of Debug class.</p>
<pre class="result notranslate">
use Symfony\Component\Debug\Debug  
Debug::enable()
</pre>
<p>Symfony provides two classes, <b>ErrorHandler</b> and <b>ExceptionHandler</b> for debugging purpose. While ErrorHandler catches PHP errors and converts them into exceptions, ErrorException or FatalErrorException, ExceptionHandler catches uncaught PHP exceptions and converts them into useful PHP response. ErrorHandler and ExceptionHandler are disabled by default. We can enable it by using the register method.</p>
<pre class="result notranslate">
use Symfony\Component\Debug\ErrorHandler; 
use Symfony\Component\Debug\ExceptionHandler;  
ErrorHandler::register(); 
ExceptionHandler::register(); 
</pre>
<p>In a Symfony web application, the <b>debug environment</b> is provided by DebugBundle. Register the bundle in AppKernel's <b>registerBundles</b> method to enable it.</p>
<pre class="result notranslate">
if (in_array($this-&gt;getEnvironment(), ['dev', 'test'], true)) { 
   $bundles[] = new Symfony\Bundle\DebugBundle\DebugBundle(); 
}
</pre>
<h2>Profiler</h2>
<p>Development of an application needs a world-class profiling tool. The profiling tool collects all the run-time information about an application such as execution time, execution time of individual modules, time taken by a database activity, memory usage, etc. A web application needs much more information such as the time of request, time taken to create a response, etc. in addition to the above metrics.</p>
<p>Symfony enables all such information in a web application by default. Symfony provides a separate bundle for web profiling called <b>WebProfilerBundle</b>. Web profiler bundle can be enabled in a web application by registering the bundle in the AppKernel's registerBundles method.</p>
<pre class="result notranslate">
if (in_array($this-&gt;getEnvironment(), ['dev', 'test'], true)) { 
   $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle(); 
}
</pre>
<p>The web profile component can be configured under <b>web_profile section</b> of the application configuration file, <b>app/config/config.xml</b></p>
<pre class="result notranslate">
web_profiler: 
   toolbar:      false 
   position:     bottom 
</pre>
<p>Symfony application shows the profiled data at the bottom of the page as a distinct section.</p>
<img src="/symfony/images/symfony_application.jpg" alt="Symfony application" />
<p>Symfony also provides an easy way to add custom details about the page in the profile data using <b>DataCollectorInterface interface</b> and twig template. In short, Symfony enables a web developer to create a world-class application by providing a great profiling framework with relative ease.</p>
<h2>Security</h2>
<p>As discussed earlier, Symfony provides a robust security framework through its security component. The security component is divided into four sub-components as follows.</p>
<ul class="list">
<li>symfony/security-core - Core security functionality.</li>
<li>symfony/security-http - Integrated security feature in HTTP protocol.</li>
<li>symfony/security-csrf - Protection against cross-site request forgery in a web application.</li>
<li>symfony/security-acl - Advanced access control list based security framework.</li>
</ul>
<h3>Simple Authentication and Authorization</h3>
<p>Let us learn the concept of authentication and authorization using a simple demo application.</p>
<p><b>Step 1</b> &minus; Create a new web application <b>securitydemo</b> using the following command.</p>
<pre class="result notranslate">
 symfony new securitydemo
</pre>
<p><b>Step 2</b> &minus; Enable the security feature in the application using the security configuration file. The security related configuration are placed in a separate file, <b>security.yml</b>. The default configuration is as follows.</p>
<pre class="result notranslate">
security: 
   providers: 
      in_memory: 
         memory: ~ 
   firewalls: 
      dev: 
         pattern: ^/(_(profiler|wdt)|css|images|js)/ 
         security: false  
   main: 
      anonymous: ~ 
      #http_basic: ~ 
      #form_login: ~
</pre>
<p>The default configuration enables memory-based security provider and anonymous access to all pages. The firewall section excludes the files matching the pattern, <b>^/(_(profiler|wdt)|css|images|js)/</b> from the security framework. The default pattern includes stylesheets, images, and JavaScripts (plus dev tools like profiler).</p>
<p><b>Step 3</b> &minus; Enable HTTP based security authenticate system by adding http_basic option in main section as follows.</p>
<pre class="result notranslate">
security: 
   # ...  
   firewalls: 
      # ...  
      main: 
         anonymous: ~ 
         http_basic: ~ 
         #form_login: ~ 
</pre>
<p><b>Step 4</b> &minus; Add some users in the memory provider section. Also, add roles for the users.</p>
<pre class="result notranslate">
security: 
   providers: 
      in_memory: 
         memory: 
            users: 
               myuser: 
                  password: user 
                  roles: 'ROLE_USER' 
                     myadmin: 
                        password: admin 
                        roles: 'ROLE_ADMIN' 
</pre>
<p>We have added two users, <i>user</i> in role ROLE_USER and <i>admin</i> in role ROLE_ADMIN.</p>
<p><b>Step 5</b> &minus; Add the encoder to get complete details of the current logged-in user. The purpose of the encoder is to get complete details of the current user object from the web request.</p>
<pre class="prettyprint notranslate">
security: 
   # ... 
   encoders: 
      Symfony\Component\Security\Core\User\User: bcrypt 
      # ...  
</pre>
<p>Symfony provides an interface, <b>UserInterface</b> to get user details such as username, roles, password, etc. We need to implement the interface to our requirement and configure it in the encoder section.</p>
<p>For example, let us consider that the user details are in the database. Then, we need to create a new User class and implement UserInterface methods to get the user details from the database. Once the data is available, then the security system uses it to allow/deny the user. Symfony provides a default User implementation for Memory provider. Algorithm is used to decrypt the user password.</p>
<p><b>Step 6</b> &minus; Encrypt the user password using <b>bcrypt</b> algorithm and place it in the configuration file. Since we used <b>bcrypt</b> algorithm, User object tries to decrypt the password specified in configuration file and then tries to match with the password entered by the user. Symfony console application provides a simple command to encrypt the password.</p>
<pre class="result notranslate">
php bin/console security:encode-password admin 
Symfony Password Encoder Utility 
================================  
------------------ -----------------------------------
Key   Value  
------------------ ------------------------------------
Encoder used       Symfony\Component\Security\Core\Encoder\BCryptPasswordEncoder         
Encoded password   
$2y$12$0Hy6/.MNxWdFcCRDdstHU.hT5j3Mg1tqBunMLIUYkz6..IucpaPNO    
------------------ ------------------------------------   
! [NOTE] Bcrypt encoder used: the encoder generated its own built-in salt.
[OK] Password encoding succeeded 
</pre>
<p><b>Step 7</b> &minus; Use the command to generate the encrypted password and update it in the configuration file.</p>
<pre class="prettyprint notranslate">
# To get started with security, check out the documentation: 
# http://symfony.com/doc/current/security.html 
   security:  
      # http://symfony.com/doc/current/security.html#b-configuring-how-users-are-loaded 
      providers: 
         in_memory: 
            memory: 
               users: 
                  user: 
                     password: $2y$13$WsGWNufreEnVK1InBXL2cO/U7WftvfNvH
                     Vb/IJBH6JiYoDwVN4zoi  
                     roles: 'ROLE_USER' 
                     admin: 
                        password: $2y$13$jQNdIeoNV1BKVbpnBuhKRuOL01NeMK
                        F7nEqEi/Mqlzgts0njK3toy  
                        roles: 'ROLE_ADMIN' 
                         
         encoders: 
            Symfony\Component\Security\Core\User\User: bcrypt  
         firewalls: 
            # disables authentication for assets and the profiler, 
            # adapt it according to your needs 
         dev: 
            pattern: ^/(_(profiler|wdt)|css|images|js)/
         security: false  
         main: 
            anonymous: ~ 
            # activate different ways to authenticate  
            # http://symfony.com/doc/current/security.html#a-co
            nfiguring-howyour-users-will-authenticate 
            http_basic: ~  
            # http://symfony.com/doc/current/cookbook/security/
            form_login_setup.html 
            #form_login: ~             
</pre>
<p><b>Step 8</b> &minus; Now, apply the security to some section of the application. For example, restrict admin section to the users in role, ROLE_ADMIN.</p>
<pre class="prettyprint notranslate">
security: 
   # ... 
      firewalls: 
         # ... 
      default: 
         # ...  
      access_control: 
         # require ROLE_ADMIN for /admin* 
         - { path: ^/admin, roles: 'ROLE_ADMIN' } 
</pre>
<p><b>Step 9</b> &minus; Add an admin page in DefaultController as follows.</p>
<pre class="prettyprint notranslate">
/** 
   * @Route("/admin") 
*/ 
public function adminLandingAction() { 
   return new Response('&lt;html&gt;&lt;body&gt;This is admin section.&lt;/body&gt;&lt;/html&gt;'); 
} 
</pre>
<p><b>Step 10</b> &minus; Finally, access the admin page to check the security configuration in a browser. The browser will ask for the username and password and only allow configured users.</p>
<h3>Result</h3>
<img src="/symfony/images/connecting.jpg" alt="Connecting" />
<p></p>
<img src="/symfony/images/admin_section.jpg" alt="Admin Section" />
<h2>Workflow</h2>
<p>Workflow is an advanced concept having usage in many enterprise applications. In an ecommerce application, the product delivery process is a workflow. The product is first billed (order creation), procured from the store and packaged (packaging/ready to dispatch), and dispatched to the user. If there is any issue, the product returns from the user and the order is reverted. Order of the flow of action is very important. For example, we can't deliver a product without billing.</p>
<p>Symfony component provides an object-oriented way to define and manage a workflow. Each step in a process is called <b>place</b> and the action required to move from one place to another is called <b>transition</b>. The collection of places and transition to create a workflow is called a <b>Workflow definition</b>.</p>
<p>Let us understand the concept of workflow by creating a simple application for leave management.</p>
<p><b>Step 1</b> &minus; Create a new application, <b>workflow-example</b>.</p>
<pre class="prettyprint notranslate">
cd /path/to/dev 
mkdir workflow-example 

cd workflow-example 
composer require symfony/workflow
</pre>
<p><b>Step 2</b> &minus; Create a new class, <b>Leave</b> having <b>applied_by, leave_on</b> and <b>status</b> attributes.</p>
<pre class="result notranslate">
class Leave { 
   public $applied_by; 
   public $leave_on;  
   public $status; 
} 
</pre>
<p>Here, applied_by refers to the employees who want leave. leave_on refers to the date of leave. status refers to the leave status.</p>
<p><b>Step 3</b> &minus; Leave management has four places, applied, in_process and approved / rejected.</p>
<pre class="result notranslate">
use Symfony\Component\Workflow\DefinitionBuilder; 
use Symfony\Component\Workflow\Transition; 
use Symfony\Component\Workflow\Workflow; 
use Symfony\Component\Workflow\MarkingStore\SingleStateMarkingStore; 
use Symfony\Component\Workflow\Registry; 
use Symfony\Component\Workflow\Dumper\GraphvizDumper;

$builder = new DefinitionBuilder(); 
$builder-&gt;addPlaces(['applied', 'in_process', 'approved', 'rejected']);  
</pre>
<p>Here, we have created a new definition using <b>DefinitionBuilder</b> and added places using <b>addPlaces</b> method.</p>
<p><b>Step 4</b> &minus; Define the actions required to move from one place to another place.</p>
<pre class="result notranslate">
$builder-&gt;addTransition(new Transition('to_process', 'applied', 'in_process')); 
$builder-&gt;addTransition(new Transition('approve', 'in_process', 'approved')); 
$builder-&gt;addTransition(new Transition('reject', 'in_process', 'rejected')); 
</pre>
<p>Here, we have three transitions, <b>to_process, approve</b> and <b>reject</b>. to_process transition accepts the leave application and moves the place from applied to in_process. approve transition approves the leave application and moves the place to approved. Similarly, reject transition rejects the leave application and moves the place to rejected. We have created all transitions using addTransition method.</p>
<p><b>Step 5</b> &minus; Build the definition using build method.</p>
<pre class="result notranslate">
$definition = $builder-&gt;build();
</pre>
<p><b>Step 6</b> &minus; Optionally, the definition can be dumped as graphviz dot format, which can be converted to image file for reference purpose.</p>
<pre class="result notranslate">
$dumper = new GraphvizDumper(); 
echo $dumper-&gt;dump($definition);
</pre>
<img src="/symfony/images/graphviz_dot_format.jpg" alt="Graphviz Dot Format" />
<p><b>Step 7</b> &minus; Create a marking store, which is used to store the current places/status of the object.</p>
<pre class="result notranslate">
$marking = new SingleStateMarkingStore('status');
</pre>
<p>Here, we have used <b>SingleStateMarkingStore</b> class to create the mark and it marks the current status into the status property of the object. In our example, the object is Leave object.</p>
<p><b>Step 8</b> &minus; Create the workflow using definition and marking.</p>
<pre class="result notranslate">
$leaveWorkflow =    new Workflow($definition, $marking);
</pre>
<p>Here, we have used <b>Workflow</b> class to create the workflow.</p>
<p><b>Step 9</b> &minus; Add the workflow into the registry of the workflow framework using <b>Registry</b> class.</p>
<pre class="result notranslate">
$registry = new Registry(); 
$registry-&gt;add($leaveWorkflow, Leave::class);
</pre>
<p><b>Step 10</b> &minus; Finally, use the workflow to find whether a given transition is applied using <b>can</b> method and if so, <b>apply</b> the transition using apply method. When a transition is applied, the status of the object moves from one place to another.</p>
<pre class="result notranslate">
$workflow = $registry-&gt;get($leave); 
echo "Can we approve the leave now? " . $workflow-&gt;can($leave, 'approve') . "\r\n"; 
echo "Can we approve the start process now? " . $workflow-&gt;can($leave, 'to_process') . "\r\n"; 

$workflow-&gt;apply($leave, 'to_process'); 
echo "Can we approve the leave now? " . $workflow-&gt;can($leave, 'approve') . "\r\n"; 
echo $leave-&gt;status . "\r\n"; 

$workflow-&gt;apply($leave, 'approve'); 
echo $leave-&gt;status . "\r\n";
</pre>
<p>The complete coding is as follows &minus;</p>
<pre class="prettyprint notranslate">
&lt;?php  
   require __DIR__ . '/vendor/autoload.php';  

   use Symfony\Component\Workflow\DefinitionBuilder; 
   use Symfony\Component\Workflow\Transition; 
   use Symfony\Component\Workflow\Workflow; 
   use Symfony\Component\Workflow\MarkingStore\SingleStateMarkingStore; 
   use Symfony\Component\Workflow\Registry; 
   use Symfony\Component\Workflow\Dumper\GraphvizDumper;

   class Leave { 
      public $applied_by; 
      public $leave_on;  
      public $status; 
   }  
   $builder = new DefinitionBuilder(); 
   $builder-&gt;addPlaces(['applied', 'in_process', 'approved', 'rejected']); 
   $builder-&gt;addTransition(new Transition('to_process', 'applied', 'in_process')); 
   $builder-&gt;addTransition(new Transition('approve', 'in_process', 'approved')); 
   $builder-&gt;addTransition(new Transition('reject', 'in_process', 'rejected')); 
   $definition = $builder-&gt;build();  

   // $dumper = new GraphvizDumper(); 
   // echo $dumper-&gt;dump($definition);  

   $marking = new SingleStateMarkingStore('status'); 
   $leaveWorkflow = new Workflow($definition, $marking);  
   $registry = new Registry(); 
   $registry-&gt;add($leaveWorkflow, Leave::class);  

   $leave = new Leave(); 
   $leave-&gt;applied_by = "Jon"; 
   $leave-&gt;leave_on = "1998-12-12"; 
   $leave-&gt;status = 'applied';  

   $workflow = $registry-&gt;get($leave); 
   echo "Can we approve the leave now? " . $workflow-&gt;can($leave, 'approve') . "\r\n"; 
   echo "Can we approve the start process now? " . $workflow-&gt;can($leave, 'to_process') . "\r\n"; 
   
   $workflow-&gt;apply($leave, 'to_process');  
   echo "Can we approve the leave now? " . $workflow-&gt;can($leave, 'approve') . "\r\n"; 
   echo $leave-&gt;status . "\r\n"; 
   
   $workflow-&gt;apply($leave, 'approve'); 
   echo $leave-&gt;status . "\r\n";  
?&gt;  
</pre>
<h3>Result</h3>
<pre class="result notranslate">
Can we approve the leave now?  
Can we approve the start process now? 1 
Can we approve the leave now? 1 
in_process 
approved
</pre>
<h1>Symfony - REST Edition</h1>
<p>In any modern application, REST service is one of the core fundamental building blocks. Be it a web-based application or a slick mobile application, the front-end is usually a well designed interface for the back-end REST services. Symfony REST edition provides a readymade template to kick-start our REST based web application.</p>
<p>Let us learn how to install a template REST application using Symfony REST edition.</p>
<p><b>Step 1</b> &minus; Download Symfony REST edition using the following command.</p>
<pre class="result notranslate">
composer create-project gimler/symfony-rest-edition --stability=dev path/to/install
</pre>
<p>This will download the Symfony REST edition.</p>
<p><b>Step 2</b> &minus; Try to configure it by asking some questions. For all the questions, select the default answer except database. For database, select pdo_sqlite. You may need to enable PHP's sqlite extension, if it is not already installed.</p>
<p><b>Step 3</b> &minus; Now, run the application using the following command.</p>
<pre class="result notranslate">
php app/console server:run
</pre>
<p><b>Step 4</b> &minus; Finally, open the application in the browser using http://localhost:8000/.</p>
<p>It will produce the following result &minus;</p>
<img src="/symfony/images/available_notes.jpg" alt="Available Notes" />
<h1>Symfony - CMF Edition</h1>
<p>Content management system is one of the largest market in the web application scenario. There are a lot of frameworks available for content management system, in virtually all languages under the sun. Most of the frameworks are easy to work as an end customer but very hard to work with as a developer and vice-versa.</p>
<p>Symfony provides a simple and easy framework for a developer to start with. It has all the basic features expected by an end customer as well. In short, it is the responsibility of the developer to provide a great experience for the end customer.</p>
<p>Let us see how to install a CMS application template using Symfony CMF edition.</p>
<p><b>Step 1</b> &minus; Download Symfony CMF sandbox using the following command.</p>
<pre class="result notranslate">
composer create-project symfony-cmf/sandbox cmf-sandbox 
</pre>
<p>This will download the Symfony CMF.</p>
<p><b>Step 2</b> &minus; Try to configure it by asking some questions. For all the questions, select the default answer except database. For database, select pdo_sqlite. You may need to enable PHP's sqlite extension, if it is not already installed.</p>
<p><b>Step 3</b> &minus; Create demo database using the console application as follows.</p>
<pre class="result notranslate">
php app/console doctrine:database:create
</pre>
<p><b>Step 4</b> &minus; Load the demo data into the database using the following command.</p>
<pre class="result notranslate">
php app/console doctrine:phpcr:init:dbal --force 
php app/console doctrine:phpcr:repository:init 
php app/console doctrine:phpcr:fixtures:load -n 
</pre>
<p><b>Step 5</b> &minus; Now, run the application using the following command.</p>
<pre class="result notranslate">
php app/console server:run  
</pre>
<p><b>Step 6</b> &minus; Finally, open the application in the browser using http://localhost:8000/.</p>
<p>It will produce the following output &minus;</p>
<img src="/symfony/images/cmf_sandbox.jpg" alt="CMF Sandbox" />
<h1>Symfony - Working Example</h1>
<p>In this chapter, we will learn how to create a complete MVC based <b>BookStore Application</b> in Symfony Framework. Following are the steps.</p>
<h2>Step 1: Create a Project</h2>
<p>Let’s create a new project named “BookStore” in Symfony using the following command.</p>
<pre class="result notranslate">
symfony new BookStore
</pre>
<h2>Step 2: Create a Controller and Route</h2>
<p>Create a BooksController in “src/AppBundle/Controller” directory. It is defined as follows.</p>
<h3>BooksController.php</h3>
<pre class="prettyprint notranslate">
&lt;?php  
namespace AppBundle\Controller;  

use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route; 
use Symfony\Bundle\FrameworkBundle\Controller\Controller; 
use Symfony\Component\HttpFoundation\Response;  

class BooksController { 
   /** 
      * @Route("/books/author") 
   */ 
   public function authorAction() { 
      return new Response('Book store application!'); 
   } 
}
</pre>
<p>Now, we have created a BooksController, next create a view to render the action.</p>
<h2>Step 3: Create a View</h2>
<p>Let’s create a new folder named “Books” in “app/Resources/views/” directory. Inside the folder, create a file “author.html.twig” and add the following changes.</p>
<h3>author.html.twig</h3>
<pre class="result notranslate">
&lt;h3&gt; Simple book store application&lt;/h3&gt; 
</pre>
<p>Now, render the view in BooksController class. It is defined as follows.</p>
<h3>BooksController.php</h3>
<pre class="prettyprint notranslate">
&lt;?php  
namespace AppBundle\Controller;  

use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route; 
use Symfony\Bundle\FrameworkBundle\Controller\Controller; 
use Symfony\Component\HttpFoundation\Response;  

class BooksController extends Controller { 
   /** 
      * @Route("/books/author") 
   */ 
   public function authorAction() { 
      return $this-&gt;render('books/author.html.twig'); 
   } 
}
</pre>
<p>As of now, we have created a basic BooksController and the result is rendered. You can check the result in the browser using the URL “http://localhost:8000/books/author”.</p>
<h2>Step 4: Database Configuration</h2>
<p>Configure the database in “app/config/parameters.yml” file.</p>
<p>Open the file and add the following changes.</p>
<h3>parameter.yml</h3>
<pre class="result notranslate">
# This file is auto-generated during the composer install  
parameters: 
   database_driver: pdo_mysql 
   database_host: localhost 
   database_port: 3306 
   database_name: booksdb 
   database_user: &lt;database_username&gt; 
   database_password: &lt;database_password&gt; 
   mailer_transport: smtp 
   mailer_host: 127.0.0.1 
   mailer_user: null 
   mailer_password: null 
   secret: 0ad4b6d0676f446900a4cb11d96cf0502029620d 
   
   doctrine: 
      dbal: 
      driver:   pdo_mysql 
      host:     '%database_host%' 
      dbname:   '%database_name%' 
      user:     '%database_user%' 
      password: '%database_password%' 
      charset: utf8mb4 
</pre>
<p>Now, Doctrine can connect to your database “booksdb”.</p>
<h2>Step 5: Create a Database</h2>
<p>Issue the following command to generate “booksdb” database. This step is used to bind the database in Doctrine.</p>
<pre class="result notranslate">
php bin/console doctrine:database:create
</pre>
<p>After executing the command, it automatically generates an empty “booksdb” database. You can see the following response on your screen.</p>
<p>It will produce the following result &minus;</p>
<pre class="result notranslate">
Created database `booksdb` for connection named default 
</pre>
<h2>Step 6: Mapping Information</h2>
<p>Create a Book entity class inside the Entity directory which is located at “src/AppBundle/Entity”.</p>
<p>You can directly pass Book class using annotations. It is defined as follows.</p>
<h3>Book.php</h3>
<p>Add the following code in the file.</p>
<pre class="prettyprint notranslate">
&lt;?php 
namespace AppBundle\Entity; 
use Doctrine\ORM\Mapping as ORM;  

/** 
   * @ORM\Entity 
   * @ORM\Table(name = "Books") 
*/  
class Book { 
   /** 
      * @ORM\Column(type = "integer") 
      * @ORM\Id 
      * @ORM\GeneratedValue(strategy = "AUTO") 
   */ 
   private $id;  
   
   /** 
      * @ORM\Column(type = "string", length = 50) 
   */ 
   private $name;  
    
   /** 
      * @ORM\Column(type = "string", length = 50) 
   */ 
      
   private $author;
   /** 
      * @ORM\Column(type = "decimal", scale = 2) 
   */ 
   private $price; 
}  
</pre>
<p>Here, the table name is optional.</p>
<p>If the table name is not specified, then it will be determined automatically based on the name of the entity class.</p>
<h2>Step 7: Bind an Entity</h2>
<p>Doctrine creates simple entity classes for you. It helps you build any entity.</p>
<p>Issue the following command to generate an entity.</p>
<pre class="result notranslate">
php bin/console doctrine:generate:entities AppBundle/Entity/Book
</pre>
<p>Then you will see the following result and the entity will be updated.</p>
<pre class="result notranslate">
Generating entity "AppBundle\Entity\Book” 
   &gt; backing up Book.php to Book.php~ 
   &gt; generating AppBundle\Entity\Book 
</pre>
<h3>Book.php</h3>
<pre class="prettyprint notranslate">
&lt;?php  
namespace AppBundle\Entity;  

use Doctrine\ORM\Mapping as ORM;  
/** 
   * @ORM\Entity 
   * @ORM\Table(name = "Books") 
*/ 
class Book { 
   /** 
      * @ORM\Column(type = "integer") 
      * @ORM\Id
      * @ORM\GeneratedValue(strategy = "AUTO") 
   */ 
   private $id;  
    
   /** 
      * @ORM\Column(type = "string", length = 50) 
   */ 
   private $name;  
    
   /** 
      * @ORM\Column(type = "string", length = 50) 
   */ 
   private $author;  
    
   /** 
      * @ORM\Column(type = "decimal", scale = 2) 
   */ 
   private $price;  
    
   /** 
      * Get id 
      * 
      * @return integer 
   */ 
   public function getId() { 
      return $this-&gt;id; 
   }  
   
   /** 
      * Set name 
      * 
      * @param string $name 
      * 
      * @return Book 
   */
   public function setName($name) { 
      $this-&gt;name = $name; 
      return $this; 
   }  
    
   /** 
      * Get name 
      * 
      * @return string 
   */ 
   public function getName() { 
      return $this-&gt;name; 
   }  
    
   /** 
      * Set author 
      * 
      * @param string $author 
      * 
      * @return Book 
   */ 
   public function setAuthor($author) { 
      $this-&gt;author = $author; 
      return $this; 
   }  
    
   /** 
      * Get author 
      * 
      * @return string 
   */ 
   public function getAuthor() {
      return $this-&gt;author; 
   }  
   
   /** 
      * Set price 
      * 
      * @param string $price 
      * 
      * @return Book 
   */ 
   public function setPrice($price) { 
      $this-&gt;price = $price; 
      return $this; 
   }  
    
   /** 
      * Get price 
      * 
      * @return string 
   */ 
   public function getPrice() { 
      return $this-&gt;price; 
   } 
}     
</pre>
<h2>Step 8: Mapping Validation</h2>
<p>After creating entities, you should validate the mappings using the following command.</p>
<pre class="prettyprint notranslate">
php bin/console doctrine:schema:validate 
</pre>
<p>It will produce the following result &minus;</p>
<pre class="result notranslate">
[Mapping]  OK - The mapping files are correct
[Database] FAIL - The database schema is not in sync with the current mapping file.
</pre>
<p>Since we have not created the Books table, the entity is out of sync. Let us create the Books table using Symfony command in the next step.</p>
<h2>Step 9: Creating Schema</h2>
<p>Doctrine can automatically create all the database tables needed for Book entity. This can be done using the following command.</p>
<pre class="result notranslate">
php bin/console doctrine:schema:update --force
</pre>
<p>After executing the command, you will see the following response.</p>
<pre class="result notranslate">
Updating database schema... 
Database schema updated successfully! "1" query was executed 
</pre>
<p>Now, again validate the schema using the following command.</p>
<pre class="result notranslate">
php bin/console doctrine:schema:validate 
</pre>
<p>It will produce the following result &minus;</p>
<pre class="result notranslate">
[Mapping]  OK - The mapping files are correct. 
[Database] OK - The database schema is in sync with the mapping files. 
</pre>
<h2>Step 10: Getter and Setter</h2>
<p>As seen in the Bind an Entity section, the following command generates all the getters and setters for the Book class.</p>
<pre class="result notranslate">
$ php bin/console doctrine:generate:entities AppBundle/Entity/Book
</pre>
<h2>Step 11: Fetching Objects from the Database</h2>
<p>Create a method in BooksController that will display the books’ details.</p>
<h3>BooksController.php</h3>
<pre class="prettyprint notranslate">
/** 
   * @Route("/books/display", name="app_book_display") 
*/ 
public function displayAction() { 
   $bk = $this-&gt;getDoctrine()
   -&gt;getRepository('AppBundle:Book') 
   -&gt;findAll(); 
   return $this-&gt;render('books/display.html.twig', array('data' =&gt; $bk)); 
}
</pre>
<h2>Step 12: Create a View</h2>
<p>Let’s create a view that points to display action. Move to the views directory and create file “display.html.twig”. Add the following changes in the file.</p>
<h3>display.html.twig</h3>
<pre class="prettyprint notranslate">
{% extends 'base.html.twig' %} 
{% block stylesheets %} 
   &lt;style&gt; 
      .table { border-collapse: collapse; } 
      .table th, td { 
         border-bottom: 1px solid #ddd; 
         width: 250px; 
         text-align: left; 
         align: left; 
      } 
   &lt;/style&gt; 
{% endblock %}  
{% block body %} 
   &lt;h2&gt;Books database application!&lt;/h2&gt;  
   &lt;table class = "table"&gt;  
      &lt;tr&gt;  
         &lt;th&gt;Name&lt;/th&gt;  
         &lt;th&gt;Author&lt;/th&gt;  
         &lt;th&gt;Price&lt;/th&gt;  
      &lt;/tr&gt;  
      {% for x in data %} 
      &lt;tr&gt;  
         &lt;td&gt;{{ x.Name }}&lt;/td&gt;   
         &lt;td&gt;{{ x.Author }}&lt;/td&gt;
         &lt;td&gt;{{ x.Price }}&lt;/td&gt;  
      &lt;/tr&gt;  
      {% endfor %} 
   &lt;/table&gt; 
{% endblock %}         
</pre>
<p>You can obtain the result by requesting the URL “http://localhost:8000/books/display” in the browser.</p>
<h3>Result</h3>
<img src="/symfony/images/books_database_application.jpg" alt="Books Database Application" />
<h2>Step 13: Add a Book Form</h2>
<p>Let's create a functionality to add a book into the system. Create a new page, newAction method in the BooksController as follows.</p>
<pre class="prettyprint notranslate">
// use section 
use Symfony\Component\HttpFoundation\Request; 
use Symfony\Component\Form\Extension\Core\Type\TextType; 
use Symfony\Component\Form\Extension\Core\Type\SubmitType;  

// methods section 
/** 
   * @Route("/books/new") 
*/ 

public function newAction(Request $request) { 
   $stud = new StudentForm();
      $form = $this-&gt;createFormBuilder($stud) 
         -&gt;add('name', TextType::class) 
         -&gt;add('author', TextType::class) 
         -&gt;add('price', TextType::class) 
         -&gt;add('save', SubmitType::class, array('label' =&gt; 'Submit')) 
         -&gt;getForm();  
   return $this-&gt;render('books/new.html.twig', array('form' =&gt; $form-&gt;createView(),)); 
} 
</pre>
<h2>Step 14: Create a View For Book Form</h2>
<p>Let’s create a view that points to a new action. Move to the views directory and create a file “new.html.twig”. Add the following changes in the file.</p>
<pre class="prettyprint notranslate">
{% extends 'base.html.twig' %} 
{% block stylesheets %} 
   &lt;style&gt; 
      #simpleform { 
         width:600px; 
         border:2px solid grey; 
         padding:14px; 
      } 
      #simpleform label { 
         font-size:14px; 
         float:left; 
         width:300px; 
         text-align:right; 
         display:block; 
      } 
      #simpleform span { 
         font-size:11px; 
         color:grey;
         width:100px; 
         text-align:right; 
         display:block; 
      }  
      #simpleform input { 
         border:1px solid grey; 
         font-family:verdana; 
         font-size:14px; 
         color:light blue; 
         height:24px; 
         width:250px; 
         margin: 0 0 10px 10px; 
      }  
      #simpleform textarea { 
         border:1px solid grey; 
         font-family:verdana; 
         font-size:14px; 
         color:light blue; 
         height:120px; 
         width:250px; 
         margin: 0 0 20px 10px; 
      }  
      #simpleform select { 
         margin: 0 0 20px 10px; 
      } 
      #simpleform button { 
         clear:both; 
         margin-left:250px; 
         background: grey;
         color:#FFFFFF; 
         border:solid 1px #666666; 
         font-size:16px; 
      } 
   &lt;/style&gt; 
{% endblock %}  
{% block body %} 
   &lt;h3&gt;Book details:&lt;/h3&gt; 
   &lt;div id = "simpleform"&gt; 
      {{ form_start(form) }} 
      {{ form_widget(form) }} 
      {{ form_end(form) }} 
   &lt;/div&gt; 
{% endblock %}    
</pre>
<p>It will produce the following screen as output &minus;</p>
<img src="/symfony/images/book_details.jpg" alt="Book Details" />
<h2>Step 15: Collect Book Information and Store It</h2>
<p>Let's change the newAction method and include the code to handle form submission. Also, store the book information into the database.</p>
<pre class="prettyprint notranslate">
/**
   * @Route("/books/new", name="app_book_new") 
*/ 
public function newAction(Request $request) { 
   $book = new Book(); 
   $form = $this-&gt;createFormBuilder($book) 
      -&gt;add('name', TextType::class) 
      -&gt;add('author', TextType::class) 
      -&gt;add('price', TextType::class) 
      -&gt;add('save', SubmitType::class, array('label' =&gt; 'Submit')) 
      -&gt;getForm();  
   
   $form-&gt;handleRequest($request);  
   
   if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) { 
      $book = $form-&gt;getData(); 
      $doct = $this-&gt;getDoctrine()-&gt;getManager();  
      
      // tells Doctrine you want to save the Product 
      $doct-&gt;persist($book);  
      
      //executes the queries (i.e. the INSERT query) 
      $doct-&gt;flush();  
      
      return $this-&gt;redirectToRoute('app_book_display'); 
   } else { 
      return $this-&gt;render('books/new.html.twig', array( 
         'form' =&gt; $form-&gt;createView(), 
      )); 
   } 
}        
</pre>
<p>Once the book is stored into the database, redirect to the book display page.</p>
<h2>Step 16: Updating the Book</h2>
<p>To update the book, create an action, updateAction, and add the following changes.</p>
<pre class="prettyprint notranslate">
/** 
   * @Route("/books/update/{id}", name = "app_book_update" ) 
*/ 
public function updateAction($id, Request $request) { 
   $doct = $this-&gt;getDoctrine()-&gt;getManager(); 
   $bk = $doct-&gt;getRepository('AppBundle:Book')-&gt;find($id);  
    
   if (!$bk) { 
      throw $this-&gt;createNotFoundException( 
         'No book found for id '.$id 
      ); 
   }  
   $form = $this-&gt;createFormBuilder($bk) 
      -&gt;add('name', TextType::class) 
      -&gt;add('author', TextType::class) 
      -&gt;add('price', TextType::class) 
      -&gt;add('save', SubmitType::class, array('label' =&gt; 'Submit')) 
      -&gt;getForm();  
   
   $form-&gt;handleRequest($request);  
   
   if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) { 
      $book = $form-&gt;getData(); 
      $doct = $this-&gt;getDoctrine()-&gt;getManager();  
      
      // tells Doctrine you want to save the Product 
      $doct-&gt;persist($book);  
        
      //executes the queries (i.e. the INSERT query) 
      $doct-&gt;flush(); 
      return $this-&gt;redirectToRoute('app_book_display'); 
   } else {  
      return $this-&gt;render('books/new.html.twig', array(
         'form' =&gt; $form-&gt;createView(), 
      )); 
   } 
}        
</pre>
<p>Here, we are processing two functionalities. If the request only contains id, then we fetch it from the database and show it in the book form. And, if the request contains full book information, then we update the details in the database and redirect to the book display page.</p>
<h2>Step 17: Deleting an Object</h2>
<p>Deleting an object requires a call to the remove() method of the entity (doctrine) manager.</p>
<p>This can be done using the following code.</p>
<pre class="prettyprint notranslate">
/** 
   * @Route("/books/delete/{id}", name="app_book_delete") 
*/ 
public function deleteAction($id) { 
   $doct = $this-&gt;getDoctrine()-&gt;getManager(); 
   $bk = $doct-&gt;getRepository('AppBundle:Book')-&gt;find($id); 
   
   if (!$bk) { 
      throw $this-&gt;createNotFoundException('No book found for id '.$id); 
   } 
   $doct-&gt;remove($bk); 
   $doct-&gt;flush(); 
   return $this-&gt;redirectToRoute('app_book_display'); 
} 
</pre>
<p>Here, we deleted the book and redirected to book display page.</p>
<h2>Step 18: Include Add / Edit / Delete Functionality in Display Page</h2>
<p>Now, update the body block in display view and include include add / edit / delete links as follows.</p>
<pre class="prettyprint notranslate">
{% block body %} 
   &lt;h2&gt;Books database application!&lt;/h2&gt; 
   &lt;div&gt; 
      &lt;a href = "{{ path('app_book_new') }}"&gt;Add&lt;/a&gt; 
   &lt;/div&gt; 
   &lt;table class = "table"&gt;  
      &lt;tr&gt;  
         &lt;th&gt;Name&lt;/th&gt;  
         &lt;th&gt;Author&lt;/th&gt;  
         &lt;th&gt;Price&lt;/th&gt; 
         &lt;th&gt;&lt;/th&gt; 
         &lt;th&gt;&lt;/th&gt; 
      &lt;/tr&gt;  
      {% for x in data %} 
      &lt;tr&gt;  
         &lt;td&gt;{{ x.Name }}&lt;/td&gt;   
         &lt;td&gt;{{ x.Author }}&lt;/td&gt;   
         &lt;td&gt;{{ x.Price }}&lt;/td&gt;   
         &lt;td&gt;&lt;a href = "{{ path('app_book_update', { 'id' : x.Id }) }}"&gt;Edit&lt;/a&gt;&lt;/td&gt;
         &lt;td&gt;&lt;a href = "{{ path('app_book_delete', { 'id' : x.Id }) }}"&gt;Delete&lt;/a&gt;&lt;/td&gt;
      &lt;/tr&gt;  
      {% endfor %} 
   &lt;/table&gt;  
{% endblock %} 
</pre>
<p>It will produce the following screen as output &minus;</p>
<img src="/symfony/images/books_database_application_add.jpg" alt="Books Database Application" />
<p>Symfony comprises of a set of PHP components, an application framework, a community and a philosophy. Symfony is extremely flexible and capable of meeting all the requirements of advanced users, professionals, and an ideal choice for all the beginners with PHP.</p>
<div class="mui-container-fluid button-borders show">
<div class="pre-btn">
<a href="/symfony/symfony_complete_working_example.htm"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
</div>
<div class="nxt-btn">
<a href="/symfony/symfony_useful_resources.htm">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
</div>
</div>
<div class="google-bottom-ads">
<div>Advertisements</div>
<script><!--
var width = 580;
var height = 400;
var format = "580x400_as";
if( window.innerWidth < 468 ){
   width = 300;
   height = 250;
   format = "300x250_as";
}
google_ad_client = "pub-7133395778201029";
google_ad_width = width;
google_ad_height = height;
google_ad_format = format;
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<div class="space-bottom"></div>
</div>
</div>
<!-- Tutorial Content Ends Here -->
<!-- Right Column Starts Here -->
<div class="mui-col-md-2 google-right-ads">
<div class="space-top"></div>
<div class="google-right-ad" style="margin: 0px auto !important;margin-top:5px;">
<script><!--
google_ad_client = "pub-2537027957187252";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div class="google-right-ad">
<div class="adsbyvli" data-ad-slot="vi_9012177"></div>
<script>(vitag.Init = window.vitag.Init || []).push(function(){viAPItag.display("vi_9012177")})</script>
</div>
<div class="space-bottom"></div>
<div class="google-right-ad">
<div class="adsbyvli" data-ad-slot="vi_9013289"></div>
<script>(vitag.Init = window.vitag.Init || []).push(function(){viAPItag.display("vi_9013289")})</script>
</div>
<div class="space-bottom" style="margin-bottom:15px;"></div>
</div>
<!-- Right Column Ends Here -->
</div>
</div>
<div class="clear"></div>
<footer id="footer">
<div class="mui--text-center">
<div class="mui--text-caption mui--text-light">
<a href="/index.htm" class="logo"><img class="img-responsive" src="/images/logo-black.png" alt="Tutorials Point" title="Tutorials Point"></a>
</div>
<ul class="mui-list--inline mui--text-body2 mui--text-light">
<li><a href="/about/index.htm"><i class="fal fa-globe"></i> About us</a></li>
<li><a href="/about/about_terms_of_use.htm"><i class="fal fa-asterisk"></i> Terms of use</a></li>
<li><a href="/about/about_privacy.htm#cookies"> <i class="fal fa-shield-check"></i> Cookies Policy</a></li>
<li><a href="/about/faq.htm"><i class="fal fa-question-circle"></i> FAQ's</a></li>
<li><a href="/about/about_helping.htm"><i class="fal fa-hands-helping"></i> Helping</a></li>
<li><a href="/about/contact_us.htm"><i class="fal fa-map-marker-alt"></i> Contact</a></li>
</ul>
<div class="mui--text-caption mui--text-light bottom-copyright-text">&copy; Copyright 2019. All Rights Reserved.</div>
</div>
<div id="privacy-banner">
  <div>
    <p>
      We use cookies to provide and improve our services. By using our site, you consent to our Cookies Policy.
      <a id="banner-accept" href="#">Accept</a>
      <a id="banner-learn" href="/about/about_cookies.htm" target="_blank">Learn more</a>
    </p>
  </div>
</div>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-232293-17"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-232293-6');
</script>
</footer>
</body>
</html>
